Test Set Evaluation Results

--- Processing Test Case 1 ---
Natural Language Query: What pharmacology data is there for UniProtKB ID Q8NEC5 and Q96P56?
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from interaction i, ligand l, object o where i.object_id in (select dl.object_id from database_link dl where dl.placeholder = 'Q8NEC5' or dl. placeholder =  'Q96P56' and dl.database_id in (select database_id from database where name ilike '%Uniprot%')) and i.ligand_id=l.ligand_id and i.object_id=o.object_id;
Generated SQL: SELECT 
    i.interaction_id, 
    i.ligand_id, 
    l.name AS ligand_name, 
    i.object_id, 
    o.name AS object_name, 
    i.type, 
    i.action, 
    i.affinity_units, 
    i.affinity_high, 
    i.affinity_median, 
    i.affinity_low 
FROM 
    interaction i 
JOIN 
    ligand l ON i.ligand_id = l.ligand_id 
JOIN 
    object o ON i.object_id = o.object_id 
WHERE 
    i.object_id IN (
        SELECT object_id 
        FROM database_link 
        WHERE database_id = (
            SELECT database_id 
            FROM database 
            WHERE name = 'UniProtKB'
        ) 
        AND placeholder IN ('Q8NEC5', 'Q96P56')
    );

Expected SQL Results:
    ligand_id                    name               type  ...        action affinity affinity_units
0        4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.60          pIC50
1        1882         PGE<sub>1</sub>         Metabolite  ...  Full agonist     6.30          pEC50
2        5412  PGF<sub>1&alpha;</sub>         Metabolite  ...  Full agonist     6.30          pEC50
3        1883         PGE<sub>2</sub>         Metabolite  ...  Full agonist     6.30          pEC50
4        4212               HC-056456  Synthetic organic  ...          None     4.70          pIC50
5        2432           ruthenium red          Inorganic  ...    Inhibition     5.00          pIC50
6        2522              mibefradil  Synthetic organic  ...    Inhibition     4.50          pIC50
7        2440         Cd<sup>2+</sup>          Inorganic  ...    Inhibition     3.70          pIC50
8        4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.70          pIC50
9        2476         Ni<sup>2+</sup>          Inorganic  ...    Inhibition     3.50          pIC50
10       2377            progesterone         Metabolite  ...  Full agonist     8.11          pEC50
11       4269              NNC55-0396  Synthetic organic  ...    Inhibition     4.60          pIC50
12       2522              mibefradil  Synthetic organic  ...    Inhibition     4.50          pIC50
13       5412  PGF<sub>1&alpha;</sub>         Metabolite  ...  Full agonist     6.30          pEC50
14       1883         PGE<sub>2</sub>         Metabolite  ...  Full agonist     6.30          pEC50
15       1882         PGE<sub>1</sub>         Metabolite  ...  Full agonist     6.30          pEC50
16       2377            progesterone         Metabolite  ...  Full agonist     8.11          pEC50
17       2432           ruthenium red          Inorganic  ...    Antagonist     5.00          pIC50
18       4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.70          pIC50
19       2440         Cd<sup>2+</sup>          Inorganic  ...    Inhibition     3.70          pIC50
20       2476         Ni<sup>2+</sup>          Inorganic  ...    Antagonist     3.50          pIC50

[21 rows x 9 columns]

Generated SQL Results:
    interaction_id  ligand_id             ligand_name  ...  affinity_high affinity_median affinity_low
0            77843       4269              NNC55-0396  ...            NaN            5.60          NaN
1            77836       1882         PGE<sub>1</sub>  ...            NaN            6.30          NaN
2            77837       5412  PGF<sub>1&alpha;</sub>  ...            NaN            6.30          NaN
3            77838       1883         PGE<sub>2</sub>  ...            NaN            6.30          NaN
4            12356       4212               HC-056456  ...            NaN            4.70          NaN
5            77841       2432           ruthenium red  ...            NaN            5.00          NaN
6            77844       2522              mibefradil  ...           4.50             NaN          4.4
7            77839       2440         Cd<sup>2+</sup>  ...            NaN            3.70          NaN
8            77842       4269              NNC55-0396  ...            NaN            5.70          NaN
9            77840       2476         Ni<sup>2+</sup>  ...            NaN            3.50          NaN
10           77835       2377            progesterone  ...           8.11             NaN          8.0
11           77859       4269              NNC55-0396  ...            NaN            4.60          NaN
12           77860       2522              mibefradil  ...           4.50             NaN          4.4
13           77853       5412  PGF<sub>1&alpha;</sub>  ...            NaN            6.30          NaN
14           77854       1883         PGE<sub>2</sub>  ...            NaN            6.30          NaN
15           77852       1882         PGE<sub>1</sub>  ...            NaN            6.30          NaN
16           77851       2377            progesterone  ...            NaN            8.11          NaN
17           77857       2432           ruthenium red  ...            NaN            5.00          NaN
18           77858       4269              NNC55-0396  ...            NaN            5.70          NaN
19           77855       2440         Cd<sup>2+</sup>  ...            NaN            3.70          NaN
20           77856       2476         Ni<sup>2+</sup>  ...            NaN            3.50          NaN

[21 rows x 11 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 2 ---
Natural Language Query: What selective agonists are there for chemokine receptors family members?
Expected SQL: select l.ligand_id, l.name, l.type, i.type, i.action, i.selective from interaction i, ligand l where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%chemokine receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%chemokine receptor%')))) and i.selective is true and i.type='Agonist' and i.ligand_id=l.ligand_id;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%chemokine receptors%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT 
    o.object_id, 
    o.name AS receptor_name, 
    i.ligand_id, 
    l.name AS ligand_name, 
    i.affinity_units, 
    i.type, 
    i.selective, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity
FROM 
    object o
JOIN 
    interaction i ON o.object_id = i.object_id
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    o.object_id IN (
        SELECT object_id 
        FROM receptor2family 
        WHERE family_id IN (
            SELECT family_id 
            FROM subfamilies 
            UNION 
            SELECT family_id 
            FROM family 
            WHERE family_id IN (
                SELECT family_id 
                FROM family 
                WHERE name ILIKE '%chemokine receptors%'
            )
        )
    )
    AND i.type = 'Agonist'
    AND i.selective = 'Selective';

Expected SQL Results:
    ligand_id     name     type     type        action  selective
0         759     CCL7  Peptide  Agonist  Full agonist       True
1         817    CCL25  Peptide  Agonist  Full agonist       True
2         771     CCL2  Peptide  Agonist  Full agonist       True
3         753    CCL14  Peptide  Agonist  Full agonist       True
4         772     CCL8  Peptide  Agonist  Full agonist       True
..        ...      ...      ...      ...           ...        ...
72        773  HIV-Tat  Peptide  Agonist       Agonist       True
73       1272    CCL16  Peptide  Agonist  Full agonist       True
74        772     CCL8  Peptide  Agonist  Full agonist       True
75        810    CCL19  Peptide  Agonist       Agonist       True
76       3649    CCL28  Peptide  Agonist  Full agonist       True

[77 rows x 6 columns]

Generated SQL Results:
Error executing generated SQL.

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 3 ---
Natural Language Query: Which Lipinski compounds target Coronavirus proteins?
Expected SQL: select * from ligand where ligand_id in (select ligand_id from ligand_physchem where lipinski_s_rule_of_five = 0) and ligand_id in (select ligand_id from interaction where object_id in (select object_id from receptor2family rf where family_id in (select family_id from family where name = 'Coronavirus (CoV) proteins')));
Generated SQL: SELECT l.ligand_id, l.name, l.type 
FROM ligand l
JOIN ligand_physchem lp ON l.ligand_id = lp.ligand_id
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE lp.lipinski_s_rule_of_five = 0 
AND o.name ILIKE '%coronavirus%' 
OR o.name ILIKE '%COVID%' 
OR o.name ILIKE '%SARS-CoV%'
GROUP BY l.ligand_id, l.name, l.type;

Expected SQL Results:
    ligand_id                          name  ...                             immuno_comments_vector  gtmp_comments_vector
0       12828                         MI-06  ...                                                                         
1       11256                    walrycin B  ...                                                                         
2       12897                  ibuzatrelvir  ...                                                                         
3       10749      example 4 [WO2017114509]  ...                                                                         
4       12822                         MI-21  ...                                                                         
..        ...                           ...  ...                                                ...                   ...
63      12840  compound 14 [PMID: 33786375]  ...                                                                         
64      13318                          RS-1  ...                                                                         
65      11173                      GRL-0496  ...                                                                         
66      11658                        CCF981  ...                                                                         
67      11257                      Z-FA-FMK  ...  'activ':8 'cell':7 'deplet':18 'fa':3 'fmk':4 ...                      

[68 rows x 46 columns]

Generated SQL Results:
   ligand_id        name               type
0      10715  remdesivir  Synthetic organic

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 4 ---
Natural Language Query: Find all of the pharmacological agents that are active in humans but not rats and mice
Expected SQL: select distinct i.ligand_id, (select name from ligand l where l.ligand_id=i.ligand_id) from interaction i where i.species_id in (select species_id from species where name = 'Human') and i.ligand_id not in (select ligand_id from interaction i where species_id in (select species_id from species where name = 'Rat')) and i.ligand_id not in (select ligand_id from interaction i where species_id in (select species_id from species where name = 'Mouse')) and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.species_id = (SELECT species_id FROM species WHERE name = 'Human')
AND i.ligand_id NOT IN (
    SELECT DISTINCT i2.ligand_id 
    FROM interaction i2
    WHERE i2.species_id IN (
        SELECT species_id FROM species WHERE name IN ('Mouse', 'Rat')
    )
);

Expected SQL Results:
      ligand_id                               name
0             1                         flesinoxan
1             6     7-methoxy-1-naphthylpiperazine
2             8                          BMY-14802
3            10                          BRL-15572
4            11                           CP 93129
...         ...                                ...
6860      13422  P2Y<sub>14</sub>R antagonist I-17
6861      13423      compound XVI [PMID: 38863440]
6862      13424                         PSB-KK1445
6863      13425                         PSB-KK1415
6864      13429   TYK2 inhibitor 18 [WO2023227946]

[6865 rows x 2 columns]

Generated SQL Results:
      ligand_id                               name
0             1                         flesinoxan
1             6     7-methoxy-1-naphthylpiperazine
2             8                          BMY-14802
3            10                          BRL-15572
4            11                           CP 93129
...         ...                                ...
7856      13422  P2Y<sub>14</sub>R antagonist I-17
7857      13423      compound XVI [PMID: 38863440]
7858      13424                         PSB-KK1445
7859      13425                         PSB-KK1415
7860      13429   TYK2 inhibitor 18 [WO2023227946]

[7861 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 5 ---
Natural Language Query: Find all patent references in the Guide that are post-2021?
Expected SQL: select article_title, year, url, patent_number, authors from reference where type='Patent' and year >= 2022;
Generated SQL: SELECT * FROM reference 
WHERE type = 'Patent' 
AND year > 2021;

Expected SQL Results:
                                        article_title  ...                                            authors
0                Methods of treating mutant lymphomas  ...                                           Walker D
1          Antimalarial hexahydropyrimidine analogues  ...   De Haro Garcia T, Frost JR, Lallemand B, Lowe MA
2   Aminocarbamoyl compounds for the treatment of ...  ...      Chen J, Liang C, Miao K, Wu Y, Yun H, Zhang W
3   Novel coronavirus main protease inhibitor, and...  ...                                       Yang S, Li L
4                 SARS-COV-2 MPRO INHIBITOR COMPOUNDS  ...  Congreve MS, Christopher JA, Pickworth M, De G...
5   Triazine derivative having virus propagation i...  ...  Tachibana Y, Uehara S, Unoh Y, Nakahara K, Tao...
6                                Fused ring compounds  ...                 Malhotra S, Xin J, Do S, Terrett J
7   Compound for inhibiting krasg12c mutant protei...  ...                                         Yu S, Li B
8                            Modulators of hemoglobin  ...                                               Li Z
9   Use of inhibitors of phosphatase activity of s...  ...                               Bellien J, Djerada Z
10                         Pyrrolopyrimidine compound  ...  Li Z, Xiao D, Hu Y, Dai L, Duan X, Sun Y, Peng...
11  Method and compound for use, in treating and/o...  ...               Kazmi SMI, Rajagopal S, Sivanandan D
12  A pi3k-delta inhibitor for use in treatment re...  ...  Pickering C, Van Der Veen L, Lahn M, Zorrilla ...
13                Anti-PCSK9 antibody and use thereof  ...  Tsun A, Krauland E, Belk JP, Maio X, Zhang M, ...
14            Phospholipid compounds and uses thereof  ...  Lazerwith SE, Medley JW, Morganelli PA, Stratt...
15  VIRUS MAIN PROTEASE INHIBITOR, PREPARATION MET...  ...  Shen Z, Li Y, Zhu J, Huang Q, Yin J, Xu Y, Wu ...
16  COMPOUND EXHIBITING PHYSIOLOGICAL ACTIVITY SUC...  ...                    Mitsuya H, Tamamura H, Kuwata N
17            Antiviral heteroaryl ketone derivatives  ...  Owen DR, Pettersson MY, Reese MR, Sammona MF, ...
18  3CL PROTEASE SMALL-MOLECULE INHIBITOR FOR TREA...  ...  Liu R, Xu Y, Hua L, Zhou J, Deng H, Chu X, Ding S
19     RNA VIRUS INHIBITOR COMPOUNDS AND USES THEREOF  ...  Nieman JA, Lemieux MJ, Tyrrell DL, Bai B, Belo...
20  Protacs targeting coronavirus 3CL protease and...  ...  Liang C, Xin L, Tian L, Xia J, Qin N, Li J, Qi...
21  Protacs based on VHL ligand targeting coronavi...  ...  Liang C, Xin L, Tian L, Xia J, Qin N, Li J, Qi...
22  SUBSTITUTED HYDANTOIN COMPOUNDS, METHODS FOR P...  ...     Carlsson J, Danielson H, Moodie L, Sandstrom A
23  Heteroaromatic macrocyclic ether chemotherapeu...  ...  Horan JC, Tang X, Mente SR, Pelish HE, Shair M...
24  Ezh2 inhibition in combination therapies for t...  ...                                         Bradley WD
25                              Combination therapies  ...  Daskalakis N, Gutte CD, Kwon MC, Ferrante LA, ...
26  Pharmaceutical compositions of a selective c-k...  ...                                 Keaney GF, Kwong E
27                       Cocrystal of a cdk inhibitor  ...       Bhat U, Bokalial R, badiger SE, Devanathan K
28  Certain chemical entities, compositions, and m...  ...                                             Qian X
29   Indolo heptamyl oxime analogue as parp inhibitor  ...   Hu Y, Li G, Sun F, Chi Z, Luo J, Ding CZ, Chen S
30  Prodrug modulators of the integrated stress pa...  ...  Martin KA, Sidrauski C, Dart MJ, Frost JM, Ton...
31                   Irak4 degraders and uses thereof  ...                                  Rong H, Enerson B
32             Nitrile-Containing Antiviral Compounds  ...  Owen DR, Reese MR, Sammons MF, Tuttle JB, Verh...
33  Small molecule inhibitors of mammalian slc6a19...  ...  Brown DG, Muncipinto G, Zweig JE, Hollibaugh R...
34  Compounds that inhibit pi3k isoform alpha and ...  ...                                       St. Jean DJR
35  Fatty acid amide hydrolase (faah) cleavable pr...  ...                   Stearns BA, Baccei JM, Harris JR
36  Methods of treating non-hodgkin lymphoma using...  ...  Anton MSC, Buchholz TJ, Lopez-Girona A, Narla ...
37  Triazolo-pyrimidine analogues for treating dis...  ...  Bordas V, Brun J, Decker A, Furegati M, Cognia...
38  Pyrimidine compounds, compositions, and medici...  ...  Hallar G, Madhyashta N, Stephen MR, Roth B, Pa...
39  Salt and crystal forms of an epidermal growth ...  ...          Gruff E, Kuang S, Pandey A, Shah H, Xie T
40  Phenylaminopyrimidine amide autophagy inhibito...  ...             Flynn DL, Ahn YM, Calswell T, Vogeti L
41  Methods of treating solid tumor using (19r)-5-...  ...  Green JA, Kropp JT, Noci D, Pelish HE, Porter ...
42  Use of wee1 kinase inhibitors in the treatment...  ...   Tian YE, Cai SX, Guo M, Hsieh CY, Wang R, Zhou R
43  Tricyclic janus kinase 1 inhibitors, and compo...  ...                                  Wan Z, Vazquez ML
44  Somatostatin receptor type 5 agonist for the t...  ...                         Ferrara-Cook C, Krasner AS
45  Chiral synthesis of fused bicyclic raf inhibitors  ...  Belfield A, Hawkins N, Glossop SC, Margathe JF...
46               Analogs for the treatment of disease  ...  Zavoronkovs A, Aliper A, Aladinsky V, Kukharen...
47            Purine derivatives as anticancer agents  ...                          Throner S, J&ouml;nsson D
48                    STAT degraders and uses thereof  ...                  Mainolfi N, Ji N, Yang B, Zhang Y
49  Gram-negative specific antibiotics sparing eff...  ...                          Hergenrother PJ, Muñoz KA
50        PCSK9 inhibitors and methods of use thereof  ...  Serrano-Wu MH, Chambers M, Goldsmith E, Tierne...
51                      Lincosamides and uses thereof  ...                          Myers AG, Wu K, Tresco BC
52                   Tyk2 inhibitors and uses thereof  ...  Pandey A, Dietsch G, Manojveer S, Thakkar M, D...

[53 rows x 5 columns]

Generated SQL Results:
    reference_id  ...                               article_title_vector
0          43420  ...       'lymphoma':5 'method':1 'mutant':4 'treat':3
1          43513  ...  'analogu':3 'antimalari':1 'hexahydropyrimidin':2
2          43544  ...  'aminocarbamoyl':1 'compound':2 'infect':8 'tr...
3          43815  ...  'coronavirus':2 'inhibitor':5 'main':3 'method...
4          43816  ...  '2':4 'compound':7 'cov':3 'inhibitor':6 'mpro...
5          43833  ...  'composit':10 'contain':11 'deriv':2 'effect':...
6          43901  ...                     'compound':3 'fuse':1 'ring':2
7          43903  ...  'compound':1 'inhibit':3 'krasg12c':4 'method'...
8          45928  ...                           'hemoglobin':3 'modul':1
9          44469  ...  'activ':6 'cardiometabol':14 'diseas':15 'epox...
10         44669  ...                  'compound':2 'pyrrolopyrimidin':1
11         44790  ...  'and/or':8 'compound':3 'method':1 'netosi':10...
12         44841  ...  'delta':4 'inhibitor':5 'pi3k':3 'pi3k-delta':...
13         45066  ...  'anti':2 'anti-pcsk9':1 'antibodi':4 'pcsk9':3...
14         45340  ...  'compound':2 'phospholipid':1 'thereof':5 'use':4
15         45341  ...  'inhibitor':4 'main':2 'method':6 'prepar':5 '...
16         45343  ...  'activ':4,8 'antivir':7 'compound':1 'exhibit'...
17         45345  ...     'antivir':1 'deriv':4 'heteroaryl':2 'keton':3
18         45346  ...  '3cl':1 'coronavirus':11 'infect':12 'inhibito...
19         45348  ...  'compound':4 'inhibitor':3 'rna':1 'thereof':7...
20         45349  ...  '3cl':4 'applic':10 'coronavirus':3 'method':8...
21         45350  ...  '3cl':8 'applic':14 'base':2 'coronavirus':7 '...
22         45347  ...  'and/or':14 'compound':3 'corona':18 'diseas':...
23         45451  ...  'agent':5 'chemotherapeut':4 'ether':3 'hetero...
24         45453  ...  'cancer':10 'combin':4 'ezh2':1 'inhibit':2 't...
25         45945  ...                             'combin':1 'therapi':2
26         45949  ...  'c':7 'c-kit':6 'composit':2 'inhibitor':10 'k...
27         45961  ...                  'cdk':4 'cocryst':1 'inhibitor':5
28         45964  ...  'certain':1 'chemic':2 'composit':4 'entiti':3...
29         45969  ...  'analogu':4 'heptamyl':2 'indolo':1 'inhibitor...
30         45970  ...  'integr':5 'modul':2 'pathway':7 'prodrug':1 '...
31         45987  ...           'degrad':2 'irak4':1 'thereof':5 'use':4
32         45996  ...  'antivir':4 'compound':5 'contain':3 'nitril':...
33         45999  ...  'function':7 'inhibitor':3 'mammalian':5 'mole...
34         46006  ...  'alpha':6 'cancer':11 'compound':1 'inhibit':3...
35         46235  ...  'acid':2 'amid':3 'cleavabl':6 'combin':11 'fa...
36         46336  ...  '-1':21,27 '-3':13 '-4':15,18 '2':9,10,16 '3':...
37         46340  ...  'analogu':4 'connect':8 'diseas':7 'helicas':1...
38         46477  ...  'applic':6 'composit':3 'compound':2 'medicin'...
39         46478  ...  'crystal':3 'epiderm':7 'factor':9 'form':4 'g...
40         47096  ...  'amid':2 'autophagi':3 'inhibitor':4 'method':...
41         47100  ...  '-1':30 '-10':14 '-16':12 '-20':17 '-22':44 '-...
42         47105  ...  'cancer':10 'inhibitor':5 'kinas':4 'treatment...
43         47110  ...  '1':4 'composit':7 'inhibitor':5 'janus':2 'ki...
44         47119  ...  '5':4 'agonist':5 'hyperinsulin':10 'receptor'...
45         47132  ...  'bicycl':5 'chiral':1 'fuse':4 'inhibitor':7 '...
46         47286  ...                'analog':1 'diseas':6 'treatment':4
47         47334  ...         'agent':5 'anticanc':4 'deriv':2 'purin':1
48         47581  ...            'degrad':2 'stat':1 'thereof':5 'use':4
49         47715  ...  'antibiot':5 'effect':7 'gram':2 'gram-neg':1 ...
50         47736  ...  'inhibitor':2 'method':4 'pcsk9':1 'thereof':7...
51         47782  ...                 'lincosamid':1 'thereof':4 'use':3
52         47783  ...         'inhibitor':2 'thereof':5 'tyk2':1 'use':4

[53 rows x 31 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 6 ---
Natural Language Query: What fraction of all targets with clinically approved drugs are targeted by a drug on the WHO essential medicines list?
Expected SQL: select (select count(distinct i.object_id)::decimal from interaction i where i.ligand_id in (select l.ligand_id from ligand l where l.who_essential is true and approved is true) and i.object_id is not null) / (select count(distinct i.object_id)::decimal from interaction i where i.ligand_id in (select l.ligand_id from ligand l where approved is true) and i.object_id is not null);
Generated SQL: WITH TargetsWithApprovedDrugs AS (
    SELECT DISTINCT i.object_id
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.approved = TRUE
),
TargetsWithWHOEssentialDrugs AS (
    SELECT DISTINCT i.object_id
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.approved = TRUE AND l.who_essential = TRUE
)
SELECT
    (SELECT COUNT(*) FROM TargetsWithWHOEssentialDrugs)::float / NULLIF((SELECT COUNT(*) FROM TargetsWithApprovedDrugs), 0) AS fraction_of_targets_with_who_essential_drugs;

Expected SQL Results:
   ?column?
0  0.403646

Generated SQL Results:
   fraction_of_targets_with_who_essential_drugs
0                                      0.404421

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 7 ---
Natural Language Query: Which compounds have a role in acute lymphocytic leukemia?
Expected SQL: select idl.ligand_id, l.name, idl.comment, d.name from immuno_disease2ligand idl, ligand l, disease d where idl.disease_id in (select disease_id from disease where (name ilike '%acute lymphocytic leukemia%') or (name ilike 'ALL') union select disease_id from disease2synonym where (synonym ilike '%acute lymphocytic leukemia%') or (synonym ilike 'ALL')) and idl.ligand_id=l.ligand_id and d.disease_id=idl.disease_id;
Generated SQL: SELECT idl.ligand_id, l.name, idl.comment, d.name 
FROM immuno_disease2ligand idl
JOIN ligand l ON idl.ligand_id = l.ligand_id
JOIN disease d ON idl.disease_id = d.disease_id
WHERE idl.disease_id IN (
    SELECT disease_id 
    FROM disease 
    WHERE name ILIKE '%acute lymphocytic leukemia%' 
    UNION 
    SELECT disease_id 
    FROM disease2synonym 
    WHERE synonym ILIKE '%acute lymphocytic leukemia%'
);

Expected SQL Results:
   ligand_id                   name                                            comment                              name
0       8266  inotuzumab ozogamicin                          Approved therapy for ALL.  Acute lymphocytic leukemia (ALL)
1       7384           blinatumomab  Approved specifically for Philadelphia chromos...  Acute lymphocytic leukemia (ALL)

Generated SQL Results:
   ligand_id                   name                                            comment                              name
0       8266  inotuzumab ozogamicin                          Approved therapy for ALL.  Acute lymphocytic leukemia (ALL)
1       7384           blinatumomab  Approved specifically for Philadelphia chromos...  Acute lymphocytic leukemia (ALL)

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 8 ---
Natural Language Query: What peptides, that have pharmacology in humans, also have amino-acid sequence data in the Guide?
Expected SQL: select * from grac_family_text gft where gft.family_id in (select family_id from family where name ilike '%Voltage-gated ion channels%');
Generated SQL: SELECT p.ligand_id, p.one_letter_seq, p.three_letter_seq
FROM peptide p
WHERE p.ligand_id IN (
    SELECT DISTINCT i.ligand_id 
    FROM interaction i 
    WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Human')
) AND p.one_letter_seq IS NOT NULL;

Expected SQL Results:
   family_id  ...                                    comments_vector
0        696  ...  'across':18 'addit':184 'adp':31 'anion':5 'ap...

[1 rows x 6 columns]

Generated SQL Results:
      ligand_id                         one_letter_seq                                   three_letter_seq
0          2005                             KNFFWKTYTS  c[<i>Aha</i>-Lys-Asn-Phe-Phe-Trp-Lys-Thr-Tyr-T...
1         10588  DWLKAFYDKVAEKLKEAFPDWAKAAYDKAAEKAKEAA  Asp-Trp-Leu-Lys-Ala-Phe-Tyr-Asp-Lys-Val-Ala-Gl...
2         10609                                                                                          
3         10684       KCNTATCVLGRLSQELHRLQTYPRTNTGSNTY  Lys-Cys-Asn-Thr-Ala-Thr-Cys-Val-Leu-Gly-Arg-Le...
4         11026                                                                                          
...         ...                                    ...                                                ...
1729      13330                                                                                          
1730      13331                                                                                          
1731      13403                                                                                          
1732      13381                                    LLX                                  Ac-Leu-Leu-Nle-al
1733      13383                                                                                          

[1734 rows x 3 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 9 ---
Natural Language Query: What should I use to inhibit TLR7 in cultured cells, and at what concentration?  
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%TLR7%')) union select object_id from object where name ilike '%TLR7%') and l.ligand_id=i.ligand_id and i.type in ('Channel blocker','Gating inhibitor','Inhibitor','Antagonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT l.ligand_id, l.name, 
       CASE 
           WHEN i.affinity_median IS NULL THEN 
               CASE 
                   WHEN i.affinity_high IS NULL THEN i.affinity_low 
                   ELSE i.affinity_high 
               END 
           ELSE i.affinity_median 
       END AS affinity, 
       i.affinity_units, 
       i.type, 
       i.action
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE o.name ILIKE '%TLR7%'
  AND i.type IN ('Channel blocker','Gating inhibitor','Inhibitor','Antagonist')
  AND ((i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
       OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != ''));

Expected SQL Results:
   ligand_id                           name  affinity affinity_units        type      action
0       7198             hydroxychloroquine      5.56          pIC50  Antagonist  Antagonist
1      10435  compound 10a [PMID: 31283223]      5.09          pIC50  Antagonist  Antagonist
2      11307                      enpatoran      6.00          pIC50  Antagonist  Antagonist

Generated SQL Results:
   ligand_id                           name  affinity affinity_units        type      action
0       7198             hydroxychloroquine      5.56          pIC50  Antagonist  Antagonist
1      10435  compound 10a [PMID: 31283223]      5.09          pIC50  Antagonist  Antagonist
2      11307                      enpatoran      6.00          pIC50  Antagonist  Antagonist

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 10 ---
Natural Language Query: What antibacterial compounds are in the database?
Expected SQL: select ligand_id, name, gtmp_comments  from ligand where antibacterial is true;
Generated SQL: SELECT ligand_id, name 
FROM ligand 
WHERE antibacterial IS TRUE;

Expected SQL Results:
     ligand_id                 name gtmp_comments
0        11015      rancinamycin IA              
1         5155         caffeic acid              
2        10992  dihydroxybenzofuran              
3        12928        dirithromycin              
4         3431                 AHPN              
..         ...                  ...           ...
558      11753              ETX0462              
559      12397        azidamfenicol              
560      12772            sutezolid              
561      12921          sarecycline              
562      12923          florfenicol              

[563 rows x 3 columns]

Generated SQL Results:
     ligand_id                 name
0        11015      rancinamycin IA
1         5155         caffeic acid
2        10992  dihydroxybenzofuran
3        12928        dirithromycin
4         3431                 AHPN
..         ...                  ...
558      11753              ETX0462
559      12397        azidamfenicol
560      12772            sutezolid
561      12921          sarecycline
562      12923          florfenicol

[563 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 11 ---
Natural Language Query: Which antibodies have clinical trials data in GtoPdb?
Expected SQL: select l.ligand_id, l.name, l.approved, ct.title, ct.accession from ligand l right join ligand2clinical_trial lct2 on l.ligand_id=lct2.ligand_id left join clinical_trial ct on lct2.clinical_trial_id=ct.clinical_trial_id  where l.type = 'Antibody';
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM ligand l
JOIN ligand2clinical_trial lct ON l.ligand_id = lct.ligand_id
WHERE l.type = 'Antibody';

Expected SQL Results:
     ligand_id         name  approved                                              title    accession
0         6773  canakinumab      True  Cardiovascular Risk Reduction Study (Reduction...  NCT01327846
1         6771  bevacizumab      True  AURELIA: A Study of Avastin (Bevacizumab) Adde...  NCT00976911
2         6771  bevacizumab      True  Study of Nivolumab (BMS-936558) in Combination...  NCT01454102
3         6771  bevacizumab      True  Ipilimumab With or Without Bevacizumab in Trea...  NCT01950390
4         6771  bevacizumab      True  Efficacy and Safety Study of ABP 215 Compared ...  NCT01966003
..         ...          ...       ...                                                ...          ...
573      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT05075824
574      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT04958265
575      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT04654468
576      12790   crovalimab      True  A Phase III Study Evaluating the Efficacy and ...  NCT04434092
577      13362  tosatoxumab     False  Safety, Pharmacokinetics and Efficacy of KBSA3...  NCT01589185

[578 rows x 5 columns]

Generated SQL Results:
     ligand_id                   name
0         6591            natalizumab
1         6771            bevacizumab
2         6772    brentuximab vedotin
3         6773            canakinumab
4         6775  gemtuzumab ozogamicin
..         ...                    ...
225      13377            panobacumab
226      13379            omodenbamab
227      13396            ivonescimab
228      13402            garadacimab
229      13403            marstacimab

[230 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 12 ---
Natural Language Query: List chemical structures for SARS Cov2 MPro that have pAct > 7 and order these high to low
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, ls.isomeric_smiles, ls.isomeric_standard_inchi_key  from interaction i, ligand l, object o, ligand_structure ls where i.object_id in (select object_id from object where name ilike '%SARS-CoV-2%' or abbreviation ilike '%SARS-CoV-2%' union select object_id from synonym where synonym ilike '%SARS-CoV-2%') and i.ligand_id=l.ligand_id and i.object_id=o.object_id and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low > 7 else i.affinity_high >7  end else i.affinity_median > 7 end and l.ligand_id=ls.ligand_id order by affinity desc;
Generated SQL: SELECT 
    l.ligand_id, 
    l.name, 
    l.type, 
    o.object_id, 
    o.name, 
    i.type, 
    i.action,
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity, 
    i.affinity_units
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
JOIN 
    object o ON i.object_id = o.object_id
WHERE 
    i.object_id IN (
        SELECT object_id 
        FROM object 
        WHERE name ILIKE '%SARS-CoV-2%' 
           OR abbreviation ILIKE '%SARS-CoV-2%' 
           OR object_id IN (SELECT object_id FROM synonym WHERE synonym ILIKE '%SARS-CoV-2%')
    ) 
    AND 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low > 7 
                ELSE i.affinity_high > 7  
            END 
        ELSE i.affinity_median > 7 
    END
ORDER BY 
    affinity DESC;

Expected SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0       11503  ...  LIENCHBZNNMNKG-OJFNHCPVSA-N
1       12593  ...  PKJWLVLOGHATRZ-NWVWQQAFSA-N
2       12590  ...  BLEQBWYJEGYQCM-TXWIUQIISA-N
3       12958  ...  BNMFQWUHWYJTRI-BQFCYCMXSA-N
4       12897  ...  WGNWEPPRWQKSKI-AIEDFZFUSA-N
..        ...  ...                          ...
87      10883  ...  BSPZFJDYQHDZNR-ASPXRTSYSA-N
88      12602  ...  BPLNOSFMIIASSJ-UXHICEINSA-N
89      11903  ...  XQFMLNUPNCXPRN-UHFFFAOYSA-N
90      12227  ...  FRAUGLSYTUOOAF-FQEVSTJZSA-N
91      11630  ...  KSCRVOKQPYZBHZ-IXPOFIJOSA-N

[92 rows x 11 columns]

Generated SQL Results:
    ligand_id                          name               type  object_id  ...       type      action affinity  affinity_units
0       11503                  nirmatrelvir  Synthetic organic       3111  ...  Inhibitor  Inhibition     9.57             pKi
1       11712                    Z-AVLD-FMK            Peptide       3111  ...  Inhibitor  Inhibition     9.10           pIC50
2       12593     compound 6 [WO2022133588]  Synthetic organic       3111  ...  Inhibitor  Inhibition     9.00           pIC50
3       12590     example 18 [WO2022013684]  Synthetic organic       3111  ...  Inhibitor  Inhibition     8.81           pIC50
4       12958                   pomotrelvir  Synthetic organic       3111  ...  Inhibitor  Inhibition     8.57             pKi
..        ...                           ...                ...        ...  ...        ...         ...      ...             ...
88      12602                         WU-04  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.14           pIC50
89      12841  compound 15 [PMID: 34438124]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.14           pIC50
90      11903  compound 19 [PMID: 35142215]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.11           pIC50
91      12227            PET-UNK-29afea89-2  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.10           pIC50
92      11630  compound 2i [PMID: 23245752]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.03           pIC50

[93 rows x 9 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 13 ---
Natural Language Query: Find all immune checkpoint ligands
Expected SQL: select ligand_id, name, type from ligand where ligand_id in (select ligand_id from ligand2family lf where lf.family_id in (select family_id from family where name ilike '%immune checkpoint modulators%' and type='ligand')); 
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%immune checkpoint%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name, l.type
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
WHERE i.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id
        FROM subfamilies
        UNION
        SELECT family_id
        FROM family
        WHERE name ILIKE '%immune checkpoint%'
    )
);

Expected SQL Results:
    ligand_id                              name      type
0       10090                        cemiplimab  Antibody
1        9434             vadastuximab talirine  Antibody
2        8460                   lulizumab pegol  Antibody
3        6891                         abatacept   Peptide
4        8462                      tremelimumab  Antibody
5       11583                      retifanlimab  Antibody
6        6888                        ipilimumab  Antibody
7       12342                       sugemalimab  Antibody
8        7499                     pembrolizumab  Antibody
9       12349                      zimberelimab  Antibody
10       9606  programmed cell death 1 ligand 1   Peptide
11      12347                        penpulimab  Antibody
12       7990                      atezolizumab  Antibody
13      11518                       dostarlimab  Antibody
14       8266             inotuzumab ozogamicin  Antibody
15       6892                        belatacept   Peptide
16      11649                       feladilimab  Antibody
17       9592                      tislelizumab  Antibody
18       8735                          avelumab  Antibody
19       6775             gemtuzumab ozogamicin  Antibody
20       7985                        durvalumab  Antibody
21       9536                        relatlimab  Antibody
22       7335                         nivolumab  Antibody
23       7983                        lintuzumab  Antibody
24       7675             moxetumomab pasudotox  Antibody

Generated SQL Results:
    ligand_id                              name      type
0        8266             inotuzumab ozogamicin  Antibody
1        9606  programmed cell death 1 ligand 1   Peptide
2        8460                   lulizumab pegol  Antibody
3       12349                      zimberelimab  Antibody
4        8462                      tremelimumab  Antibody
5        7983                        lintuzumab  Antibody
6       13396                       ivonescimab  Antibody
7        5070                             LIGHT   Peptide
8       12991                       prolgolimab  Antibody
9       10117                           AUNP-12   Peptide
10       9589                     enoblituzumab  Antibody
11       7499                     pembrolizumab  Antibody
12      11583                      retifanlimab  Antibody
13      12992                         nurulimab  Antibody
14      12990                        sintilimab  Antibody
15       5077                       CD40 ligand   Peptide
16       9434             vadastuximab talirine  Antibody
17       4891     B and T lymphocyte attenuator   Peptide
18       6892                        belatacept   Peptide
19       9536                        relatlimab  Antibody
20      12989                       toripalimab  Antibody
21       6891                         abatacept   Peptide
22      10140                     spartalizumab  Antibody
23      10090                        cemiplimab  Antibody
24       6775             gemtuzumab ozogamicin  Antibody
25      11518                       dostarlimab  Antibody
26       5064               lymphotoxin-&alpha;   Peptide
27       9802                            CFZ533  Antibody
28      12361                       sabatolimab  Antibody
29      12347                        penpulimab  Antibody
30      11649                       feladilimab  Antibody
31      12966                       cadonilimab  Antibody
32      12586                      obrindatamab  Antibody
33       7335                         nivolumab  Antibody
34       7675             moxetumomab pasudotox  Antibody
35       6888                        ipilimumab  Antibody
36       9592                      tislelizumab  Antibody

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 14 ---
Natural Language Query: Which ligands have interaction data in the plasmodium asexual blood stage 
Expected SQL: select ligand_id, l.name from ligand l where l.ligand_id in (select i.ligand_id from interaction i, malaria_stage2interaction msi where msi.interaction_id=i.interaction_id and msi.malaria_stage_id in (select malaria_stage_id from malaria_stage where name ilike '%asexual blood stage%'));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN malaria_stage2interaction msi ON i.interaction_id = msi.interaction_id
JOIN malaria_stage ms ON msi.malaria_stage_id = ms.malaria_stage_id
WHERE ms.name ILIKE '%asexual blood stage%';

Expected SQL Results:
     ligand_id                           name
0         9723                      (+)-SJ733
1        10617   compound 28 [PMID: 31188540]
2        10085                        AN13762
3        10320                          Lys01
4         9971                    artefenomel
..         ...                            ...
111      11219                         DSM502
112      10418  compound 49c [PMID: 29074775]
113       5535                    chloroquine
114       9722                    tafenoquine
115      11201                      MMV030084

[116 rows x 2 columns]

Generated SQL Results:
     ligand_id                           name
0         4252                     mefloquine
1         4800                  pyrimethamine
2         5215                       luteolin
3         5535                    chloroquine
4         6391                     bortezomib
..         ...                            ...
111      11926  compound VII [WO2021149692A1]
112      11928   compound 1a [WO2021204952A1]
113      11929                         INE963
114      11933    compound 4 [WO2022008639A1]
115      11945                           JX35

[116 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 15 ---
Natural Language Query: Find NHRs that have quantitiative interaction data?
Expected SQL: select o.object_id, o.name as name from object o  where o.object_id in (select object_id from receptor2family where family_id in (WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Nuclear hormone receptors%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id)) and o.object_id in (select i.object_id from interaction i where ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')))group by o.object_id;
Generated SQL: SELECT o.object_id, o.name
FROM object o
WHERE o.object_id IN (
    SELECT DISTINCT i.object_id
    FROM interaction i
    WHERE i.object_id IN (SELECT distinct object_id FROM nhr)
    AND ((i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
         OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != ''))
);

Expected SQL Results:
    object_id                                               name
0         632                             Steroidogenic factor 1
1         596                                    Rev-Erb-&alpha;
2         607                   Constitutive androstane receptor
3         589                    Thyroid hormone receptor-&beta;
4         629                             Nerve Growth factor IB
5         593  Peroxisome proliferator-activated receptor-&al...
6         626                         Mineralocorticoid receptor
7         624                  Estrogen-related receptor-&gamma;
8         611                         Retinoid X receptor-&beta;
9         621                           Estrogen receptor-&beta;
10        627                              Progesterone receptor
11        606                                Pregnane X receptor
12        614                              Testicular receptor 4
13        599                 RAR-related orphan receptor-&beta;
14        631                   Neuron-derived orphan receptor 1
15        595  Peroxisome proliferator-activated receptor-&ga...
16        597                                     Rev-Erb-&beta;
17        623                   Estrogen-related receptor-&beta;
18        633                           Liver receptor homolog-1
19        630                         Nuclear receptor related 1
20        592                     Retinoic acid receptor-&gamma;
21        622                  Estrogen-related receptor-&alpha;
22        620                          Estrogen receptor-&alpha;
23        598                RAR-related orphan receptor-&alpha;
24        588                   Thyroid hormone receptor-&alpha;
25        628                                  Androgen receptor
26        612                        Retinoid X receptor-&gamma;
27        625                            Glucocorticoid receptor
28        605                                 Vitamin D receptor
29        602                           Liver X receptor-&alpha;
30        604                        Farnesoid X receptor-&beta;
31        636                                                SHP
32        600                RAR-related orphan receptor-&gamma;
33        603                               Farnesoid X receptor
34        591                      Retinoic acid receptor-&beta;
35        615                                                TLX
36        601                            Liver X receptor-&beta;
37        590                     Retinoic acid receptor-&alpha;
38        610                        Retinoid X receptor-&alpha;
39        594  Peroxisome proliferator-activated receptor-&be...

Generated SQL Results:
    object_id                                               name
0         592                     Retinoic acid receptor-&gamma;
1         632                             Steroidogenic factor 1
2         593  Peroxisome proliferator-activated receptor-&al...
3         596                                    Rev-Erb-&alpha;
4         630                         Nuclear receptor related 1
5         636                                                SHP
6         633                           Liver receptor homolog-1
7         594  Peroxisome proliferator-activated receptor-&be...
8         590                     Retinoic acid receptor-&alpha;
9         597                                     Rev-Erb-&beta;
10        629                             Nerve Growth factor IB
11        631                   Neuron-derived orphan receptor 1
12        624                  Estrogen-related receptor-&gamma;
13        615                                                TLX
14        612                        Retinoid X receptor-&gamma;
15        622                  Estrogen-related receptor-&alpha;
16        598                RAR-related orphan receptor-&alpha;
17        614                              Testicular receptor 4
18        611                         Retinoid X receptor-&beta;
19        610                        Retinoid X receptor-&alpha;
20        623                   Estrogen-related receptor-&beta;
21        628                                  Androgen receptor
22        599                 RAR-related orphan receptor-&beta;
23        601                            Liver X receptor-&beta;
24        604                        Farnesoid X receptor-&beta;
25        605                                 Vitamin D receptor
26        607                   Constitutive androstane receptor
27        606                                Pregnane X receptor
28        626                         Mineralocorticoid receptor
29        627                              Progesterone receptor
30        589                    Thyroid hormone receptor-&beta;
31        588                   Thyroid hormone receptor-&alpha;
32        595  Peroxisome proliferator-activated receptor-&ga...
33        625                            Glucocorticoid receptor
34        621                           Estrogen receptor-&beta;
35        620                          Estrogen receptor-&alpha;
36        600                RAR-related orphan receptor-&gamma;
37        591                      Retinoic acid receptor-&beta;
38        603                               Farnesoid X receptor
39        602                           Liver X receptor-&alpha;

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 16 ---
Natural Language Query: Which compounds act as both agonists and antagonists against GPCRs?
Expected SQL: select l.ligand_id, l.name from ligand l, interaction i where i.object_id in (select object_id from gpcr) and l.ligand_id=i.ligand_id and i.type in ('Antagonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select l.ligand_id, l.name from ligand l, interaction i where i.object_id in (select object_id from gpcr) and l.ligand_id=i.ligand_id and i.type in ('Agonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name 
FROM ligand l
JOIN interaction i1 ON l.ligand_id = i1.ligand_id
JOIN interaction i2 ON l.ligand_id = i2.ligand_id
JOIN gpcr g ON i1.object_id = g.object_id AND i2.object_id = g.object_id
WHERE i1.type = 'Agonist'
  AND i2.type = 'Antagonist';

Expected SQL Results:
     ligand_id          name
0         1628     nalmefene
1          502  phentolamine
2           14     GR 127935
3           54   sumatriptan
4        11614      LY395756
..         ...           ...
125        224     melatonin
126         49     piribedil
127         91      pindolol
128       2909      VPC12249
129          9      BMY-7378

[130 rows x 2 columns]

Generated SQL Results:
    ligand_id                                             name
0          14                                        GR 127935
1          36                                        buspirone
2          50                                       quetiapine
3          52                                        roxindole
4          56                                        terguride
5          91                                         pindolol
6         115                                            TFMPP
7         134                                     methysergide
8         239                          [<sup>3</sup>H]RS 57639
9         459                                      MRE 3008F20
10        502                                     phentolamine
11        531                      [<sup>3</sup>H](-)CGP 12177
12        532                                        CGP 12177
13        641  [Leu<sup>8</sup>,des-Arg<sup>9</sup>]bradykinin
14        974                                          FAUC213
15       1026                                       spinorphin
16       1229                                       burimamide
17       1252                                      impentamine
18       1255                                         proxyfan
19       1399                          [<sup>3</sup>H]LY341495
20       1529                                         GR231118
21       1711                                          2MeSATP
22       1713                                              ATP
23       1921                                         ONO-8713
24       2013                                           KE 108
25       2018                                      pasireotide
26       2036                                        BIM 23056
27       2272                                        PG 99-465
28       2916                 dioctanoylglycerol pyrophosphate
29       3381                                         BAYu9773
30       3907           R3(B&Delta;23-27)R/I5 chimeric peptide
31       3932                                         L-748337
32       5387                          [<sup>3</sup>H]CGP12177
33       6155                                        CP-195543
34       6905          [Sar<sup>1</sup>,Ile<sup>8</sup>]Ang-II
35       7346                                          MK-0249

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 17 ---
Natural Language Query: Which channel blockers act against Ryanodine receptors?
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%Ryanodine%')) union select object_id from object where name ilike '%Ryanodine%') and l.ligand_id=i.ligand_id and i.type in ('Channel blocker');
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (SELECT family_id FROM family WHERE name ILIKE '%Ryanodine receptors%')
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name, i.type, i.action
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id
        FROM subfamilies
        UNION
        SELECT family_id
        FROM family
        WHERE name ILIKE '%Ryanodine receptors%'
    )
)
AND i.type = 'Channel blocker';

Expected SQL Results:
   ligand_id           name affinity affinity_units             type action
0       4291       procaine     None              -  Channel blocker   None
1       4303      ryanodine     None              -  Channel blocker   None
2       2432  ruthenium red     None              -  Channel blocker   None
3       2432  ruthenium red     None              -  Channel blocker   None
4       4291       procaine     None              -  Channel blocker   None
5       4303      ryanodine     None              -  Channel blocker   None
6       2432  ruthenium red     None              -  Channel blocker   None

Generated SQL Results:
   ligand_id           name             type action
0       4291       procaine  Channel blocker   None
1       4303      ryanodine  Channel blocker   None
2       2432  ruthenium red  Channel blocker   None

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 18 ---
Natural Language Query: Find pKi value, above 6, for Ion Channel approved drugs
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from interaction i, ligand l, object o where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike 'Ion channels') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike 'Ion channels')))) and i.ligand_id=l.ligand_id and i.object_id=o.object_id and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low > 6 else i.affinity_high >6  end else i.affinity_median > 6  end and i.affinity_units = 'pKi' and l.approved is true order by affinity desc;
Generated SQL: SELECT 
    i.ligand_id, 
    l.name, 
    i.affinity_units, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS pKi_value 
FROM 
    interaction i 
JOIN 
    ligand l ON i.ligand_id = l.ligand_id 
WHERE 
    i.object_id IN (
        SELECT 
            object_id 
        FROM 
            receptor2family 
        WHERE 
            family_id IN (
                WITH RECURSIVE subfamilies AS (
                    SELECT 
                        group_id, 
                        family_id 
                    FROM 
                        grouping 
                    WHERE 
                        group_id IN (
                            SELECT 
                                family_id 
                            FROM 
                                family 
                            WHERE 
                                name ILIKE '%Ion Channel%'
                        )
                    UNION 
                    SELECT 
                        e.group_id, 
                        e.family_id 
                    FROM 
                        grouping e 
                    INNER JOIN 
                        subfamilies s ON s.family_id = e.group_id
                ) 
                SELECT 
                    family_id 
                FROM 
                    subfamilies 
                UNION 
                SELECT 
                    family_id 
                FROM 
                    family 
                WHERE 
                    family_id IN (
                        SELECT 
                            family_id 
                        FROM 
                            family 
                        WHERE 
                            name ILIKE '%Ion Channel%'
                    )
            )
    )
    AND l.approved = true 
    AND i.affinity_units = 'pKi' 
    AND (
        i.affinity_median > 6 OR 
        i.affinity_high > 6 OR 
        (i.affinity_median IS NULL AND i.affinity_high IS NULL AND i.affinity_low > 6)
    );

Expected SQL Results:
    ligand_id            name               type  ...           action affinity affinity_units
0        7486    palonosetron  Synthetic organic  ...       Antagonist    10.49            pKi
1        5459     varenicline  Synthetic organic  ...          Agonist    10.40            pKi
2        5459     varenicline  Synthetic organic  ...          Agonist     9.96            pKi
3        2296       alosetron  Synthetic organic  ...       Antagonist     9.50            pKi
4        7313       triazolam  Synthetic organic  ...         Positive     9.23            pKi
5        4192      flumazenil  Synthetic organic  ...             None     9.22            pKi
6        4192      flumazenil  Synthetic organic  ...       Antagonist     9.10            pKi
7        7313       triazolam  Synthetic organic  ...         Positive     9.10            pKi
8        4192      flumazenil  Synthetic organic  ...             None     9.05            pKi
9        4192      flumazenil  Synthetic organic  ...             None     8.98            pKi
10       6963      clonazepam  Synthetic organic  ...         Positive     8.90            pKi
11       7313       triazolam  Synthetic organic  ...         Positive     8.84            pKi
12       7313       triazolam  Synthetic organic  ...         Positive     8.81            pKi
13       2300     granisetron  Synthetic organic  ...       Antagonist     8.80            pKi
14        260     tropisetron  Synthetic organic  ...       Antagonist     8.80            pKi
15       6963      clonazepam  Synthetic organic  ...         Positive     8.77            pKi
16       6963      clonazepam  Synthetic organic  ...         Positive     8.70            pKi
17       2585        nicotine  Synthetic organic  ...          Agonist     8.66            pKi
18       2285       azasetron  Synthetic organic  ...       Antagonist     8.50            pKi
19       7351    vortioxetine  Synthetic organic  ...       Antagonist     8.43            pKi
20       2285       azasetron  Synthetic organic  ...       Antagonist     8.40            pKi
21       4190      felodipine  Synthetic organic  ...     Potentiation     8.40            pKi
22       2290     ondansetron  Synthetic organic  ...       Antagonist     8.30            pKi
23       4193   flunitrazepam  Synthetic organic  ...         Positive     8.28            pKi
24       4193   flunitrazepam  Synthetic organic  ...         Positive     8.28            pKi
25       4193   flunitrazepam  Synthetic organic  ...         Positive     8.26            pKi
26       2604      dofetilide  Synthetic organic  ...       Inhibition     8.19            pKi
27       4193   flunitrazepam  Synthetic organic  ...         Positive     7.80            pKi
28       2290     ondansetron  Synthetic organic  ...       Antagonist     7.80            pKi
29       3364        diazepam  Synthetic organic  ...         Positive     7.79            pKi
30       3364        diazepam  Synthetic organic  ...         Positive     7.77            pKi
31       3364        diazepam  Synthetic organic  ...         Positive     7.77            pKi
32       4348        zolpidem  Synthetic organic  ...         Positive     7.68            pKi
33       5459     varenicline  Synthetic organic  ...          Agonist     7.40            pKi
34       2294    tubocurarine    Natural product  ...       Antagonist     7.10            pKi
35       4192      flumazenil  Synthetic organic  ...         Positive     7.03            pKi
36       4192      flumazenil  Synthetic organic  ...  Partial agonist     6.83            pKi
37        241  metoclopramide  Synthetic organic  ...       Antagonist     6.45            pKi
38       4253       memantine  Synthetic organic  ...       Antagonist     6.15            pKi
39       4348        zolpidem  Synthetic organic  ...         Positive     6.12            pKi

[40 rows x 9 columns]

Generated SQL Results:
    ligand_id            name affinity_units  pki_value
0        2290     ondansetron            pKi       7.80
1         241  metoclopramide            pKi       6.45
2        7313       triazolam            pKi       8.84
3        7313       triazolam            pKi       9.10
4        7313       triazolam            pKi       9.23
5        7313       triazolam            pKi       8.81
6        4348        zolpidem            pKi       6.12
7        5459     varenicline            pKi      10.40
8        2585        nicotine            pKi       8.66
9        5459     varenicline            pKi       7.40
10       4253       memantine            pKi       6.15
11       2285       azasetron            pKi       8.40
12       4190      felodipine            pKi       8.40
13       2294    tubocurarine            pKi       7.10
14       2290     ondansetron            pKi       8.30
15       2296       alosetron            pKi       9.50
16       2285       azasetron            pKi       8.50
17       2300     granisetron            pKi       8.80
18       2604      dofetilide            pKi       8.19
19       4193   flunitrazepam            pKi       7.80
20       4192      flumazenil            pKi       8.98
21       3364        diazepam            pKi       7.77
22       4193   flunitrazepam            pKi       8.28
23       6963      clonazepam            pKi       8.70
24       3364        diazepam            pKi       7.77
25       4193   flunitrazepam            pKi       8.26
26       4193   flunitrazepam            pKi       8.28
27       3364        diazepam            pKi       7.79
28       6963      clonazepam            pKi       8.77
29        260     tropisetron            pKi       8.80
30       7486    palonosetron            pKi      10.49
31       7351    vortioxetine            pKi       8.43
32       4192      flumazenil            pKi       6.83
33       5459     varenicline            pKi       9.96
34       4192      flumazenil            pKi       7.03
35       6963      clonazepam            pKi       8.90
36       4348        zolpidem            pKi       7.68
37       4192      flumazenil            pKi       9.10
38       4192      flumazenil            pKi       9.05
39       4192      flumazenil            pKi       9.22

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 19 ---
Natural Language Query: Find drugs for which calcitonin receptors are a primary target?
Expected SQL: select l.ligand_id, l.name, l.type, i.type, i.action, i.primary_target, i.object_id, o.name from interaction i, ligand l, object o where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%calcitonin receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%calcitonin receptor%')))) and i.primary_target is true and i.ligand_id=l.ligand_id and i.object_id=o.object_id;
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id
    FROM object
    WHERE object_id IN (
        SELECT object_id
        FROM receptor2family
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id
                FROM grouping
                WHERE group_id IN (SELECT family_id FROM family WHERE name ILIKE '%calcitonin%')
                UNION
                SELECT e.group_id, e.family_id
                FROM grouping e
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            )
            SELECT family_id FROM subfamilies
            UNION
            SELECT family_id FROM family WHERE name ILIKE '%calcitonin%'
        )
    )
)
AND i.primary_target IS TRUE;

Expected SQL Results:
   ligand_id                 name               type        type        action  primary_target  object_id           name
0        685           calcitonin            Peptide     Agonist  Full agonist            True         43    CT receptor
1       9250             erenumab           Antibody    Antibody    Antagonist            True         48  CGRP receptor
2       6973  calcitonin (salmon)            Peptide     Agonist  Full agonist            True         43    CT receptor
3      10704           rimegepant  Synthetic organic  Antagonist    Antagonist            True         48  CGRP receptor

Generated SQL Results:
   ligand_id                 name
0       6973  calcitonin (salmon)
1        685           calcitonin
2      10704           rimegepant
3       9250             erenumab

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 20 ---
Natural Language Query: Which compounds, that also have ChEMBL Ligand IDs, target dopamine receptors?
Expected SQL: select distinct l.ligand_id, l.name, ldl.placeholder, l.type from interaction i, ligand l, ligand_database_link ldl where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%dopamine receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%dopamine receptor%')))) and i.ligand_id=ldl.ligand_id and i.ligand_id=l.ligand_id and ldl.database_id=33;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%Dopamine receptors%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name, l.pubchem_sid, ldl.placeholder AS chembl_ligand_id
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN ligand_database_link ldl ON l.ligand_id = ldl.ligand_id
WHERE i.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id
        FROM subfamilies
        UNION
        SELECT family_id
        FROM family
        WHERE family_id IN (
            SELECT family_id
            FROM family
            WHERE name ILIKE '%Dopamine receptors%'
        )
    )
)
AND ldl.database_id IN (
    SELECT database_id
    FROM database
    WHERE name ILIKE '%ChEMBL%'
);

Expected SQL Results:
     ligand_id                     name    placeholder               type
0         9072              cinnarizine    CHEMBL43064  Synthetic organic
1         5501                sulpiride       CHEMBL26  Synthetic organic
2         8369                  MLS1547  CHEMBL1606583  Synthetic organic
3         3304                 ecopipam   CHEMBL298406  Synthetic organic
4           88               ketanserin       CHEMBL51  Synthetic organic
..         ...                      ...            ...                ...
124        241           metoclopramide       CHEMBL86  Synthetic organic
125       9099             lumateperone  CHEMBL3545045  Synthetic organic
126        205                 loxapine      CHEMBL831  Synthetic organic
127       3298  [<sup>3</sup>H]PD128907    CHEMBL97424  Synthetic organic
128         96              risperidone       CHEMBL85  Synthetic organic

[129 rows x 4 columns]

Generated SQL Results:
     ligand_id         name  pubchem_sid chembl_ligand_id
0         3304     ecopipam  178100341.0     CHEMBL298406
1           87  iloperidone  135650377.0      CHEMBL14376
2           96  risperidone  135650903.0         CHEMBL85
3           99    spiperone  135651064.0     CHEMBL267930
4         8441     A-381393  252166651.0     CHEMBL127257
..         ...          ...          ...              ...
124        936    SKF-75670  135651049.0    CHEMBL1193571
125       7625       BP 897  223365960.0      CHEMBL25236
126        974      FAUC213  135650253.0     CHEMBL310843
127        941   rotigotine  135650929.0       CHEMBL1303
128        103     zotepine  135651367.0     CHEMBL285802

[129 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 21 ---
Natural Language Query: Are there any approved drugs with unclear bioactivity or molecular mechanisms of action?
Expected SQL: select distinct l.ligand_id, l.name, l.approved, l.comments, l.bioactivity_comments, l.mechanism_of_action, l.clinical_use from ligand l where l.approved is true and ((l.mechanism_of_action is null or l.mechanism_of_action = '') AND (l.bioactivity_comments  is null or l.bioactivity_comments = ''));
Generated SQL: SELECT l.ligand_id, l.name, l.approved, l.bioactivity_comments, l.mechanism_of_action
FROM ligand l
WHERE l.approved IS TRUE
AND (l.bioactivity_comments IS NULL OR l.bioactivity_comments = '')
AND (l.mechanism_of_action IS NULL OR l.mechanism_of_action = '');

Expected SQL Results:
     ligand_id           name  ...  mechanism_of_action                                       clinical_use
0        11332    regdanvimab  ...                       Regdanvimab (CT-P59) was progressed to clinica...
1        12681     amprenavir  ...                       Amprenavir was approved to treat HIV-1 infecti...
2        10769      sulbactam  ...                       Ampicillin/sulbactam (Unasyn) and cefoperazone...
3         9074  echothiophate  ...                       Used as an ophthalmic agent to reduce intraocu...
4        11189    dalpiciclib  ...                       As of August 2020, there were 20 cancer clinic...
..         ...            ...  ...                  ...                                                ...
216       8681   volanesorsen  ...                       Phase 3 clinical trials <a href="https://clini...
217      12928  dirithromycin  ...                                                                        
218      13084   narlumosbart  ...                       Narlumosbart (JMT103) was advanced as a clinic...
219      12345      pamiparib  ...                       Pamiparib was issued its first approval for cl...
220      10815   fusidic acid  ...                       Fusidic acid is approved by a number of countr...

[221 rows x 7 columns]

Generated SQL Results:
     ligand_id              name  approved bioactivity_comments mechanism_of_action
0        12681        amprenavir      True                                         
1        12235       upacicalcet      True                                         
2         1596          acipimox      True                                         
3        12928     dirithromycin      True                                         
4         9533               SNP      True                                         
..         ...               ...       ...                  ...                 ...
216      11169        carbetocin      True                                         
217      10772          cefepime      True                                         
218      10891         aviptadil      True                                         
219      11241      terlipressin      True                                         
220      11829  levoketoconazole      True                                         

[221 rows x 5 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 22 ---
Natural Language Query: What potassium channels does GtoPdb have data on?
Expected SQL: select o.object_id, o.name as name, string_agg(f.name, ' | ') as family from object o left join receptor2family rf on o.object_id=rf.object_id left join family f on rf.family_id=f.family_id where o.object_id in (select object_id from receptor2family where family_id in (WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Potassium channels%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id)) group by o.object_id, f.family_id;
Generated SQL: SELECT o.object_id, o.name 
FROM object o 
WHERE o.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        WITH RECURSIVE subfamilies AS (
            SELECT group_id, family_id 
            FROM grouping 
            WHERE group_id IN (
                SELECT family_id 
                FROM family 
                WHERE name ILIKE '%potassium channels%'
            )
            UNION 
            SELECT e.group_id, e.family_id 
            FROM grouping e 
            INNER JOIN subfamilies s ON s.family_id = e.group_id
        ) 
        SELECT family_id 
        FROM subfamilies 
    )
);

Expected SQL Results:
    object_id               name                                             family
0         380  K<sub>Ca</sub>1.1  Calcium- and sodium-activated potassium channe...
1         381  K<sub>Ca</sub>2.1  Calcium- and sodium-activated potassium channe...
2         382  K<sub>Ca</sub>2.2  Calcium- and sodium-activated potassium channe...
3         383  K<sub>Ca</sub>2.3  Calcium- and sodium-activated potassium channe...
4         384  K<sub>Ca</sub>3.1  Calcium- and sodium-activated potassium channe...
..        ...                ...                                                ...
73        573  K<SUB>v</SUB>11.2   Voltage-gated potassium channels (K<sub>v</sub>)
74        574  K<SUB>v</SUB>11.3   Voltage-gated potassium channels (K<sub>v</sub>)
75        575  K<SUB>v</SUB>12.1   Voltage-gated potassium channels (K<sub>v</sub>)
76        576  K<SUB>v</SUB>12.2   Voltage-gated potassium channels (K<sub>v</sub>)
77        577  K<SUB>v</SUB>12.3   Voltage-gated potassium channels (K<sub>v</sub>)

[78 rows x 3 columns]

Generated SQL Results:
    object_id               name
0         572  K<SUB>v</SUB>11.1
1         557   K<SUB>v</SUB>6.2
2         553   K<SUB>v</SUB>4.2
3         440  K<sub>ir</sub>5.1
4         443  K<sub>ir</sub>7.1
..        ...                ...
73        561   K<SUB>v</SUB>7.2
74        563   K<SUB>v</SUB>7.4
75        429  K<sub>ir</sub>1.1
76        380  K<sub>Ca</sub>1.1
77        384  K<sub>Ca</sub>3.1

[78 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 23 ---
Natural Language Query: What primary references are used to curate Somatostatin receptor agonist?
Expected SQL: select distinct ref.reference_id, ref.article_title, ref.authors, ref.title, ref.pubmed_id  from reference ref, interaction_affinity_refs iar where ref.reference_id=iar.reference_id and iar.interaction_id in (select i.interaction_id from interaction i where i.object_id in (select object_id from receptor2family where family_id in((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Somatostatin receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%Somatostatin receptor%')))  and i.type='Agonist' );
Generated SQL: SELECT ref.reference_id, ref.article_title, ref.authors, ref.title, ref.pubmed_id 
FROM reference ref
JOIN interaction_affinity_refs iar ON ref.reference_id = iar.reference_id
WHERE iar.interaction_id IN (
    SELECT interaction_id 
    FROM interaction 
    WHERE ligand_id IN (
        SELECT ligand_id 
        FROM interaction 
        WHERE type = 'Agonist' 
        AND object_id IN (
            SELECT object_id 
            FROM receptor2family 
            WHERE family_id IN (
                SELECT family_id 
                FROM family 
                WHERE name ILIKE '%Somatostatin receptor%'
            )
        )
    )
);

Expected SQL Results:
    reference_id                                      article_title  ...                                title   pubmed_id
0           6714  Nonpeptide somatostatin agonists with sst4 sel...  ...                           J Med Chem   9822540.0
1          18666  Are radiogallium-labelled DOTA-conjugated soma...  ...           Eur J Nucl Med Mol Imaging  17225119.0
2           6729  Characterization of cloned human somatostatin ...  ...                        Mol Pharmacol   8078491.0
3          18776  Differences in the operational characteristics...  ...                       Br J Pharmacol   8646408.0
4           6715  Beta(2)/beta(3)-di- and alpha/beta(3)-tetrapep...  ...  Naunyn Schmiedebergs Arch Pharmacol  12595949.0
5           6710  Cloning and characterization of a fourth human...  ...               Proc Natl Acad Sci USA   8483934.0
6           6692  DOTA-NOC, a high-affinity ligand of somatostat...  ...           Eur J Nucl Med Mol Imaging  12937948.0
7           6649  The elucidation of somatostatin receptor funct...  ...        Rev Physiol Biochem Pharmacol   9600011.0
8          18593  Ligand-dependent mechanisms of sst2A receptor ...  ...                       Mol Endocrinol  21493671.0
9           6704  Cloning, expression and pharmacological charac...  ...                    Neuropharmacology  10818261.0
10         18672  New pansomatostatin ligands and their chelated...  ...                      Clin Cancer Res  18381940.0
11         18667  One-step ¹⁸F-labeling of carbohydrate-conjugat...  ...                       Bioconjug Chem  21082773.0
12         18674  High affinity binding sites for somatostatin t...  ...           Biochem Biophys Res Commun   6125148.0
13          6650  Differential expression of multiple somatostat...  ...                          J Neurochem   9166718.0
14         18669  [(99m)Tc]Demotate 2 in the detection of sst(2)...  ...           Eur J Nucl Med Mol Imaging  16568203.0
15          6716  Novel sst(4)-selective somatostatin (SRIF) ago...  ...                           J Med Chem  14667212.0
16          6683  Somatostatin receptor subtype specificity in h...  ...                        J Clin Invest   9045884.0
17          6647  [125I]Tyr10-cortistatin14 labels all five soma...  ...  Naunyn Schmiedebergs Arch Pharmacol   9650799.0
18          6646  Binding properties of somatostatin receptor su...  ...                       Metab Clin Exp   8769372.0
19          6653  Somatostatin receptor 1 selective analogues: 2...  ...                           J Med Chem  15658864.0
20         18662  NODAGATOC, a new chelator-coupled somatostatin...  ...                       Bioconjug Chem  12009943.0
21          6648  Characterisation of human recombinant somatost...  ...  Naunyn Schmiedebergs Arch Pharmacol  10598788.0
22         18668  Radiolabeled bicyclic somatostatin-based analo...  ...                           J Nucl Med  20956465.0
23          6703  SST3-selective potent peptidic somatostatin re...  ...               Proc Natl Acad Sci USA  11095748.0
24          6656  Functional activity of the multiligand analog ...  ...                   Neuroendocrinology  15477717.0
25          6651  Superagonism at the human somatostatin recepto...  ...                 J Pharmacol Exp Ther  15333679.0
26          6645  Cloned somatostatin receptors: identification ...  ...                        Mol Pharmacol   8100350.0
27          6644  Rapid identification of subtype-selective agon...  ...                              Science   9784130.0
28         18594  Receptor signaling and endocytosis are differe...  ...                        Mol Pharmacol  15855408.0
29          6652  Somatostatin receptor 1 selective analogues: 3...  ...                           J Med Chem  15658865.0
30          6658  Synthesis and biological activities of potent ...  ...               Proc Natl Acad Sci USA   9724791.0
31         18665  Comparison of radioiodinated TOC, TOCA and Mtr...  ...           Eur J Nucl Med Mol Imaging  11807604.0
32         18671  Affinity profiles for human somatostatin recep...  ...                       Eur J Nucl Med  10774879.0
33          6655  Subtype selectivity of peptide analogs for all...  ...                        Endocrinology   7988476.0
34         36292  Novel long-acting somatostatin analog with end...  ...                        Endocrinology  11145612.0
35          6657  Identification of potent non-peptide somatosta...  ...                           J Med Chem  11520208.0
36         18775  A quantitative autoradiographical study on the...  ...                    Neuropharmacology   9121614.0
37         18673  High affinity binding sites for a somatostatin...  ...                             Life Sci   6114372.0
38         18678  New specific radioligand for one subpopulation...  ...                             Life Sci   2859510.0
39          6691  Preclinical evaluation of new and highly poten...  ...                      Clin Cancer Res  15709181.0
40          6690  [125I][Tyr3]octreotide labels human somatostat...  ...                      Eur J Pharmacol   9652348.0
41          6654  A new peptidic somatostatin agonist with high ...  ...                      Eur J Pharmacol  12450568.0
42         47119  Somatostatin receptor type 5 agonist for the t...  ...                                 None         NaN
43          6659  Molecular and functional properties of somatos...  ...                       Metab Clin Exp   8769370.0
44          6696  A human somatostatin receptor (SSTR3), located...  ...                            FEBS Lett   8097479.0
45         18592  Agonist-biased signaling at the sst2A receptor...  ...                       Mol Endocrinol  19910453.0

[46 rows x 5 columns]

Generated SQL Results:
     reference_id                                      article_title  ...                                title   pubmed_id
0            6692  DOTA-NOC, a high-affinity ligand of somatostat...  ...           Eur J Nucl Med Mol Imaging  12937948.0
1            6647  [125I]Tyr10-cortistatin14 labels all five soma...  ...  Naunyn Schmiedebergs Arch Pharmacol   9650799.0
2            6648  Characterisation of human recombinant somatost...  ...  Naunyn Schmiedebergs Arch Pharmacol  10598788.0
3            6692  DOTA-NOC, a high-affinity ligand of somatostat...  ...           Eur J Nucl Med Mol Imaging  12937948.0
4            6649  The elucidation of somatostatin receptor funct...  ...        Rev Physiol Biochem Pharmacol   9600011.0
..            ...                                                ...  ...                                  ...         ...
498          6648  Characterisation of human recombinant somatost...  ...  Naunyn Schmiedebergs Arch Pharmacol  10598788.0
499          6647  [125I]Tyr10-cortistatin14 labels all five soma...  ...  Naunyn Schmiedebergs Arch Pharmacol   9650799.0
500          6648  Characterisation of human recombinant somatost...  ...  Naunyn Schmiedebergs Arch Pharmacol  10598788.0
501          6651  Superagonism at the human somatostatin recepto...  ...                 J Pharmacol Exp Ther  15333679.0
502         18667  One-step ¹⁸F-labeling of carbohydrate-conjugat...  ...                       Bioconjug Chem  21082773.0

[503 rows x 5 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 24 ---
Natural Language Query: What are the SMILES and InChI Keys for compounds that interact with Nicotinic acetylcholine receptors (nACh)
Expected SQL: select l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi_key  from ligand l left join ligand_structure ls on l.ligand_id=ls.ligand_id where l.ligand_id in (select i.ligand_id from interaction i where i.object_id in (select object_id from receptor2family where family_id in((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Nicotinic acetylcholine receptors%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%Nicotinic acetylcholine receptors%'))));
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Nicotinic acetylcholine receptors%'
    )
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi_key 
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies 
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (
            SELECT family_id 
            FROM family 
            WHERE name ILIKE '%Nicotinic acetylcholine receptors%'
        )
    )
);

Expected SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0        4005  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
1        3999  ...                         None
2        4011  ...  FIRBQKFGNFGBRC-NLBWWLDMSA-N
3        3975  ...                         None
4        3980  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
..        ...  ...                          ...
58      10700  ...  PYSCVJMLJRHJGJ-UHFFFAOYSA-N
59      11385  ...  KXAAIPFSUGPVMQ-GXDHUFHOSA-N
60      11384  ...  RPYWXZCFYPVCNQ-RVDMUPIBSA-N
61      10693  ...  LWWDCTBUJUEFDE-CRAIPNDOSA-N
62      11383  ...  VSOWCIMCDKXVRC-UHFFFAOYSA-N

[63 rows x 4 columns]

Generated SQL Results:
     ligand_id                          name                                isomeric_smiles  isomeric_standard_inchi_key
0         3979       [<sup>3</sup>H]cytisine  c1([3H])cc([3H])c(=O)n2c1[C@H]1CNC[C@H](C1)C2  ANJTVLIZGCUXLD-ZIAKYUPESA-N
1         3979       [<sup>3</sup>H]cytisine  c1([3H])cc([3H])c(=O)n2c1[C@H]1CNC[C@H](C1)C2  ANJTVLIZGCUXLD-ZIAKYUPESA-N
2         3976  [<sup>125</sup>I]epibatidine                        Clc1ccc(cn1)C1CC2NC1CC2  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
3         3977    [<sup>3</sup>H]epibatidine                        Clc1ccc(cn1)C1CC2NC1CC2  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
4         3977    [<sup>3</sup>H]epibatidine                        Clc1ccc(cn1)C1CC2NC1CC2  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
..         ...                           ...                                            ...                          ...
109       3994                   rivanicline                              CNCC/C=C/c1cccnc1  JUOSGGQXEBBCJB-GORDUTHDSA-N
110       3994                   rivanicline                              CNCC/C=C/c1cccnc1  JUOSGGQXEBBCJB-GORDUTHDSA-N
111       9056                     CP-601927          FC(c1ccc2c(c1)[C@H]1CNC[C@@H]2C1)(F)F  RNOBTWYQAWEZHH-JGVFFNPUSA-N
112       3990                  mecamylamine                         CNC1(C)C2CCC(C1(C)C)C2  IMYZQPCYWPFTAG-UHFFFAOYSA-N
113       3963                 hexamethonium                   C[N+](CCCCCC[N+](C)(C)C)(C)C  VZJFGSRCJCXDSG-UHFFFAOYSA-N

[114 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 25 ---
Natural Language Query: What ligands and structures have a pKi values > 8 when interacting with transporter targets?
Expected SQL: select l.ligand_id, l.name, l.type, ls.isomeric_smiles, ls.isomeric_standard_inchi_key, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from ligand l, interaction i join ligand_structure ls on i.ligand_id=ls.ligand_id where i.object_id in (select object_id from transporter) and i.ligand_id=l.ligand_id  and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low >= 8 else i.affinity_high >= 8  end else i.affinity_median >= 8 end and i.affinity_units = 'pKi' order by affinity desc;
Generated SQL: SELECT l.ligand_id, l.name, l.type, ls.isomeric_smiles, ls.isomeric_standard_inchi_key, i.type, i.action, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity, 
    i.affinity_units 
FROM ligand l 
JOIN interaction i ON l.ligand_id = i.ligand_id 
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id 
WHERE i.affinity_units = 'pKi' 
  AND CASE 
          WHEN i.affinity_median IS NULL THEN 
              CASE 
                  WHEN i.affinity_high IS NULL THEN i.affinity_low 
                  ELSE i.affinity_high 
              END 
          ELSE i.affinity_median 
      END > 8 
  AND i.object_id IN (SELECT object_id FROM transporter);

Expected SQL Results:
    ligand_id                                           name               type  ...      action affinity affinity_units
0        4768                            aminobenzovesamicol  Synthetic organic  ...  Inhibition    10.90            pKi
1        4512       nitrobenzylmercaptopurine ribonucleoside  Synthetic organic  ...  Inhibition     9.70            pKi
2        2398                                   clomipramine  Synthetic organic  ...  Inhibition     9.68            pKi
3        4590                                     draflazine  Synthetic organic  ...  Inhibition     9.60            pKi
4        4790                                     paroxetine  Synthetic organic  ...  Inhibition     9.60            pKi
5        4734                                        KF24345  Synthetic organic  ...  Inhibition     9.40            pKi
6        4513                                         NBTGR   Synthetic organic  ...  Inhibition     9.30            pKi
7        4798                                     sertraline  Synthetic organic  ...  Inhibition     9.10            pKi
8       10064                            GlyT1 inhibitor 27a  Synthetic organic  ...  Inhibition     9.10            pKi
9        9983                                     vanoxerine  Synthetic organic  ...  Inhibition     9.00            pKi
10       4717                                        dilazep  Synthetic organic  ...  Inhibition     9.00            pKi
11       4797                                       mazindol  Synthetic organic  ...  Inhibition     8.90            pKi
12       4807                                   dipyridamole  Synthetic organic  ...  Inhibition     8.80            pKi
13       7351                                   vortioxetine  Synthetic organic  ...  Inhibition     8.80            pKi
14       4759                                      vesamicol  Synthetic organic  ...  Inhibition     8.70            pKi
15       2399                                    desipramine  Synthetic organic  ...  Inhibition     8.68            pKi
16        203                                     fluoxetine  Synthetic organic  ...  Inhibition     8.50            pKi
17      10605                                        AZD3965  Synthetic organic  ...  Inhibition     8.49            pKi
18       4637                                     nisoxetine  Synthetic organic  ...  Inhibition     8.40            pKi
19       7547                                     citalopram  Synthetic organic  ...  Inhibition     8.36            pKi
20       9880                                            H05  Synthetic organic  ...  Inhibition     8.32            pKi
21       8813                   compound 30 [PMID: 16455256]  Synthetic organic  ...  Inhibition     8.32            pKi
22      10405                                       BAY-8002  Synthetic organic  ...        None     8.30            pKi
23        202                                     duloxetine  Synthetic organic  ...  Inhibition     8.30            pKi
24       7551                                    lofepramine  Synthetic organic  ...  Inhibition     8.27            pKi
25        202                                     duloxetine  Synthetic organic  ...  Inhibition     8.22            pKi
26       2404                                  nortriptyline  Synthetic organic  ...  Inhibition     8.20            pKi
27       7189                                    fluvoxamine  Synthetic organic  ...  Inhibition     8.19            pKi
28       9880                                            H05  Synthetic organic  ...  Inhibition     8.17            pKi
29       7285                                  protriptyline  Synthetic organic  ...  Inhibition     8.17            pKi
30       2404                                  nortriptyline  Synthetic organic  ...  Inhibition     8.16            pKi
31       4792                                    nomifensine  Synthetic organic  ...  Inhibition     8.10            pKi
32       7549                                      dosulepin  Synthetic organic  ...  Inhibition     8.07            pKi
33       4494                                hemicholinium-3  Synthetic organic  ...  Inhibition     8.00            pKi
34       4808                                     reboxetine  Synthetic organic  ...  Inhibition     8.00            pKi
35       4499  Lys[Z(NO<sub>2</sub>)]-Lys[Z(NO<sub>2</sub>)]  Synthetic organic  ...  Inhibition     8.00            pKi
36       4797                                       mazindol  Synthetic organic  ...  Inhibition     8.00            pKi

[37 rows x 9 columns]

Generated SQL Results:
    ligand_id                                      name               type  ...      action affinity affinity_units
0        7189                               fluvoxamine  Synthetic organic  ...  Inhibition     8.19            pKi
1         202                                duloxetine  Synthetic organic  ...  Inhibition     8.22            pKi
2         202                                duloxetine  Synthetic organic  ...  Inhibition     8.30            pKi
3        7551                               lofepramine  Synthetic organic  ...  Inhibition     8.27            pKi
4        8813              compound 30 [PMID: 16455256]  Synthetic organic  ...  Inhibition     8.32            pKi
5        9880                                       H05  Synthetic organic  ...  Inhibition     8.32            pKi
6        9880                                       H05  Synthetic organic  ...  Inhibition     8.17            pKi
7        9983                                vanoxerine  Synthetic organic  ...  Inhibition     9.00            pKi
8       10405                                  BAY-8002  Synthetic organic  ...        None     8.30            pKi
9       10605                                   AZD3965  Synthetic organic  ...  Inhibition     8.49            pKi
10      10064                       GlyT1 inhibitor 27a  Synthetic organic  ...  Inhibition     9.10            pKi
11       4759                                 vesamicol  Synthetic organic  ...  Inhibition     8.70            pKi
12       4768                       aminobenzovesamicol  Synthetic organic  ...  Inhibition    10.90            pKi
13       4734                                   KF24345  Synthetic organic  ...  Inhibition     9.40            pKi
14        203                                fluoxetine  Synthetic organic  ...  Inhibition     8.50            pKi
15       4790                                paroxetine  Synthetic organic  ...  Inhibition     9.60            pKi
16       4717                                   dilazep  Synthetic organic  ...  Inhibition     9.00            pKi
17       4797                                  mazindol  Synthetic organic  ...  Inhibition     8.90            pKi
18       4637                                nisoxetine  Synthetic organic  ...  Inhibition     8.40            pKi
19       4792                               nomifensine  Synthetic organic  ...  Inhibition     8.10            pKi
20       4807                              dipyridamole  Synthetic organic  ...  Inhibition     8.80            pKi
21       4590                                draflazine  Synthetic organic  ...  Inhibition     9.60            pKi
22       4513                                    NBTGR   Synthetic organic  ...  Inhibition     9.30            pKi
23       4512  nitrobenzylmercaptopurine ribonucleoside  Synthetic organic  ...  Inhibition     9.70            pKi
24       4798                                sertraline  Synthetic organic  ...  Inhibition     9.10            pKi
25       2398                              clomipramine  Synthetic organic  ...  Inhibition     9.68            pKi
26       2399                               desipramine  Synthetic organic  ...  Inhibition     8.68            pKi
27       2404                             nortriptyline  Synthetic organic  ...  Inhibition     8.20            pKi
28       2404                             nortriptyline  Synthetic organic  ...  Inhibition     8.16            pKi
29       7285                             protriptyline  Synthetic organic  ...  Inhibition     8.17            pKi
30       7351                              vortioxetine  Synthetic organic  ...  Inhibition     8.80            pKi
31       7547                                citalopram  Synthetic organic  ...  Inhibition     8.36            pKi
32       7549                                 dosulepin  Synthetic organic  ...  Inhibition     8.07            pKi

[33 rows x 9 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 26 ---
Natural Language Query: What range of affinity values does α-MSH have for MC3 receptor?
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where name ilike '%MC<sub>3</sub> receptor%') and i.ligand_id in (select ligand_id from ligand where name ilike '%&alpha;-MSH%') and l.ligand_id=i.ligand_id and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT 
    i.ligand_id, 
    (SELECT name FROM ligand l WHERE l.ligand_id = i.ligand_id) AS ligand_name,
    i.object_id,
    (SELECT name FROM object o WHERE o.object_id = i.object_id) AS receptor_name,
    i.affinity_units, 
    i.affinity_high, 
    i.affinity_median, 
    i.affinity_low 
FROM 
    interaction i 
WHERE 
    i.ligand_id IN (SELECT ligand_id FROM ligand WHERE name ILIKE '%α-MSH%' OR name ILIKE '%alpha-MSH%')
    AND i.object_id IN (SELECT object_id FROM object WHERE name ILIKE '%MC3 receptor%');

Expected SQL Results:
   ligand_id         name  affinity affinity_units     type        action
0       1320  &alpha;-MSH       8.4            pKi  Agonist  Full agonist

Generated SQL Results:
Error executing generated SQL.

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 27 ---
Natural Language Query: What is the average pKi value for natural products compared to the average pIC50 values?
Expected SQL: select 'pKi', (select avg(case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end) as affinity from interaction i where i.ligand_id in (select ligand_id from ligand where type='Natural product') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) and i.affinity_units = 'pKi'), (select avg(case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end) as affinity from interaction i where i.ligand_id in (select ligand_id from ligand where type='Natural product') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) and i.affinity_units = 'pIC50'), 'pIC50';
Generated SQL: WITH natural_products_pki AS (
    SELECT CASE
               WHEN i.affinity_median IS NOT NULL THEN i.affinity_median
               WHEN i.affinity_high IS NOT NULL THEN i.affinity_high
               ELSE i.affinity_low
           END AS affinity
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.type = 'Natural product' AND i.affinity_units = 'pKi'
),
natural_products_pic50 AS (
    SELECT CASE
               WHEN i.affinity_median IS NOT NULL THEN i.affinity_median
               WHEN i.affinity_high IS NOT NULL THEN i.affinity_high
               ELSE i.affinity_low
           END AS affinity
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.type = 'Natural product' AND i.affinity_units = 'pIC50'
)
SELECT 
    (SELECT AVG(affinity) FROM natural_products_pki) AS average_pKi,
    (SELECT AVG(affinity) FROM natural_products_pic50) AS average_pIC50;

Expected SQL Results:
  ?column?  affinity  affinity ?column?
0      pKi  6.834046  6.373916    pIC50

Generated SQL Results:
   average_pki  average_pic50
0     6.834046       6.373916

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 28 ---
Natural Language Query: List endogenous activators of Adenyl cyclases, with their affinities
Expected SQL: select o.object_id, o.name, glrp.description, glrp.rank_potency from grac_ligand_rank_potency glrp, object o where glrp.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%Adenylyl cyclases%')) union select object_id from object where name ilike '%Adenylyl cyclases%') and glrp.description = 'Endogenous activators' and glrp.object_id=o.object_id;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id FROM grouping WHERE group_id IN (
        SELECT family_id FROM family WHERE name ILIKE '%adenyl cyclase%'
    )
    UNION
    SELECT e.group_id, e.family_id FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT l.ligand_id, l.name, i.affinity_units, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id FROM receptor2family WHERE family_id IN (
        SELECT family_id FROM subfamilies
    )
) 
AND i.type = 'Activator'
AND l.type = 'Endogenous peptide';

Expected SQL Results:
   object_id                 name            description                                       rank_potency
0       1278   adenylyl cyclase 1  Endogenous activators      <Ligand id=2351/>, PKC-evoked phosphorylation
1       1279   adenylyl cyclase 2  Endogenous activators  G&beta;&gamma;, PKC-evoked phosphorylation, Ra...
2       1280   adenylyl cyclase 3  Endogenous activators      <Ligand id=2351/>, PKC-evoked phosphorylation
3       1281   adenylyl cyclase 4  Endogenous activators                                     G&beta;&gamma;
4       1282   adenylyl cyclase 5  Endogenous activators  PKC-evoked phophorylation, G&beta;&gamma;, Raf...
5       1283   adenylyl cyclase 6  Endogenous activators         G&beta;&gamma;, Raf-evoked phosphorylation
6       1284   adenylyl cyclase 7  Endogenous activators         G&beta;&gamma;, PKC-evoked phosphorylation
7       1285   adenylyl cyclase 8  Endogenous activators                                  <Ligand id=2351/>
8       3068  adenylyl cyclase 10  Endogenous activators                       Bicarbonate, Ca<sup>2+</sup>

Generated SQL Results:
Error executing generated SQL.

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 29 ---
Natural Language Query: What concentration/s should be used in isolated tissue experiments?  
Expected SQL: select i.ligand_id, l.name, i.assay_description, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from interaction i, ligand l where i.ligand_id=l.ligand_id and (i.assay_description ilike '%human%' or i.assay_description ilike '%rat%' or i.assay_description ilike '%mouse%');
Generated SQL: SELECT l.ligand_id, l.name, i.concentration_range, i.affinity_units
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
WHERE i.concentration_range IS NOT NULL 
  AND i.concentration_range != '-' 
  AND i.concentration_range != ''
  AND l.ligand_id IN (
    SELECT distinct ligand_id
    FROM interaction
    WHERE type IN ('Agonist', 'Antagonist', 'Inhibitor', 'Channel blocker')
  );

Expected SQL Results:
      ligand_id                  name  ...        type           action
0         10080            diflapolin  ...   Inhibitor       Inhibition
1         10193               PBF-509  ...  Antagonist       Antagonist
2         10193               PBF-509  ...  Antagonist       Antagonist
3         10082              DS-8500a  ...     Agonist          Agonist
4         10090            cemiplimab  ...    Antibody          Binding
...         ...                   ...  ...         ...              ...
1031      13387              XPC-5462  ...   Inhibitor       Inhibition
1032      13390              XPC-7224  ...   Inhibitor       Inhibition
1033      13390              XPC-7224  ...   Inhibitor       Inhibition
1034       2923  mocravimod-phosphate  ...     Agonist     Full agonist
1035       2923  mocravimod-phosphate  ...     Agonist  Partial agonist

[1036 rows x 7 columns]

Generated SQL Results:
     ligand_id                      name concentration_range affinity_units
0         4028  lysophosphatidylinositol                   1              -
1         4331                      TRIM                 500              -
2         2343        tetraethylammonium               10000              -
3         2416                fampridine                5000              -
4         6327                    citral                 500              -
..         ...                       ...                 ...            ...
148        708           Mg<sup>2+</sup>          1000-10000              -
149        708           Mg<sup>2+</sup>          1000-10000              -
150        566           Zn<sup>2+</sup>               1-300              -
151       2447           flufenamic acid             50-1000              -
152        707           Ca<sup>2+</sup>               >1000              -

[153 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 30 ---
Natural Language Query: Are the compounds active in rats and mice as well as humans?  
Expected SQL: select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Mouse') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Rat') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Human') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.species_id IN (
  SELECT species_id FROM species WHERE name IN ('Human', 'Rat', 'Mouse')
)
AND l.ligand_id IN (
  SELECT i.ligand_id FROM interaction i WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Human')
  INTERSECT
  SELECT i.ligand_id FROM interaction i WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Rat')
  INTERSECT
  SELECT i.ligand_id FROM interaction i WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Mouse')
);

Expected SQL Results:
     ligand_id        name
0          667   icatibant
1         1888      U46619
2         6409        CTEP
3         1549  NPY-(2-36)
4           36   buspirone
..         ...         ...
273        247   GR 113808
274       2127    senktide
275       6465  GSK2193874
276         97  ritanserin
277       2347  cyclic GMP

[278 rows x 2 columns]

Generated SQL Results:
     ligand_id                          name
0            4                          5-CT
1            5           5-hydroxytryptamine
2            7                     8-OH-DPAT
3           23                      RU 24969
4           36                     buspirone
..         ...                           ...
277      12105  compound 19 [PMID: 35925768]
278      12314  compound 27 [PMID: 36449304]
279      12643                   relutrigine
280      13107                        GNE684
281      13273                       AZD5462

[282 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

==================================================
SUCCESSFUL STATISTICS:
Total test queries executed: 30
Non empty output rate: 0.9
Successful execution rate: 0.9
Non empty test queries: 27

DETAILED EXECUTION STATISTICS:
Execution Accuracy: 0.06666666666666667
Partial Execution Accuracy: 0.6333333333333333
Partial Column Accuracy: 0.8

FAILURE STATISTICS:
None count: 3
None IDs: 73, 13, 78
Empty count: 0
Empty IDs: 
==================================================
