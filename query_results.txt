Test Set Evaluation Results

--- Processing Test Case 1 ---
Natural Language Query: What pharmacology data is there for UniProtKB ID Q8NEC5 and Q96P56?
Generated SQL: SELECT i.*, l.name AS ligand_name, o.name AS object_name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE o.object_id IN (
    SELECT object_id
    FROM database_link
    WHERE database_id IN (SELECT database_id FROM database WHERE name = 'UniProtKB')
    AND placeholder IN ('Q8NEC5', 'Q96P56')
);

Generated SQL Results:
    interaction_id  ligand_id  object_id  ...              type_vector             ligand_name object_name
0            77843       4269        388  ...  'blocker':2 'channel':1              NNC55-0396    CatSper1
1            77836       1882        388  ...                'activ':1         PGE<sub>1</sub>    CatSper1
2            77837       5412        388  ...                'activ':1  PGF<sub>1&alpha;</sub>    CatSper1
3            77838       1883        388  ...                'activ':1         PGE<sub>2</sub>    CatSper1
4            12356       4212        388  ...  'blocker':2 'channel':1               HC-056456    CatSper1
5            77841       2432        388  ...  'blocker':2 'channel':1           ruthenium red    CatSper1
6            77844       2522        388  ...  'blocker':2 'channel':1              mibefradil    CatSper1
7            77839       2440        388  ...  'blocker':2 'channel':1         Cd<sup>2+</sup>    CatSper1
8            77842       4269        388  ...  'blocker':2 'channel':1              NNC55-0396    CatSper1
9            77840       2476        388  ...  'blocker':2 'channel':1         Ni<sup>2+</sup>    CatSper1
10           77835       2377        388  ...                'activ':1            progesterone    CatSper1
11           77859       4269        389  ...  'blocker':2 'channel':1              NNC55-0396    CatSper2
12           77860       2522        389  ...  'blocker':2 'channel':1              mibefradil    CatSper2
13           77853       5412        389  ...                'activ':1  PGF<sub>1&alpha;</sub>    CatSper2
14           77854       1883        389  ...                'activ':1         PGE<sub>2</sub>    CatSper2
15           77852       1882        389  ...                'activ':1         PGE<sub>1</sub>    CatSper2
16           77851       2377        389  ...                'activ':1            progesterone    CatSper2
17           77857       2432        389  ...  'blocker':2 'channel':1           ruthenium red    CatSper2
18           77858       4269        389  ...  'blocker':2 'channel':1              NNC55-0396    CatSper2
19           77855       2440        389  ...  'blocker':2 'channel':1         Cd<sup>2+</sup>    CatSper2
20           77856       2476        389  ...  'blocker':2 'channel':1         Ni<sup>2+</sup>    CatSper2

[21 rows x 42 columns]

--- Processing Test Case 2 ---
Natural Language Query: What selective agonists are there for chemokine receptors family members?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%chemokine receptors%'
    )
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT o.object_id, o.name AS object_name, i.ligand_id, l.name AS ligand_name, 
       i.type, i.selective, 
       CASE 
           WHEN i.affinity_median IS NULL THEN 
               CASE 
                   WHEN i.affinity_high IS NULL THEN i.affinity_low 
                   ELSE i.affinity_high 
               END 
           ELSE i.affinity_median 
       END AS affinity, 
       i.affinity_units
FROM object o
JOIN interaction i ON o.object_id = i.object_id
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE o.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies 
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (
            SELECT family_id 
            FROM family 
            WHERE name ILIKE '%chemokine receptors%'
        )
    )
) AND i.type = 'Agonist' 
AND i.selective = 'Selective';

Generated SQL Results:
Error executing generated SQL.

--- Processing Test Case 3 ---
Natural Language Query: Which Lipinski compounds target Coronavirus proteins?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Coronavirus%'
    )
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name
FROM ligand l
JOIN ligand_physchem lp ON l.ligand_id = lp.ligand_id
JOIN interaction i ON l.ligand_id = i.ligand_id
WHERE lp.lipinski_s_rule_of_five = 0
AND i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies 
        UNION 
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Coronavirus%'
    )
);

Generated SQL Results:
    ligand_id                          name
0       11441                         MI-30
1       12835  compound 16 [PMID: 34408808]
2       13318                          RS-1
3       12891                         MPI60
4       11408   compound 4 [PMID: 33531496]
..        ...                           ...
63      11658                        CCF981
64      13365  compound 4d [PMID: 38746883]
65      11256                    walrycin B
66      12226            MAT-POS-b3e365b9-1
67      11981                         TO507

[68 rows x 2 columns]

--- Processing Test Case 4 ---
Natural Language Query: Find all of the pharmacological agents that are active in humans but not rats and mice
Generated SQL: SELECT l.ligand_id, l.name
FROM ligand l
WHERE l.ligand_id IN (
    SELECT DISTINCT i.ligand_id
    FROM interaction i
    WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Human')
)
AND l.ligand_id NOT IN (
    SELECT DISTINCT i.ligand_id
    FROM interaction i
    WHERE i.species_id IN (
        SELECT species_id FROM species WHERE name IN ('Rat', 'Mouse')
    )
);

Generated SQL Results:
      ligand_id                           name
0          3738                          PTHrP
1          1058                    acetic acid
2          6105                         Gal-B2
3          4917                         epigen
4          5306                           KH28
...         ...                            ...
7856      11829               levoketoconazole
7857      11833  compound 21k [PMID: 34985886]
7858      12252                     teplizumab
7859      12312                     inclacumab
7860      12637                           EN67

[7861 rows x 2 columns]

--- Processing Test Case 5 ---
Natural Language Query: Find all patent references in the Guide that are post-2021?
Generated SQL: SELECT *
FROM reference
WHERE type = 'Patent' AND year > 2021;

Generated SQL Results:
    reference_id  ...                               article_title_vector
0          43420  ...       'lymphoma':5 'method':1 'mutant':4 'treat':3
1          43513  ...  'analogu':3 'antimalari':1 'hexahydropyrimidin':2
2          43544  ...  'aminocarbamoyl':1 'compound':2 'infect':8 'tr...
3          43815  ...  'coronavirus':2 'inhibitor':5 'main':3 'method...
4          43816  ...  '2':4 'compound':7 'cov':3 'inhibitor':6 'mpro...
5          43833  ...  'composit':10 'contain':11 'deriv':2 'effect':...
6          43901  ...                     'compound':3 'fuse':1 'ring':2
7          43903  ...  'compound':1 'inhibit':3 'krasg12c':4 'method'...
8          45928  ...                           'hemoglobin':3 'modul':1
9          44469  ...  'activ':6 'cardiometabol':14 'diseas':15 'epox...
10         44669  ...                  'compound':2 'pyrrolopyrimidin':1
11         44790  ...  'and/or':8 'compound':3 'method':1 'netosi':10...
12         44841  ...  'delta':4 'inhibitor':5 'pi3k':3 'pi3k-delta':...
13         45066  ...  'anti':2 'anti-pcsk9':1 'antibodi':4 'pcsk9':3...
14         45340  ...  'compound':2 'phospholipid':1 'thereof':5 'use':4
15         45341  ...  'inhibitor':4 'main':2 'method':6 'prepar':5 '...
16         45343  ...  'activ':4,8 'antivir':7 'compound':1 'exhibit'...
17         45345  ...     'antivir':1 'deriv':4 'heteroaryl':2 'keton':3
18         45346  ...  '3cl':1 'coronavirus':11 'infect':12 'inhibito...
19         45348  ...  'compound':4 'inhibitor':3 'rna':1 'thereof':7...
20         45349  ...  '3cl':4 'applic':10 'coronavirus':3 'method':8...
21         45350  ...  '3cl':8 'applic':14 'base':2 'coronavirus':7 '...
22         45347  ...  'and/or':14 'compound':3 'corona':18 'diseas':...
23         45451  ...  'agent':5 'chemotherapeut':4 'ether':3 'hetero...
24         45453  ...  'cancer':10 'combin':4 'ezh2':1 'inhibit':2 't...
25         45945  ...                             'combin':1 'therapi':2
26         45949  ...  'c':7 'c-kit':6 'composit':2 'inhibitor':10 'k...
27         45961  ...                  'cdk':4 'cocryst':1 'inhibitor':5
28         45964  ...  'certain':1 'chemic':2 'composit':4 'entiti':3...
29         45969  ...  'analogu':4 'heptamyl':2 'indolo':1 'inhibitor...
30         45970  ...  'integr':5 'modul':2 'pathway':7 'prodrug':1 '...
31         45987  ...           'degrad':2 'irak4':1 'thereof':5 'use':4
32         45996  ...  'antivir':4 'compound':5 'contain':3 'nitril':...
33         45999  ...  'function':7 'inhibitor':3 'mammalian':5 'mole...
34         46006  ...  'alpha':6 'cancer':11 'compound':1 'inhibit':3...
35         46235  ...  'acid':2 'amid':3 'cleavabl':6 'combin':11 'fa...
36         46336  ...  '-1':21,27 '-3':13 '-4':15,18 '2':9,10,16 '3':...
37         46340  ...  'analogu':4 'connect':8 'diseas':7 'helicas':1...
38         46477  ...  'applic':6 'composit':3 'compound':2 'medicin'...
39         46478  ...  'crystal':3 'epiderm':7 'factor':9 'form':4 'g...
40         47096  ...  'amid':2 'autophagi':3 'inhibitor':4 'method':...
41         47100  ...  '-1':30 '-10':14 '-16':12 '-20':17 '-22':44 '-...
42         47105  ...  'cancer':10 'inhibitor':5 'kinas':4 'treatment...
43         47110  ...  '1':4 'composit':7 'inhibitor':5 'janus':2 'ki...
44         47119  ...  '5':4 'agonist':5 'hyperinsulin':10 'receptor'...
45         47132  ...  'bicycl':5 'chiral':1 'fuse':4 'inhibitor':7 '...
46         47286  ...                'analog':1 'diseas':6 'treatment':4
47         47334  ...         'agent':5 'anticanc':4 'deriv':2 'purin':1
48         47581  ...            'degrad':2 'stat':1 'thereof':5 'use':4
49         47715  ...  'antibiot':5 'effect':7 'gram':2 'gram-neg':1 ...
50         47736  ...  'inhibitor':2 'method':4 'pcsk9':1 'thereof':7...
51         47782  ...                 'lincosamid':1 'thereof':4 'use':3
52         47783  ...         'inhibitor':2 'thereof':5 'tyk2':1 'use':4

[53 rows x 31 columns]

--- Processing Test Case 6 ---
Natural Language Query: What fraction of all targets with clinically approved drugs are targeted by a drug on the WHO essential medicines list?
Generated SQL: WITH approved_drug_targets AS (
    SELECT DISTINCT i.object_id
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.approved IS TRUE
),
who_essential_drug_targets AS (
    SELECT DISTINCT i.object_id
    FROM interaction i
    JOIN ligand l ON i.ligand_id = l.ligand_id
    WHERE l.who_essential IS TRUE
)
SELECT 
    (SELECT COUNT(*) FROM who_essential_drug_targets) * 1.0 / 
    (SELECT COUNT(*) FROM approved_drug_targets) AS fraction
;

Generated SQL Results:
   fraction
0  0.410923

--- Processing Test Case 7 ---
Natural Language Query: Which compounds have a role in acute lymphocytic leukemia?
Generated SQL: SELECT idl.ligand_id, l.name, idl.comment, d.name
FROM immuno_disease2ligand idl
JOIN ligand l ON idl.ligand_id = l.ligand_id
JOIN disease d ON idl.disease_id = d.disease_id
WHERE idl.disease_id IN (
    SELECT disease_id 
    FROM disease 
    WHERE name ILIKE '%acute lymphocytic leukemia%'
    UNION 
    SELECT disease_id 
    FROM disease2synonym 
    WHERE synonym ILIKE '%acute lymphocytic leukemia%'
);

Generated SQL Results:
   ligand_id                   name                                            comment                              name
0       8266  inotuzumab ozogamicin                          Approved therapy for ALL.  Acute lymphocytic leukemia (ALL)
1       7384           blinatumomab  Approved specifically for Philadelphia chromos...  Acute lymphocytic leukemia (ALL)

--- Processing Test Case 8 ---
Natural Language Query: What peptides, that have pharmacology in humans, also have amino-acid sequence data in the Guide?
Generated SQL: SELECT l.ligand_id, l.name, p.one_letter_seq, p.three_letter_seq
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN peptide p ON l.ligand_id = p.ligand_id
WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Human')
AND l.type = 'Peptide';

Generated SQL Results:
      ligand_id  ...                                   three_letter_seq
0           137  ...                                    Leu-Ser-Ala-Leu
1           137  ...                                    Leu-Ser-Ala-Leu
2           311  ...  Leu-Thr-Cys-Val-Thr-Ser-Lys-Ser-Ile-Phe-Gly-Il...
3           311  ...  Leu-Thr-Cys-Val-Thr-Ser-Lys-Ser-Ile-Phe-Gly-Il...
4           312  ...  Leu-Thr-Cys-Val-Thr-Thr-Lys-Ser-Ile-Gly-Gly-Va...
...         ...  ...                                                ...
2704      13315  ...  H-His-Aib-Glu-Gly-Thr-Phe-Thr-Ser-Asp-Val-Ser-...
2705      13352  ...                                                   
2706      13381  ...                                  Ac-Leu-Leu-Nle-al
2707      13383  ...                                                   
2708      13383  ...                                                   

[2709 rows x 4 columns]

--- Processing Test Case 9 ---
Natural Language Query: What should I use to inhibit TLR7 in cultured cells, and at what concentration?  
Generated SQL: SELECT 
    l.ligand_id, 
    l.name, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity, 
    i.affinity_units, 
    i.type, 
    i.action 
FROM 
    ligand l, 
    interaction i 
WHERE 
    i.object_id IN (
        SELECT object_id 
        FROM object 
        WHERE object_id IN (
            SELECT object_id 
            FROM receptor2family 
            WHERE family_id IN (
                WITH RECURSIVE subfamilies AS (
                    SELECT group_id, family_id 
                    FROM grouping 
                    WHERE group_id IN (
                        SELECT family_id 
                        FROM family 
                        WHERE name ILIKE '%TLR%' OR name ILIKE '%Toll-like receptor%'
                    ) 
                    UNION 
                    SELECT e.group_id, e.family_id 
                    FROM grouping e 
                    INNER JOIN subfamilies s ON s.family_id = e.group_id
                ) 
                SELECT family_id 
                FROM subfamilies 
                ORDER BY family_id
            )
        ) 
        UNION 
        SELECT object_id 
        FROM object 
        WHERE name ILIKE '%TLR7%' OR name ILIKE '%Toll-like receptor 7%'
    ) 
    AND i.ligand_id = l.ligand_id 
    AND i.type IN ('Inhibitor', 'Antagonist') 
    AND (
        (i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
        OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != '')
    );

Generated SQL Results:
   ligand_id                           name  affinity affinity_units        type      action
0       7198             hydroxychloroquine      5.56          pIC50  Antagonist  Antagonist
1      10435  compound 10a [PMID: 31283223]      5.09          pIC50  Antagonist  Antagonist
2      11307                      enpatoran      6.00          pIC50  Antagonist  Antagonist

--- Processing Test Case 10 ---
Natural Language Query: What antibacterial compounds are in the database?
Generated SQL: SELECT ligand_id, name 
FROM ligand 
WHERE antibacterial IS TRUE;

Generated SQL Results:
     ligand_id                 name
0        11015      rancinamycin IA
1         5155         caffeic acid
2        10992  dihydroxybenzofuran
3        12928        dirithromycin
4         3431                 AHPN
..         ...                  ...
558      11753              ETX0462
559      12397        azidamfenicol
560      12772            sutezolid
561      12921          sarecycline
562      12923          florfenicol

[563 rows x 2 columns]

--- Processing Test Case 11 ---
Natural Language Query: Which antibodies have clinical trials data in GtoPdb?
Generated SQL: SELECT l.ligand_id, l.name
FROM ligand l
WHERE l.type = 'Antibody' 
AND l.ligand_id IN (SELECT DISTINCT ligand_id FROM ligand2clinical_trial);

Generated SQL Results:
     ligand_id               name
0        11719  tisotumab vedotin
1        10168        ravulizumab
2         9596          oleclumab
3         7499      pembrolizumab
4        12964        tozorakimab
..         ...                ...
225       9756    bifikafusp alfa
226      12966        cadonilimab
227      13362        tosatoxumab
228       9296        vunakizumab
229      11366           osocimab

[230 rows x 2 columns]

--- Processing Test Case 12 ---
Natural Language Query: List chemical structures for SARS Cov2 MPro that have pAct > 7 and order these high to low
Generated SQL: SELECT l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, 
CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low 
            ELSE i.affinity_high 
        END 
    ELSE i.affinity_median 
END AS affinity, 
i.affinity_units 
FROM interaction i 
JOIN ligand l ON i.ligand_id = l.ligand_id 
JOIN object o ON i.object_id = o.object_id 
WHERE i.object_id IN (
    SELECT object_id 
    FROM object 
    WHERE name ILIKE '%SARS-CoV-2%' 
    OR abbreviation ILIKE '%SARS-CoV-2%' 
    UNION 
    SELECT object_id 
    FROM synonym 
    WHERE synonym ILIKE '%SARS-CoV-2%'
) 
AND CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low > 7 
            ELSE i.affinity_high > 7  
        END 
    ELSE i.affinity_median > 7 
END 
ORDER BY affinity DESC;

Generated SQL Results:
    ligand_id                          name               type  object_id  ...       type      action affinity  affinity_units
0       11503                  nirmatrelvir  Synthetic organic       3111  ...  Inhibitor  Inhibition     9.57             pKi
1       11712                    Z-AVLD-FMK            Peptide       3111  ...  Inhibitor  Inhibition     9.10           pIC50
2       12593     compound 6 [WO2022133588]  Synthetic organic       3111  ...  Inhibitor  Inhibition     9.00           pIC50
3       12590     example 18 [WO2022013684]  Synthetic organic       3111  ...  Inhibitor  Inhibition     8.81           pIC50
4       12958                   pomotrelvir  Synthetic organic       3111  ...  Inhibitor  Inhibition     8.57             pKi
..        ...                           ...                ...        ...  ...        ...         ...      ...             ...
88      12602                         WU-04  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.14           pIC50
89      12841  compound 15 [PMID: 34438124]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.14           pIC50
90      11903  compound 19 [PMID: 35142215]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.11           pIC50
91      12227            PET-UNK-29afea89-2  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.10           pIC50
92      11630  compound 2i [PMID: 23245752]  Synthetic organic       3111  ...  Inhibitor  Inhibition     7.03           pIC50

[93 rows x 9 columns]

--- Processing Test Case 13 ---
Natural Language Query: Find all immune checkpoint ligands
Generated SQL: SELECT l.ligand_id, l.name, l.type
FROM ligand l
WHERE l.ligand_id IN (
    SELECT distinct i.ligand_id
    FROM interaction i
    WHERE i.object_id IN (
        SELECT object_id 
        FROM receptor2family 
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id 
                FROM grouping 
                WHERE group_id IN (
                    SELECT family_id 
                    FROM family 
                    WHERE name ILIKE '%immune checkpoint%'
                )
                UNION
                SELECT e.group_id, e.family_id 
                FROM grouping e
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            )
            SELECT family_id FROM subfamilies
        )
    )
);

Generated SQL Results:
    ligand_id                              name      type
0        4891     B and T lymphocyte attenuator   Peptide
1        5077                       CD40 ligand   Peptide
2       11583                      retifanlimab  Antibody
3        5070                             LIGHT   Peptide
4       13396                       ivonescimab  Antibody
5        8266             inotuzumab ozogamicin  Antibody
6       12992                         nurulimab  Antibody
7       12991                       prolgolimab  Antibody
8       12347                        penpulimab  Antibody
9        5064               lymphotoxin-&alpha;   Peptide
10       8460                   lulizumab pegol  Antibody
11      11649                       feladilimab  Antibody
12       9434             vadastuximab talirine  Antibody
13       9606  programmed cell death 1 ligand 1   Peptide
14      10117                           AUNP-12   Peptide
15       7499                     pembrolizumab  Antibody
16      10140                     spartalizumab  Antibody
17      10090                        cemiplimab  Antibody
18      12586                      obrindatamab  Antibody
19      12966                       cadonilimab  Antibody
20      12989                       toripalimab  Antibody
21      12990                        sintilimab  Antibody
22      12349                      zimberelimab  Antibody
23      11518                       dostarlimab  Antibody
24       9536                        relatlimab  Antibody
25      12361                       sabatolimab  Antibody
26       6775             gemtuzumab ozogamicin  Antibody
27       6891                         abatacept   Peptide
28       6888                        ipilimumab  Antibody
29       6892                        belatacept   Peptide
30       7335                         nivolumab  Antibody
31       7675             moxetumomab pasudotox  Antibody
32       7983                        lintuzumab  Antibody
33       8462                      tremelimumab  Antibody
34       9802                            CFZ533  Antibody
35       9589                     enoblituzumab  Antibody
36       9592                      tislelizumab  Antibody

--- Processing Test Case 14 ---
Natural Language Query: Which ligands have interaction data in the plasmodium asexual blood stage 
Generated SQL: SELECT DISTINCT i.ligand_id, l.name
FROM interaction i
JOIN malaria_stage2interaction msi ON i.interaction_id = msi.interaction_id
JOIN malaria_stage ms ON msi.malaria_stage_id = ms.malaria_stage_id
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE ms.name ILIKE '%asexual blood stage%';

Generated SQL Results:
     ligand_id                           name
0         4252                     mefloquine
1         4800                  pyrimethamine
2         5215                       luteolin
3         5535                    chloroquine
4         6391                     bortezomib
..         ...                            ...
111      11926  compound VII [WO2021149692A1]
112      11928   compound 1a [WO2021204952A1]
113      11929                         INE963
114      11933    compound 4 [WO2022008639A1]
115      11945                           JX35

[116 rows x 2 columns]

--- Processing Test Case 15 ---
Natural Language Query: Find NHRs that have quantitiative interaction data?
Generated SQL: SELECT o.object_id, o.name 
FROM object o 
WHERE o.object_id IN (
    SELECT DISTINCT i.object_id 
    FROM interaction i 
    WHERE i.object_id IN (
        SELECT object_id FROM nhr
    ) 
    AND (
        (i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
        OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != '')
    )
);

Generated SQL Results:
    object_id                                               name
0         592                     Retinoic acid receptor-&gamma;
1         632                             Steroidogenic factor 1
2         593  Peroxisome proliferator-activated receptor-&al...
3         596                                    Rev-Erb-&alpha;
4         630                         Nuclear receptor related 1
5         636                                                SHP
6         633                           Liver receptor homolog-1
7         594  Peroxisome proliferator-activated receptor-&be...
8         590                     Retinoic acid receptor-&alpha;
9         597                                     Rev-Erb-&beta;
10        629                             Nerve Growth factor IB
11        631                   Neuron-derived orphan receptor 1
12        624                  Estrogen-related receptor-&gamma;
13        615                                                TLX
14        612                        Retinoid X receptor-&gamma;
15        622                  Estrogen-related receptor-&alpha;
16        598                RAR-related orphan receptor-&alpha;
17        614                              Testicular receptor 4
18        611                         Retinoid X receptor-&beta;
19        610                        Retinoid X receptor-&alpha;
20        623                   Estrogen-related receptor-&beta;
21        628                                  Androgen receptor
22        599                 RAR-related orphan receptor-&beta;
23        601                            Liver X receptor-&beta;
24        604                        Farnesoid X receptor-&beta;
25        605                                 Vitamin D receptor
26        607                   Constitutive androstane receptor
27        606                                Pregnane X receptor
28        626                         Mineralocorticoid receptor
29        627                              Progesterone receptor
30        589                    Thyroid hormone receptor-&beta;
31        588                   Thyroid hormone receptor-&alpha;
32        595  Peroxisome proliferator-activated receptor-&ga...
33        625                            Glucocorticoid receptor
34        621                           Estrogen receptor-&beta;
35        620                          Estrogen receptor-&alpha;
36        600                RAR-related orphan receptor-&gamma;
37        591                      Retinoic acid receptor-&beta;
38        603                               Farnesoid X receptor
39        602                           Liver X receptor-&alpha;

--- Processing Test Case 16 ---
Natural Language Query: Which compounds act as both agonists and antagonists against GPCRs?
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM gpcr
) AND i.ligand_id IN (
    SELECT i1.ligand_id
    FROM interaction i1
    JOIN gpcr g ON i1.object_id = g.object_id
    WHERE i1.type = 'Agonist'
) AND i.ligand_id IN (
    SELECT i2.ligand_id
    FROM interaction i2
    JOIN gpcr g ON i2.object_id = g.object_id
    WHERE i2.type = 'Antagonist'
);

Generated SQL Results:
     ligand_id                     name
0            3     1-naphthylpiperazine
1            9                 BMY-7378
2           14                GR 127935
3           16                L-772,405
4           22                asenapine
..         ...                      ...
134      11614                 LY395756
135      12165                 CHF-6366
136      12570                  ST-1505
137      12571                  ST-1478
138      13316  maridebart cafraglutide

[139 rows x 2 columns]

--- Processing Test Case 17 ---
Natural Language Query: Which channel blockers act against Ryanodine receptors?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (SELECT family_id FROM family WHERE name ILIKE '%ryanodine receptor%')
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT l.ligand_id, l.name, l.type, o.object_id, o.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies 
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (SELECT family_id FROM family WHERE name ILIKE '%ryanodine receptor%')
    )
)
AND i.type = 'Channel blocker';

Generated SQL Results:
   ligand_id           name               type  object_id  name
0       2432  ruthenium red          Inorganic        748  RyR2
1       2432  ruthenium red          Inorganic        749  RyR3
2       4291       procaine  Synthetic organic        747  RyR1
3       4291       procaine  Synthetic organic        748  RyR2
4       4303      ryanodine    Natural product        748  RyR2
5       4303      ryanodine    Natural product        747  RyR1
6       2432  ruthenium red          Inorganic        747  RyR1

--- Processing Test Case 18 ---
Natural Language Query: Find pKi value, above 6, for Ion Channel approved drugs
Generated SQL: SELECT 
    i.ligand_id, 
    (SELECT name FROM ligand WHERE ligand_id = i.ligand_id) AS ligand_name, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity, 
    i.affinity_units
FROM 
    interaction i
WHERE 
    i.object_id IN (
        SELECT object_id 
        FROM receptor2family 
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id 
                FROM grouping 
                WHERE group_id IN (
                    SELECT family_id 
                    FROM family 
                    WHERE name ILIKE '%Ion Channel%'
                )
                UNION 
                SELECT e.group_id, e.family_id 
                FROM grouping e 
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            )
            SELECT family_id 
            FROM subfamilies
        )
    ) 
    AND i.ligand_id IN (
        SELECT ligand_id 
        FROM ligand 
        WHERE approved = TRUE
    ) 
    AND i.affinity_units = 'pKi' 
    AND (
        CASE 
            WHEN i.affinity_median IS NULL THEN 
                CASE 
                    WHEN i.affinity_high IS NULL THEN i.affinity_low 
                    ELSE i.affinity_high 
                END 
            ELSE i.affinity_median 
        END > 6
    );

Generated SQL Results:
    ligand_id     ligand_name  affinity affinity_units
0        2290     ondansetron      7.80            pKi
1         241  metoclopramide      6.45            pKi
2        7313       triazolam      8.84            pKi
3        7313       triazolam      9.10            pKi
4        7313       triazolam      9.23            pKi
5        7313       triazolam      8.81            pKi
6        4348        zolpidem      6.12            pKi
7        5459     varenicline     10.40            pKi
8        2585        nicotine      8.66            pKi
9        5459     varenicline      7.40            pKi
10       4253       memantine      6.15            pKi
11       2285       azasetron      8.40            pKi
12       4190      felodipine      8.40            pKi
13       2294    tubocurarine      7.10            pKi
14       2290     ondansetron      8.30            pKi
15       2296       alosetron      9.50            pKi
16       2285       azasetron      8.50            pKi
17       2300     granisetron      8.80            pKi
18       2604      dofetilide      8.19            pKi
19       4193   flunitrazepam      7.80            pKi
20       4192      flumazenil      8.98            pKi
21       3364        diazepam      7.77            pKi
22       4193   flunitrazepam      8.28            pKi
23       6963      clonazepam      8.70            pKi
24       3364        diazepam      7.77            pKi
25       4193   flunitrazepam      8.26            pKi
26       4193   flunitrazepam      8.28            pKi
27       3364        diazepam      7.79            pKi
28       6963      clonazepam      8.77            pKi
29        260     tropisetron      8.80            pKi
30       7486    palonosetron     10.49            pKi
31       7351    vortioxetine      8.43            pKi
32       4192      flumazenil      6.83            pKi
33       5459     varenicline      9.96            pKi
34       4192      flumazenil      7.03            pKi
35       6963      clonazepam      8.90            pKi
36       4348        zolpidem      7.68            pKi
37       4192      flumazenil      9.10            pKi
38       4192      flumazenil      9.05            pKi
39       4192      flumazenil      9.22            pKi

--- Processing Test Case 19 ---
Natural Language Query: Find drugs for which calcitonin receptors are a primary target?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%calcitonin receptor%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id
        FROM subfamilies
        UNION
        SELECT family_id
        FROM family
        WHERE family_id IN (
            SELECT family_id
            FROM family
            WHERE name ILIKE '%calcitonin receptor%'
        )
    )
)
AND i.primary_target IS TRUE;

Generated SQL Results:
   ligand_id                 name
0        685           calcitonin
1       9250             erenumab
2       6973  calcitonin (salmon)
3      10704           rimegepant

--- Processing Test Case 20 ---
Natural Language Query: Which compounds, that also have ChEMBL Ligand IDs, target dopamine receptors?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%dopamine receptors%' OR name ILIKE '%Dopamine Receptors%'
    )
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
) 
SELECT DISTINCT l.ligand_id, l.name 
FROM interaction i 
JOIN ligand l ON i.ligand_id = l.ligand_id 
JOIN ligand_database_link ldl ON l.ligand_id = ldl.ligand_id 
WHERE i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies 
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (
            SELECT family_id 
            FROM family 
            WHERE name ILIKE '%dopamine receptors%' OR name ILIKE '%Dopamine Receptors%'
        )
    )
) 
AND ldl.database_id IN (
    SELECT database_id 
    FROM database 
    WHERE name ILIKE '%ChEMBL%'
);

Generated SQL Results:
     ligand_id                      name
0         8436                    LP-211
1         3300  [<sup>3</sup>H]spiperone
2           98                sertindole
3           90                  pimozide
4           59               ziprasidone
..         ...                       ...
124        205                  loxapine
125        209              perphenazine
126       8434                     LP-12
127       8370          (-)-stepholidine
128      11140              metopimazine

[129 rows x 2 columns]

--- Processing Test Case 21 ---
Natural Language Query: Are there any approved drugs with unclear bioactivity or molecular mechanisms of action?
Generated SQL: SELECT l.ligand_id, l.name
FROM ligand l
WHERE l.approved IS TRUE
      AND (l.bioactivity_comments IS NULL OR l.bioactivity_comments = '')
      AND (l.mechanism_of_action IS NULL OR l.mechanism_of_action = '');

Generated SQL Results:
     ligand_id              name
0        12681        amprenavir
1        12235       upacicalcet
2         1596          acipimox
3        12928     dirithromycin
4         9533               SNP
..         ...               ...
216      11169        carbetocin
217      10772          cefepime
218      10891         aviptadil
219      11241      terlipressin
220      11829  levoketoconazole

[221 rows x 2 columns]

--- Processing Test Case 22 ---
Natural Language Query: What potassium channels does GtoPdb have data on?
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (SELECT family_id FROM family WHERE name ILIKE '%Potassium channels%')
    UNION
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT o.object_id, o.name 
FROM object o 
WHERE o.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id FROM subfamilies 
        UNION 
        SELECT family_id FROM family WHERE family_id IN (
            SELECT family_id FROM family WHERE name ILIKE '%Potassium channels%'
        )
    )
);

Generated SQL Results:
    object_id               name
0         572  K<SUB>v</SUB>11.1
1         557   K<SUB>v</SUB>6.2
2         553   K<SUB>v</SUB>4.2
3         440  K<sub>ir</sub>5.1
4         443  K<sub>ir</sub>7.1
..        ...                ...
73        561   K<SUB>v</SUB>7.2
74        563   K<SUB>v</SUB>7.4
75        429  K<sub>ir</sub>1.1
76        380  K<sub>Ca</sub>1.1
77        384  K<sub>Ca</sub>3.1

[78 rows x 2 columns]

--- Processing Test Case 23 ---
Natural Language Query: What primary references are used to curate Somatostatin receptor agonist?
Generated SQL: SELECT ref.reference_id, ref.article_title, ref.authors, ref.title, ref.pubmed_id
FROM reference ref
JOIN interaction_affinity_refs iar ON ref.reference_id = iar.reference_id
WHERE iar.interaction_id IN (
    SELECT interaction_id 
    FROM interaction 
    WHERE ligand_id IN (
        SELECT ligand_id FROM ligand 
        WHERE type = 'Agonist'
    ) 
    AND object_id IN (
        SELECT object_id 
        FROM object 
        WHERE name ILIKE '%Somatostatin receptor%' OR abbreviation ILIKE '%Somatostatin receptor%'
    )
);

Generated SQL Results:
Error executing generated SQL.

--- Processing Test Case 24 ---
Natural Language Query: What are the SMILES and InChI Keys for compounds that interact with Nicotinic acetylcholine receptors (nACh)
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Nicotinic acetylcholine receptors%')
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi_key
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (
            SELECT family_id 
            FROM family 
            WHERE name ILIKE '%Nicotinic acetylcholine receptors%'
        )
    )
);

Generated SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0        3966  ...  JBSVHWCIKVSTTH-UHFFFAOYSA-N
1        3988  ...  WECKJONDRAUFDD-ZDUSSCGKSA-N
2       10693  ...  LWWDCTBUJUEFDE-CRAIPNDOSA-N
3        3978  ...  SNICXCGAKADSCV-UHFFFAOYSA-N
4        3998  ...  IPKZCLGGYKRDES-ZDUSSCGKSA-N
5        3997  ...  PTGWFYYEAUFEAS-ZYHUDNBSSA-N
6        5459  ...  JQSHBVHOMNKWFT-DTORHVGOSA-N
7        4007  ...  YRXAPIQPBSKAMJ-WDCFXWORSA-N
8        4004  ...  AXOIZCJOOAYSMI-UHFFFAOYSA-N
9        9056  ...  RNOBTWYQAWEZHH-JGVFFNPUSA-N
10       8883  ...  OZVULFLAPUPPFK-QFIPXVFZSA-N
11       3977  ...  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
12       3994  ...  JUOSGGQXEBBCJB-GORDUTHDSA-N
13       3974  ...  AKMKIDQMKPFYDJ-UHFFFAOYSA-N
14       2373  ...  AZSNMRSAGSSBNP-ZLRQRZFZSA-N
15       3969  ...  OXKRFEWMSWPKKV-GHTZIAJQSA-N
16       6926  ...  SSRDSYXGYPJKRR-ZDUSSCGKSA-N
17       7697  ...  OCKIPDMKGPYYJS-ZDUSSCGKSA-N
18       3962  ...  YNCXHXYZTLIZTO-UHFFFAOYSA-N
19        347  ...  QMGVPVSNSZLJIA-FVWCLLPLSA-N
20       3983  ...  CSUQNJQRLCOOSR-NAKBKFBQSA-N
21       3979  ...  ANJTVLIZGCUXLD-ZIAKYUPESA-N
22       3973  ...  SVNSCQIKKAACJG-SBLJLSJOSA-N
23       3980  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
24       3993  ...  HGFXDSQLRSWUBO-UHFFFAOYSA-N
25       3987  ...  HFZDMKMXPGRKCK-GQCTYLIASA-N
26       3963  ...  VZJFGSRCJCXDSG-UHFFFAOYSA-N
27       3992  ...  PEAMDZVDNYENPN-UHFFFAOYSA-N
28      11384  ...  RPYWXZCFYPVCNQ-RVDMUPIBSA-N
29       3991  ...  CEIIEALEIHQDBX-UHFFFAOYSA-N
30       4001  ...  GVEAYVLWDAFXET-XGHATYIMSA-N
31      10700  ...  PYSCVJMLJRHJGJ-UHFFFAOYSA-N
32       4011  ...  FIRBQKFGNFGBRC-NLBWWLDMSA-N
33       9537  ...  YXSLJKQTIDHPOT-UHFFFAOYSA-N
34       2585  ...  SNICXCGAKADSCV-JTQLQIEISA-N
35       3990  ...  IMYZQPCYWPFTAG-UHFFFAOYSA-N
36       3971  ...  MRVNNESNVNUKCV-IBGZPJMESA-N
37       3995  ...  GTMRUYCIJSNXGB-UHFFFAOYSA-N
38       3982  ...  VUVGEYBNLLGGBG-MVPSLEAZSA-N
39      11383  ...  VSOWCIMCDKXVRC-UHFFFAOYSA-N
40       7371  ...  NPDLTEZXGWRMLQ-IBGZPJMESA-N
41       4005  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
42      11385  ...  KXAAIPFSUGPVMQ-GXDHUFHOSA-N
43       3968  ...  GIRLVGYIIVFTLI-IBGZPJMESA-N
44       4000  ...  OUDXRNQPVSMGDW-UHFFFAOYSA-N
45       3989  ...  MKTAGSRKQIGEBH-SSDOTTSWSA-N
46        356  ...  OZLPUNFFCJDMJD-UHFFFAOYSA-N
47       3986  ...  ABACVOXFUHDKNZ-UHFFFAOYSA-N
48       3976  ...  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
49       3996  ...  UQOFGTXDASPNLL-XHNCKOQMSA-N

[50 rows x 4 columns]

--- Processing Test Case 25 ---
Natural Language Query: What ligands and structures have a pKi values > 8 when interacting with transporter targets?
Generated SQL: SELECT l.ligand_id, l.name, l.type, ls.isomeric_smiles, ls.isomeric_standard_inchi_key, i.type, i.action, 
CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low 
            ELSE i.affinity_high 
        END 
    ELSE i.affinity_median 
END AS affinity, 
i.affinity_units 
FROM ligand l 
JOIN interaction i ON l.ligand_id = i.ligand_id 
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id 
WHERE i.object_id IN (
    SELECT object_id FROM receptor2family WHERE family_id IN (
        WITH RECURSIVE subfamilies AS (
            SELECT group_id, family_id FROM grouping WHERE group_id IN (
                SELECT family_id FROM family WHERE name ILIKE '%Transporters%'
            )
            UNION 
            SELECT e.group_id, e.family_id FROM grouping e 
            INNER JOIN subfamilies s ON s.family_id = e.group_id
        ) 
        SELECT family_id FROM subfamilies
        UNION 
        SELECT family_id FROM family WHERE family_id IN (
            SELECT family_id FROM family WHERE name ILIKE '%Transporters%'
        )
    )
) 
AND i.affinity_units = 'pKi' 
AND (
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low > 8 
                ELSE i.affinity_high > 8 
            END 
        ELSE i.affinity_median > 8 
    END
)
ORDER BY affinity DESC;

Generated SQL Results:
    ligand_id                                      name               type  ...      action affinity affinity_units
0        4768                       aminobenzovesamicol  Synthetic organic  ...  Inhibition    10.90            pKi
1        4512  nitrobenzylmercaptopurine ribonucleoside  Synthetic organic  ...  Inhibition     9.70            pKi
2        2398                              clomipramine  Synthetic organic  ...  Inhibition     9.68            pKi
3        4590                                draflazine  Synthetic organic  ...  Inhibition     9.60            pKi
4        4790                                paroxetine  Synthetic organic  ...  Inhibition     9.60            pKi
5        4734                                   KF24345  Synthetic organic  ...  Inhibition     9.40            pKi
6        4513                                    NBTGR   Synthetic organic  ...  Inhibition     9.30            pKi
7       10064                       GlyT1 inhibitor 27a  Synthetic organic  ...  Inhibition     9.10            pKi
8        4798                                sertraline  Synthetic organic  ...  Inhibition     9.10            pKi
9        9983                                vanoxerine  Synthetic organic  ...  Inhibition     9.00            pKi
10       4717                                   dilazep  Synthetic organic  ...  Inhibition     9.00            pKi
11       4797                                  mazindol  Synthetic organic  ...  Inhibition     8.90            pKi
12       7351                              vortioxetine  Synthetic organic  ...  Inhibition     8.80            pKi
13       4807                              dipyridamole  Synthetic organic  ...  Inhibition     8.80            pKi
14       4759                                 vesamicol  Synthetic organic  ...  Inhibition     8.70            pKi
15       2399                               desipramine  Synthetic organic  ...  Inhibition     8.68            pKi
16        203                                fluoxetine  Synthetic organic  ...  Inhibition     8.50            pKi
17      10605                                   AZD3965  Synthetic organic  ...  Inhibition     8.49            pKi
18       4637                                nisoxetine  Synthetic organic  ...  Inhibition     8.40            pKi
19       7547                                citalopram  Synthetic organic  ...  Inhibition     8.36            pKi
20       9880                                       H05  Synthetic organic  ...  Inhibition     8.32            pKi
21       8813              compound 30 [PMID: 16455256]  Synthetic organic  ...  Inhibition     8.32            pKi
22      10405                                  BAY-8002  Synthetic organic  ...        None     8.30            pKi
23        202                                duloxetine  Synthetic organic  ...  Inhibition     8.30            pKi
24       7551                               lofepramine  Synthetic organic  ...  Inhibition     8.27            pKi
25        202                                duloxetine  Synthetic organic  ...  Inhibition     8.22            pKi
26       2404                             nortriptyline  Synthetic organic  ...  Inhibition     8.20            pKi
27       7189                               fluvoxamine  Synthetic organic  ...  Inhibition     8.19            pKi
28       7285                             protriptyline  Synthetic organic  ...  Inhibition     8.17            pKi
29       9880                                       H05  Synthetic organic  ...  Inhibition     8.17            pKi
30       2404                             nortriptyline  Synthetic organic  ...  Inhibition     8.16            pKi
31       4792                               nomifensine  Synthetic organic  ...  Inhibition     8.10            pKi
32       7549                                 dosulepin  Synthetic organic  ...  Inhibition     8.07            pKi

[33 rows x 9 columns]

--- Processing Test Case 26 ---
Natural Language Query: What range of affinity values does α-MSH have for MC3 receptor?
Generated SQL: SELECT 
    i.affinity_units, 
    MIN(i.affinity_low) AS min_affinity, 
    MAX(i.affinity_high) AS max_affinity 
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
JOIN 
    object o ON i.object_id = o.object_id
WHERE 
    l.name ILIKE '%α-MSH%' AND 
    o.name ILIKE '%MC3 receptor%'
GROUP BY 
    i.affinity_units;

Generated SQL Results:
Error executing generated SQL.

--- Processing Test Case 27 ---
Natural Language Query: What is the average pKi value for natural products compared to the average pIC50 values?
Generated SQL: SELECT 
    'pKi' as affinity_type,
    AVG(CASE 
        WHEN i.affinity_median IS NOT NULL THEN i.affinity_median
        WHEN i.affinity_high IS NOT NULL THEN i.affinity_high
        ELSE i.affinity_low 
    END) AS average_affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    l.type = 'Natural product' AND 
    i.affinity_units = 'pKi'

UNION ALL

SELECT 
    'pIC50' as affinity_type,
    AVG(CASE 
        WHEN i.affinity_median IS NOT NULL THEN i.affinity_median
        WHEN i.affinity_high IS NOT NULL THEN i.affinity_high
        ELSE i.affinity_low 
    END) AS average_affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    l.type = 'Natural product' AND 
    i.affinity_units = 'pIC50';

Generated SQL Results:
  affinity_type  average_affinity
0           pKi          6.834046
1         pIC50          6.373916

--- Processing Test Case 28 ---
Natural Language Query: List endogenous activators of Adenyl cyclases, with their affinities
Generated SQL: SELECT 
    l.ligand_id, 
    l.name, 
    l.type, 
    o.object_id, 
    o.name AS target_name,
    i.affinity_units, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
JOIN 
    object o ON i.object_id = o.object_id
WHERE 
    i.type = 'Activator' 
    AND i.endogenous IS TRUE
    AND o.object_id IN (
        SELECT object_id 
        FROM receptor2family 
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id 
                FROM grouping 
                WHERE group_id IN (
                    SELECT family_id 
                    FROM family 
                    WHERE name ILIKE '%Adenyl cyclases%'
                )
                UNION 
                SELECT e.group_id, e.family_id 
                FROM grouping e 
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            ) 
            SELECT family_id 
            FROM subfamilies 
            UNION 
            SELECT family_id 
            FROM family 
            WHERE family_id IN (
                SELECT family_id 
                FROM family 
                WHERE name ILIKE '%Adenyl cyclases%'
            )
        )
    )
ORDER BY 
    affinity DESC;

Generated SQL Results:
Error executing generated SQL.

--- Processing Test Case 29 ---
Natural Language Query: What concentration/s should be used in isolated tissue experiments?  
Generated SQL: SELECT l.ligand_id, l.name, i.affinity_units, 
       CASE 
           WHEN i.affinity_median IS NULL THEN 
               CASE 
                   WHEN i.affinity_high IS NULL THEN i.affinity_low 
                   ELSE i.affinity_high 
               END 
           ELSE i.affinity_median 
       END AS affinity, 
       i.concentration_range 
FROM interaction i 
JOIN ligand l ON i.ligand_id = l.ligand_id 
WHERE i.concentration_range IS NOT NULL 
    AND i.concentration_range != '-' 
    AND i.concentration_range != ''
    AND ((i.affinity_units IS NOT NULL AND i.affinity_units != '-')
         OR (i.original_affinity_units IS NOT NULL AND i.original_affinity_units != '-')
         OR i.concentration_range IS NOT NULL);

Generated SQL Results:
     ligand_id                      name affinity_units  affinity concentration_range
0         2499                    thymol          pEC50       4.7             6.25-25
1         2508   lysophosphatidylcholine              -       NaN                   1
2         4028  lysophosphatidylinositol              -       NaN                   1
3         4331                      TRIM              -       NaN                 500
4         2343        tetraethylammonium              -       NaN               10000
..         ...                       ...            ...       ...                 ...
237        708           Mg<sup>2+</sup>              -       NaN          1000-10000
238       2293          trichloroethanol              -       NaN           250-10000
239        566           Zn<sup>2+</sup>              -       NaN               1-300
240       2447           flufenamic acid              -       NaN             50-1000
241        707           Ca<sup>2+</sup>              -       NaN               >1000

[242 rows x 5 columns]

--- Processing Test Case 30 ---
Natural Language Query: Are the compounds active in rats and mice as well as humans?  
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.species_id IN (
    SELECT species_id FROM species WHERE name IN ('Human', 'Rat', 'Mouse')
)
GROUP BY l.ligand_id, l.name
HAVING COUNT(DISTINCT i.species_id) = 3;

Generated SQL Results:
     ligand_id                          name
0            4                          5-CT
1            5           5-hydroxytryptamine
2            7                     8-OH-DPAT
3           23                      RU 24969
4           36                     buspirone
..         ...                           ...
277      12105  compound 19 [PMID: 35925768]
278      12314  compound 27 [PMID: 36449304]
279      12643                   relutrigine
280      13107                        GNE684
281      13273                       AZD5462

[282 rows x 2 columns]
==================================================
Total test queries executed: 30
None empty output rate: 0.8666666666666667
Successful execution rate: 0.8666666666666667
Non empty test queries: 26

None count: 4
None IDs: 73, 66, 13, 78
Empty count: 0
Empty IDs: 
==================================================
