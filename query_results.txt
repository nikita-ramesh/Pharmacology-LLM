Test Set Evaluation Results

--- Processing Test Case 1 ---
Natural Language Query: What pharmacology data is there for UniProtKB ID Q8NEC5 and Q96P56?
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from interaction i, ligand l, object o where i.object_id in (select dl.object_id from database_link dl where dl.placeholder = 'Q8NEC5' or dl. placeholder =  'Q96P56' and dl.database_id in (select database_id from database where name ilike '%Uniprot%')) and i.ligand_id=l.ligand_id and i.object_id=o.object_id;
Generated SQL: SELECT 
    i.ligand_id,
    i.object_id,
    i.type,
    i.action,
    i.affinity_units,
    i.affinity_high,
    i.affinity_median,
    i.affinity_low,
    o.name AS target_name,
    l.name AS ligand_name
FROM 
    interaction i
JOIN 
    object o ON i.object_id = o.object_id
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    o.object_id IN (
        SELECT object_id 
        FROM database_link 
        WHERE database_id IN (SELECT database_id FROM database WHERE name = 'UniProtKB') 
        AND placeholder IN ('Q8NEC5', 'Q96P56')
    );

Expected SQL Results:
    ligand_id                    name               type  ...        action affinity affinity_units
0        4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.60          pIC50
1        1882         PGE<sub>1</sub>         Metabolite  ...  Full agonist     6.30          pEC50
2        5412  PGF<sub>1&alpha;</sub>         Metabolite  ...  Full agonist     6.30          pEC50
3        1883         PGE<sub>2</sub>         Metabolite  ...  Full agonist     6.30          pEC50
4        4212               HC-056456  Synthetic organic  ...          None     4.70          pIC50
5        2432           ruthenium red          Inorganic  ...    Inhibition     5.00          pIC50
6        2522              mibefradil  Synthetic organic  ...    Inhibition     4.50          pIC50
7        2440         Cd<sup>2+</sup>          Inorganic  ...    Inhibition     3.70          pIC50
8        4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.70          pIC50
9        2476         Ni<sup>2+</sup>          Inorganic  ...    Inhibition     3.50          pIC50
10       2377            progesterone         Metabolite  ...  Full agonist     8.11          pEC50
11       4269              NNC55-0396  Synthetic organic  ...    Inhibition     4.60          pIC50
12       2522              mibefradil  Synthetic organic  ...    Inhibition     4.50          pIC50
13       5412  PGF<sub>1&alpha;</sub>         Metabolite  ...  Full agonist     6.30          pEC50
14       1883         PGE<sub>2</sub>         Metabolite  ...  Full agonist     6.30          pEC50
15       1882         PGE<sub>1</sub>         Metabolite  ...  Full agonist     6.30          pEC50
16       2377            progesterone         Metabolite  ...  Full agonist     8.11          pEC50
17       2432           ruthenium red          Inorganic  ...    Antagonist     5.00          pIC50
18       4269              NNC55-0396  Synthetic organic  ...    Inhibition     5.70          pIC50
19       2440         Cd<sup>2+</sup>          Inorganic  ...    Inhibition     3.70          pIC50
20       2476         Ni<sup>2+</sup>          Inorganic  ...    Antagonist     3.50          pIC50

[21 rows x 9 columns]

Generated SQL Results:
    ligand_id  object_id             type  ... affinity_low target_name             ligand_name
0        4269        388  Channel blocker  ...          NaN    CatSper1              NNC55-0396
1        1882        388        Activator  ...          NaN    CatSper1         PGE<sub>1</sub>
2        5412        388        Activator  ...          NaN    CatSper1  PGF<sub>1&alpha;</sub>
3        1883        388        Activator  ...          NaN    CatSper1         PGE<sub>2</sub>
4        4212        388  Channel blocker  ...          NaN    CatSper1               HC-056456
5        2432        388  Channel blocker  ...          NaN    CatSper1           ruthenium red
6        2522        388  Channel blocker  ...          4.4    CatSper1              mibefradil
7        2440        388  Channel blocker  ...          NaN    CatSper1         Cd<sup>2+</sup>
8        4269        388  Channel blocker  ...          NaN    CatSper1              NNC55-0396
9        2476        388  Channel blocker  ...          NaN    CatSper1         Ni<sup>2+</sup>
10       2377        388        Activator  ...          8.0    CatSper1            progesterone
11       4269        389  Channel blocker  ...          NaN    CatSper2              NNC55-0396
12       2522        389  Channel blocker  ...          4.4    CatSper2              mibefradil
13       5412        389        Activator  ...          NaN    CatSper2  PGF<sub>1&alpha;</sub>
14       1883        389        Activator  ...          NaN    CatSper2         PGE<sub>2</sub>
15       1882        389        Activator  ...          NaN    CatSper2         PGE<sub>1</sub>
16       2377        389        Activator  ...          NaN    CatSper2            progesterone
17       2432        389  Channel blocker  ...          NaN    CatSper2           ruthenium red
18       4269        389  Channel blocker  ...          NaN    CatSper2              NNC55-0396
19       2440        389  Channel blocker  ...          NaN    CatSper2         Cd<sup>2+</sup>
20       2476        389  Channel blocker  ...          NaN    CatSper2         Ni<sup>2+</sup>

[21 rows x 10 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 2 ---
Natural Language Query: What selective agonists are there for chemokine receptors family members?
Expected SQL: select l.ligand_id, l.name, l.type, i.type, i.action, i.selective from interaction i, ligand l where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%chemokine receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%chemokine receptor%')))) and i.selective is true and i.type='Agonist' and i.ligand_id=l.ligand_id;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%chemokine receptors%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT o.object_id, o.name AS target_name, i.ligand_id, l.name AS ligand_name, i.affinity_units, i.type, i.selective,
    CASE 
        WHEN i.affinity_median IS NULL THEN
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity
FROM object o
JOIN interaction i ON o.object_id = i.object_id
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE o.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id FROM subfamilies
        UNION 
        SELECT family_id 
        FROM family 
        WHERE family_id IN (
            SELECT family_id
            FROM family
            WHERE name ILIKE '%chemokine receptors%'
        )
    )
) AND i.type = 'Agonist' AND i.selective = TRUE;

Expected SQL Results:
    ligand_id     name     type     type        action  selective
0         759     CCL7  Peptide  Agonist  Full agonist       True
1         817    CCL25  Peptide  Agonist  Full agonist       True
2         771     CCL2  Peptide  Agonist  Full agonist       True
3         753    CCL14  Peptide  Agonist  Full agonist       True
4         772     CCL8  Peptide  Agonist  Full agonist       True
..        ...      ...      ...      ...           ...        ...
72        773  HIV-Tat  Peptide  Agonist       Agonist       True
73       1272    CCL16  Peptide  Agonist  Full agonist       True
74        772     CCL8  Peptide  Agonist  Full agonist       True
75        810    CCL19  Peptide  Agonist       Agonist       True
76       3649    CCL28  Peptide  Agonist  Full agonist       True

[77 rows x 6 columns]

Generated SQL Results:
    object_id target_name  ligand_id ligand_name affinity_units     type  selective  affinity
0          58        CCR1        759        CCL7            pKi  Agonist       True       8.1
1          66        CCR9        817       CCL25              -  Agonist       True       NaN
2          62        CCR5        771        CCL2            pKi  Agonist       True       7.5
3          62        CCR5        753       CCL14            pKi  Agonist       True       7.2
4          59        CCR2        772        CCL8          pIC50  Agonist       True       8.6
..        ...         ...        ...         ...            ...      ...        ...       ...
72         59        CCR2        773     HIV-Tat              -  Agonist       True       NaN
73         59        CCR2       1272       CCL16              -  Agonist       True       NaN
74         60        CCR3        772        CCL8              -  Agonist       True       NaN
75        315       ACKR4        810       CCL19            pKi  Agonist       True       8.4
76         67       CCR10       3649       CCL28              -  Agonist       True       NaN

[77 rows x 8 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 3 ---
Natural Language Query: Which Lipinski compounds target Coronavirus proteins?
Expected SQL: select * from ligand where ligand_id in (select ligand_id from ligand_physchem where lipinski_s_rule_of_five = 0) and ligand_id in (select ligand_id from interaction where object_id in (select object_id from receptor2family rf where family_id in (select family_id from family where name = 'Coronavirus (CoV) proteins')));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name, lp.lipinski_s_rule_of_five 
FROM ligand l
JOIN ligand_physchem lp ON l.ligand_id = lp.ligand_id
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE lp.lipinski_s_rule_of_five = 0 
  AND o.name ILIKE '%coronavirus%' OR o.name ILIKE '%SARS-CoV%' OR o.name ILIKE '%MERS-CoV%';

Expected SQL Results:
    ligand_id  ... gtmp_comments_vector
0       12828  ...                     
1       11256  ...                     
2       12897  ...                     
3       10749  ...                     
4       12822  ...                     
..        ...  ...                  ...
63      12840  ...                     
64      13318  ...                     
65      11173  ...                     
66      11658  ...                     
67      11257  ...                     

[68 rows x 46 columns]

Generated SQL Results:
   ligand_id        name  lipinski_s_rule_of_five
0      10715  remdesivir                        2

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 4 ---
Natural Language Query: Find all of the pharmacological agents that are active in humans but not rats and mice
Expected SQL: select distinct i.ligand_id, (select name from ligand l where l.ligand_id=i.ligand_id) from interaction i where i.species_id in (select species_id from species where name = 'Human') and i.ligand_id not in (select ligand_id from interaction i where species_id in (select species_id from species where name = 'Rat')) and i.ligand_id not in (select ligand_id from interaction i where species_id in (select species_id from species where name = 'Mouse')) and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.species_id IN (SELECT species_id FROM species WHERE name = 'Human')
  AND i.ligand_id NOT IN (
    SELECT DISTINCT ligand_id
    FROM interaction
    WHERE species_id IN (
      SELECT species_id FROM species WHERE name IN ('Rat', 'Mouse')
    )
  );

Expected SQL Results:
      ligand_id                               name
0             1                         flesinoxan
1             6     7-methoxy-1-naphthylpiperazine
2             8                          BMY-14802
3            10                          BRL-15572
4            11                           CP 93129
...         ...                                ...
6860      13422  P2Y<sub>14</sub>R antagonist I-17
6861      13423      compound XVI [PMID: 38863440]
6862      13424                         PSB-KK1445
6863      13425                         PSB-KK1415
6864      13429   TYK2 inhibitor 18 [WO2023227946]

[6865 rows x 2 columns]

Generated SQL Results:
      ligand_id                               name
0             1                         flesinoxan
1             6     7-methoxy-1-naphthylpiperazine
2             8                          BMY-14802
3            10                          BRL-15572
4            11                           CP 93129
...         ...                                ...
7856      13422  P2Y<sub>14</sub>R antagonist I-17
7857      13423      compound XVI [PMID: 38863440]
7858      13424                         PSB-KK1445
7859      13425                         PSB-KK1415
7860      13429   TYK2 inhibitor 18 [WO2023227946]

[7861 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 5 ---
Natural Language Query: Find all patent references in the Guide that are post-2021?
Expected SQL: select article_title, year, url, patent_number, authors from reference where type='Patent' and year >= 2022;
Generated SQL: SELECT * FROM reference 
WHERE type ILIKE '%patent%' 
AND year > 2021;

Expected SQL Results:
                                        article_title  ...                                            authors
0                Methods of treating mutant lymphomas  ...                                           Walker D
1          Antimalarial hexahydropyrimidine analogues  ...   De Haro Garcia T, Frost JR, Lallemand B, Lowe MA
2   Aminocarbamoyl compounds for the treatment of ...  ...      Chen J, Liang C, Miao K, Wu Y, Yun H, Zhang W
3   Novel coronavirus main protease inhibitor, and...  ...                                       Yang S, Li L
4                 SARS-COV-2 MPRO INHIBITOR COMPOUNDS  ...  Congreve MS, Christopher JA, Pickworth M, De G...
5   Triazine derivative having virus propagation i...  ...  Tachibana Y, Uehara S, Unoh Y, Nakahara K, Tao...
6                                Fused ring compounds  ...                 Malhotra S, Xin J, Do S, Terrett J
7   Compound for inhibiting krasg12c mutant protei...  ...                                         Yu S, Li B
8                            Modulators of hemoglobin  ...                                               Li Z
9   Use of inhibitors of phosphatase activity of s...  ...                               Bellien J, Djerada Z
10                         Pyrrolopyrimidine compound  ...  Li Z, Xiao D, Hu Y, Dai L, Duan X, Sun Y, Peng...
11  Method and compound for use, in treating and/o...  ...               Kazmi SMI, Rajagopal S, Sivanandan D
12  A pi3k-delta inhibitor for use in treatment re...  ...  Pickering C, Van Der Veen L, Lahn M, Zorrilla ...
13                Anti-PCSK9 antibody and use thereof  ...  Tsun A, Krauland E, Belk JP, Maio X, Zhang M, ...
14            Phospholipid compounds and uses thereof  ...  Lazerwith SE, Medley JW, Morganelli PA, Stratt...
15  VIRUS MAIN PROTEASE INHIBITOR, PREPARATION MET...  ...  Shen Z, Li Y, Zhu J, Huang Q, Yin J, Xu Y, Wu ...
16  COMPOUND EXHIBITING PHYSIOLOGICAL ACTIVITY SUC...  ...                    Mitsuya H, Tamamura H, Kuwata N
17            Antiviral heteroaryl ketone derivatives  ...  Owen DR, Pettersson MY, Reese MR, Sammona MF, ...
18  3CL PROTEASE SMALL-MOLECULE INHIBITOR FOR TREA...  ...  Liu R, Xu Y, Hua L, Zhou J, Deng H, Chu X, Ding S
19     RNA VIRUS INHIBITOR COMPOUNDS AND USES THEREOF  ...  Nieman JA, Lemieux MJ, Tyrrell DL, Bai B, Belo...
20  Protacs targeting coronavirus 3CL protease and...  ...  Liang C, Xin L, Tian L, Xia J, Qin N, Li J, Qi...
21  Protacs based on VHL ligand targeting coronavi...  ...  Liang C, Xin L, Tian L, Xia J, Qin N, Li J, Qi...
22  SUBSTITUTED HYDANTOIN COMPOUNDS, METHODS FOR P...  ...     Carlsson J, Danielson H, Moodie L, Sandstrom A
23  Heteroaromatic macrocyclic ether chemotherapeu...  ...  Horan JC, Tang X, Mente SR, Pelish HE, Shair M...
24  Ezh2 inhibition in combination therapies for t...  ...                                         Bradley WD
25                              Combination therapies  ...  Daskalakis N, Gutte CD, Kwon MC, Ferrante LA, ...
26  Pharmaceutical compositions of a selective c-k...  ...                                 Keaney GF, Kwong E
27                       Cocrystal of a cdk inhibitor  ...       Bhat U, Bokalial R, badiger SE, Devanathan K
28  Certain chemical entities, compositions, and m...  ...                                             Qian X
29   Indolo heptamyl oxime analogue as parp inhibitor  ...   Hu Y, Li G, Sun F, Chi Z, Luo J, Ding CZ, Chen S
30  Prodrug modulators of the integrated stress pa...  ...  Martin KA, Sidrauski C, Dart MJ, Frost JM, Ton...
31                   Irak4 degraders and uses thereof  ...                                  Rong H, Enerson B
32             Nitrile-Containing Antiviral Compounds  ...  Owen DR, Reese MR, Sammons MF, Tuttle JB, Verh...
33  Small molecule inhibitors of mammalian slc6a19...  ...  Brown DG, Muncipinto G, Zweig JE, Hollibaugh R...
34  Compounds that inhibit pi3k isoform alpha and ...  ...                                       St. Jean DJR
35  Fatty acid amide hydrolase (faah) cleavable pr...  ...                   Stearns BA, Baccei JM, Harris JR
36  Methods of treating non-hodgkin lymphoma using...  ...  Anton MSC, Buchholz TJ, Lopez-Girona A, Narla ...
37  Triazolo-pyrimidine analogues for treating dis...  ...  Bordas V, Brun J, Decker A, Furegati M, Cognia...
38  Pyrimidine compounds, compositions, and medici...  ...  Hallar G, Madhyashta N, Stephen MR, Roth B, Pa...
39  Salt and crystal forms of an epidermal growth ...  ...          Gruff E, Kuang S, Pandey A, Shah H, Xie T
40  Phenylaminopyrimidine amide autophagy inhibito...  ...             Flynn DL, Ahn YM, Calswell T, Vogeti L
41  Methods of treating solid tumor using (19r)-5-...  ...  Green JA, Kropp JT, Noci D, Pelish HE, Porter ...
42  Use of wee1 kinase inhibitors in the treatment...  ...   Tian YE, Cai SX, Guo M, Hsieh CY, Wang R, Zhou R
43  Tricyclic janus kinase 1 inhibitors, and compo...  ...                                  Wan Z, Vazquez ML
44  Somatostatin receptor type 5 agonist for the t...  ...                         Ferrara-Cook C, Krasner AS
45  Chiral synthesis of fused bicyclic raf inhibitors  ...  Belfield A, Hawkins N, Glossop SC, Margathe JF...
46               Analogs for the treatment of disease  ...  Zavoronkovs A, Aliper A, Aladinsky V, Kukharen...
47            Purine derivatives as anticancer agents  ...                          Throner S, J&ouml;nsson D
48                    STAT degraders and uses thereof  ...                  Mainolfi N, Ji N, Yang B, Zhang Y
49  Gram-negative specific antibiotics sparing eff...  ...                          Hergenrother PJ, Muñoz KA
50        PCSK9 inhibitors and methods of use thereof  ...  Serrano-Wu MH, Chambers M, Goldsmith E, Tierne...
51                      Lincosamides and uses thereof  ...                          Myers AG, Wu K, Tresco BC
52                   Tyk2 inhibitors and uses thereof  ...  Pandey A, Dietsch G, Manojveer S, Thakkar M, D...

[53 rows x 5 columns]

Generated SQL Results:
    reference_id  ...                               article_title_vector
0          43420  ...       'lymphoma':5 'method':1 'mutant':4 'treat':3
1          43513  ...  'analogu':3 'antimalari':1 'hexahydropyrimidin':2
2          43544  ...  'aminocarbamoyl':1 'compound':2 'infect':8 'tr...
3          43815  ...  'coronavirus':2 'inhibitor':5 'main':3 'method...
4          43816  ...  '2':4 'compound':7 'cov':3 'inhibitor':6 'mpro...
5          43833  ...  'composit':10 'contain':11 'deriv':2 'effect':...
6          43901  ...                     'compound':3 'fuse':1 'ring':2
7          43903  ...  'compound':1 'inhibit':3 'krasg12c':4 'method'...
8          45928  ...                           'hemoglobin':3 'modul':1
9          44469  ...  'activ':6 'cardiometabol':14 'diseas':15 'epox...
10         44669  ...                  'compound':2 'pyrrolopyrimidin':1
11         44790  ...  'and/or':8 'compound':3 'method':1 'netosi':10...
12         44841  ...  'delta':4 'inhibitor':5 'pi3k':3 'pi3k-delta':...
13         45066  ...  'anti':2 'anti-pcsk9':1 'antibodi':4 'pcsk9':3...
14         45340  ...  'compound':2 'phospholipid':1 'thereof':5 'use':4
15         45341  ...  'inhibitor':4 'main':2 'method':6 'prepar':5 '...
16         45343  ...  'activ':4,8 'antivir':7 'compound':1 'exhibit'...
17         45345  ...     'antivir':1 'deriv':4 'heteroaryl':2 'keton':3
18         45346  ...  '3cl':1 'coronavirus':11 'infect':12 'inhibito...
19         45348  ...  'compound':4 'inhibitor':3 'rna':1 'thereof':7...
20         45349  ...  '3cl':4 'applic':10 'coronavirus':3 'method':8...
21         45350  ...  '3cl':8 'applic':14 'base':2 'coronavirus':7 '...
22         45347  ...  'and/or':14 'compound':3 'corona':18 'diseas':...
23         45451  ...  'agent':5 'chemotherapeut':4 'ether':3 'hetero...
24         45453  ...  'cancer':10 'combin':4 'ezh2':1 'inhibit':2 't...
25         45945  ...                             'combin':1 'therapi':2
26         45949  ...  'c':7 'c-kit':6 'composit':2 'inhibitor':10 'k...
27         45961  ...                  'cdk':4 'cocryst':1 'inhibitor':5
28         45964  ...  'certain':1 'chemic':2 'composit':4 'entiti':3...
29         45969  ...  'analogu':4 'heptamyl':2 'indolo':1 'inhibitor...
30         45970  ...  'integr':5 'modul':2 'pathway':7 'prodrug':1 '...
31         45987  ...           'degrad':2 'irak4':1 'thereof':5 'use':4
32         45996  ...  'antivir':4 'compound':5 'contain':3 'nitril':...
33         45999  ...  'function':7 'inhibitor':3 'mammalian':5 'mole...
34         46006  ...  'alpha':6 'cancer':11 'compound':1 'inhibit':3...
35         46235  ...  'acid':2 'amid':3 'cleavabl':6 'combin':11 'fa...
36         46336  ...  '-1':21,27 '-3':13 '-4':15,18 '2':9,10,16 '3':...
37         46340  ...  'analogu':4 'connect':8 'diseas':7 'helicas':1...
38         46477  ...  'applic':6 'composit':3 'compound':2 'medicin'...
39         46478  ...  'crystal':3 'epiderm':7 'factor':9 'form':4 'g...
40         47096  ...  'amid':2 'autophagi':3 'inhibitor':4 'method':...
41         47100  ...  '-1':30 '-10':14 '-16':12 '-20':17 '-22':44 '-...
42         47105  ...  'cancer':10 'inhibitor':5 'kinas':4 'treatment...
43         47110  ...  '1':4 'composit':7 'inhibitor':5 'janus':2 'ki...
44         47119  ...  '5':4 'agonist':5 'hyperinsulin':10 'receptor'...
45         47132  ...  'bicycl':5 'chiral':1 'fuse':4 'inhibitor':7 '...
46         47286  ...                'analog':1 'diseas':6 'treatment':4
47         47334  ...         'agent':5 'anticanc':4 'deriv':2 'purin':1
48         47581  ...            'degrad':2 'stat':1 'thereof':5 'use':4
49         47715  ...  'antibiot':5 'effect':7 'gram':2 'gram-neg':1 ...
50         47736  ...  'inhibitor':2 'method':4 'pcsk9':1 'thereof':7...
51         47782  ...                 'lincosamid':1 'thereof':4 'use':3
52         47783  ...         'inhibitor':2 'thereof':5 'tyk2':1 'use':4

[53 rows x 31 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 6 ---
Natural Language Query: What fraction of all targets with clinically approved drugs are targeted by a drug on the WHO essential medicines list?
Expected SQL: select (select count(distinct i.object_id)::decimal from interaction i where i.ligand_id in (select l.ligand_id from ligand l where l.who_essential is true and approved is true) and i.object_id is not null) / (select count(distinct i.object_id)::decimal from interaction i where i.ligand_id in (select l.ligand_id from ligand l where approved is true) and i.object_id is not null);
Generated SQL: WITH approved_drug_targets AS (
    SELECT DISTINCT object_id
    FROM interaction
    WHERE ligand_id IN (
        SELECT ligand_id
        FROM ligand
        WHERE approved IS TRUE
    )
),
who_essential_targets AS (
    SELECT DISTINCT object_id
    FROM interaction
    WHERE ligand_id IN (
        SELECT ligand_id
        FROM ligand
        WHERE who_essential IS TRUE
    )
)
SELECT COUNT(wet.object_id)::decimal / COUNT(adt.object_id) AS fraction_who_essential
FROM approved_drug_targets adt
LEFT JOIN who_essential_targets wet ON adt.object_id = wet.object_id;

Expected SQL Results:
   ?column?
0  0.403646

Generated SQL Results:
   fraction_who_essential
0                 0.40625

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 7 ---
Natural Language Query: Which compounds have a role in acute lymphocytic leukemia?
Expected SQL: select idl.ligand_id, l.name, idl.comment, d.name from immuno_disease2ligand idl, ligand l, disease d where idl.disease_id in (select disease_id from disease where (name ilike '%acute lymphocytic leukemia%') or (name ilike 'ALL') union select disease_id from disease2synonym where (synonym ilike '%acute lymphocytic leukemia%') or (synonym ilike 'ALL')) and idl.ligand_id=l.ligand_id and d.disease_id=idl.disease_id;
Generated SQL: SELECT idl.ligand_id, l.name, idl.comment, d.name 
FROM immuno_disease2ligand idl
JOIN ligand l ON idl.ligand_id = l.ligand_id
JOIN disease d ON idl.disease_id = d.disease_id
WHERE idl.disease_id IN (
    SELECT disease_id FROM disease WHERE name ILIKE '%acute lymphocytic leukemia%'
    UNION
    SELECT disease_id FROM disease2synonym WHERE synonym ILIKE '%acute lymphocytic leukemia%'
);

Expected SQL Results:
   ligand_id  ...                              name
0       8266  ...  Acute lymphocytic leukemia (ALL)
1       7384  ...  Acute lymphocytic leukemia (ALL)

[2 rows x 4 columns]

Generated SQL Results:
   ligand_id  ...                              name
0       8266  ...  Acute lymphocytic leukemia (ALL)
1       7384  ...  Acute lymphocytic leukemia (ALL)

[2 rows x 4 columns]

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 8 ---
Natural Language Query: What peptides, that have pharmacology in humans, also have amino-acid sequence data in the Guide?
Expected SQL: select * from grac_family_text gft where gft.family_id in (select family_id from family where name ilike '%Voltage-gated ion channels%');
Generated SQL: SELECT p.ligand_id, l.name, p.one_letter_seq, p.three_letter_seq
FROM peptide p
JOIN ligand l ON p.ligand_id = l.ligand_id
WHERE p.ligand_id IN (
    SELECT DISTINCT i.ligand_id 
    FROM interaction i 
    WHERE i.species_id IN (
        SELECT species_id 
        FROM species 
        WHERE name = 'Human'
    )
);

Expected SQL Results:
   family_id  ...                                    comments_vector
0        696  ...  'across':18 'addit':184 'adp':31 'anion':5 'ap...

[1 rows x 6 columns]

Generated SQL Results:
      ligand_id  ...                                   three_letter_seq
0          2005  ...  c[<i>Aha</i>-Lys-Asn-Phe-Phe-Trp-Lys-Thr-Tyr-T...
1         10588  ...  Asp-Trp-Leu-Lys-Ala-Phe-Tyr-Asp-Lys-Val-Ala-Gl...
2         10609  ...                                                   
3         10684  ...  Lys-Cys-Asn-Thr-Ala-Thr-Cys-Val-Leu-Gly-Arg-Le...
4         11026  ...                                                   
...         ...  ...                                                ...
1867      13330  ...                                                   
1868      13331  ...                                                   
1869      13403  ...                                                   
1870      13381  ...                                  Ac-Leu-Leu-Nle-al
1871      13383  ...                                                   

[1872 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 9 ---
Natural Language Query: What should I use to inhibit TLR7 in cultured cells, and at what concentration?  
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%TLR7%')) union select object_id from object where name ilike '%TLR7%') and l.ligand_id=i.ligand_id and i.type in ('Channel blocker','Gating inhibitor','Inhibitor','Antagonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT l.ligand_id, l.name, 
       CASE 
           WHEN i.affinity_median IS NULL THEN 
               CASE 
                   WHEN i.affinity_high IS NULL THEN i.affinity_low 
                   ELSE i.affinity_high 
               END 
           ELSE i.affinity_median 
       END AS affinity, 
       i.affinity_units, i.type, i.action 
FROM ligand l 
JOIN interaction i ON l.ligand_id = i.ligand_id 
WHERE i.object_id IN (
    SELECT o.object_id 
    FROM object o
    LEFT JOIN synonym s ON o.object_id = s.object_id
    WHERE o.name ILIKE '%TLR7%' 
          OR o.abbreviation ILIKE '%TLR7%' 
          OR s.synonym ILIKE '%TLR7%'
) 
AND i.type IN ('Inhibitor', 'Antagonist', 'Gating inhibitor', 'Channel blocker') 
AND ((i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
     OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != ''))
ORDER BY affinity DESC;

Expected SQL Results:
   ligand_id                           name  affinity affinity_units        type      action
0       7198             hydroxychloroquine      5.56          pIC50  Antagonist  Antagonist
1      10435  compound 10a [PMID: 31283223]      5.09          pIC50  Antagonist  Antagonist
2      11307                      enpatoran      6.00          pIC50  Antagonist  Antagonist

Generated SQL Results:
   ligand_id                           name  affinity affinity_units        type      action
0      11307                      enpatoran      6.00          pIC50  Antagonist  Antagonist
1       7198             hydroxychloroquine      5.56          pIC50  Antagonist  Antagonist
2      10435  compound 10a [PMID: 31283223]      5.09          pIC50  Antagonist  Antagonist

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 10 ---
Natural Language Query: What antibacterial compounds are in the database?
Expected SQL: select ligand_id, name, gtmp_comments  from ligand where antibacterial is true;
Generated SQL: SELECT ligand_id, name 
FROM ligand 
WHERE antibacterial IS TRUE;

Expected SQL Results:
     ligand_id                 name gtmp_comments
0        11015      rancinamycin IA              
1         5155         caffeic acid              
2        10992  dihydroxybenzofuran              
3        12928        dirithromycin              
4         3431                 AHPN              
..         ...                  ...           ...
558      11753              ETX0462              
559      12397        azidamfenicol              
560      12772            sutezolid              
561      12921          sarecycline              
562      12923          florfenicol              

[563 rows x 3 columns]

Generated SQL Results:
     ligand_id                 name
0        11015      rancinamycin IA
1         5155         caffeic acid
2        10992  dihydroxybenzofuran
3        12928        dirithromycin
4         3431                 AHPN
..         ...                  ...
558      11753              ETX0462
559      12397        azidamfenicol
560      12772            sutezolid
561      12921          sarecycline
562      12923          florfenicol

[563 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 11 ---
Natural Language Query: Which antibodies have clinical trials data in GtoPdb?
Expected SQL: select l.ligand_id, l.name, l.approved, ct.title, ct.accession from ligand l right join ligand2clinical_trial lct2 on l.ligand_id=lct2.ligand_id left join clinical_trial ct on lct2.clinical_trial_id=ct.clinical_trial_id  where l.type = 'Antibody';
Generated SQL: SELECT l.ligand_id, l.name 
FROM ligand l 
JOIN ligand2clinical_trial lct ON l.ligand_id = lct.ligand_id 
WHERE l.type = 'Antibody';

Expected SQL Results:
     ligand_id         name  approved                                              title    accession
0         6773  canakinumab      True  Cardiovascular Risk Reduction Study (Reduction...  NCT01327846
1         6771  bevacizumab      True  AURELIA: A Study of Avastin (Bevacizumab) Adde...  NCT00976911
2         6771  bevacizumab      True  Study of Nivolumab (BMS-936558) in Combination...  NCT01454102
3         6771  bevacizumab      True  Ipilimumab With or Without Bevacizumab in Trea...  NCT01950390
4         6771  bevacizumab      True  Efficacy and Safety Study of ABP 215 Compared ...  NCT01966003
..         ...          ...       ...                                                ...          ...
573      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT05075824
574      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT04958265
575      12790   crovalimab      True  A Study Evaluating the Efficacy, Safety, Pharm...  NCT04654468
576      12790   crovalimab      True  A Phase III Study Evaluating the Efficacy and ...  NCT04434092
577      13362  tosatoxumab     False  Safety, Pharmacokinetics and Efficacy of KBSA3...  NCT01589185

[578 rows x 5 columns]

Generated SQL Results:
     ligand_id         name
0         6773  canakinumab
1         6771  bevacizumab
2         6771  bevacizumab
3         6771  bevacizumab
4         6771  bevacizumab
..         ...          ...
573      12790   crovalimab
574      12790   crovalimab
575      12790   crovalimab
576      12790   crovalimab
577      13362  tosatoxumab

[578 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 12 ---
Natural Language Query: List chemical structures for SARS Cov2 MPro that have pAct > 7 and order these high to low
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, ls.isomeric_smiles, ls.isomeric_standard_inchi_key  from interaction i, ligand l, object o, ligand_structure ls where i.object_id in (select object_id from object where name ilike '%SARS-CoV-2%' or abbreviation ilike '%SARS-CoV-2%' union select object_id from synonym where synonym ilike '%SARS-CoV-2%') and i.ligand_id=l.ligand_id and i.object_id=o.object_id and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low > 7 else i.affinity_high >7  end else i.affinity_median > 7 end and l.ligand_id=ls.ligand_id order by affinity desc;
Generated SQL: SELECT l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi, ls.isomeric_standard_inchi_key, i.type, i.action, 
CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low 
            ELSE i.affinity_high 
        END 
    ELSE i.affinity_median 
END AS affinity, 
i.affinity_units 
FROM interaction i 
JOIN ligand l ON i.ligand_id = l.ligand_id 
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id 
WHERE i.object_id IN (
    SELECT object_id 
    FROM object 
    WHERE name ILIKE '%SARS-CoV-2%' 
    OR abbreviation ILIKE '%SARS-CoV-2%' 
    UNION 
    SELECT object_id 
    FROM synonym 
    WHERE synonym ILIKE '%SARS-CoV-2%'
) 
AND CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low > 7 
            ELSE i.affinity_high > 7 
        END 
    ELSE i.affinity_median > 7 
END 
ORDER BY affinity DESC;

Expected SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0       11503  ...  LIENCHBZNNMNKG-OJFNHCPVSA-N
1       12593  ...  PKJWLVLOGHATRZ-NWVWQQAFSA-N
2       12590  ...  BLEQBWYJEGYQCM-TXWIUQIISA-N
3       12958  ...  BNMFQWUHWYJTRI-BQFCYCMXSA-N
4       12897  ...  WGNWEPPRWQKSKI-AIEDFZFUSA-N
..        ...  ...                          ...
87      10883  ...  BSPZFJDYQHDZNR-ASPXRTSYSA-N
88      12602  ...  BPLNOSFMIIASSJ-UXHICEINSA-N
89      11903  ...  XQFMLNUPNCXPRN-UHFFFAOYSA-N
90      12227  ...  FRAUGLSYTUOOAF-FQEVSTJZSA-N
91      11630  ...  KSCRVOKQPYZBHZ-IXPOFIJOSA-N

[92 rows x 11 columns]

Generated SQL Results:
    ligand_id                          name  ... affinity affinity_units
0       11503                  nirmatrelvir  ...     9.57            pKi
1       12593     compound 6 [WO2022133588]  ...     9.00          pIC50
2       12590     example 18 [WO2022013684]  ...     8.81          pIC50
3       12958                   pomotrelvir  ...     8.57            pKi
4       12897                  ibuzatrelvir  ...     8.52            pKi
..        ...                           ...  ...      ...            ...
87      10883                        GC-376  ...     7.14          pIC50
88      12602                         WU-04  ...     7.14          pIC50
89      11903  compound 19 [PMID: 35142215]  ...     7.11          pIC50
90      12227            PET-UNK-29afea89-2  ...     7.10          pIC50
91      11630  compound 2i [PMID: 23245752]  ...     7.03          pIC50

[92 rows x 9 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 13 ---
Natural Language Query: Find all immune checkpoint ligands
Expected SQL: select ligand_id, name, type from ligand where ligand_id in (select ligand_id from ligand2family lf where lf.family_id in (select family_id from family where name ilike '%immune checkpoint modulators%' and type='ligand')); 
Generated SQL: WITH RECURSIVE immune_checkpoint_families AS (
    SELECT family_id
    FROM family
    WHERE name ILIKE '%immune checkpoint%'
    UNION
    SELECT e.group_id
    FROM grouping e
    INNER JOIN immune_checkpoint_families icf ON icf.family_id = e.family_id
)
SELECT l.ligand_id, l.name
FROM ligand l
WHERE l.ligand_id IN (
    SELECT DISTINCT i.ligand_id
    FROM interaction i
    WHERE i.object_id IN (
        SELECT object_id 
        FROM receptor2family 
        WHERE family_id IN (SELECT family_id FROM immune_checkpoint_families)
    )
);

Expected SQL Results:
    ligand_id                              name      type
0       10090                        cemiplimab  Antibody
1        9434             vadastuximab talirine  Antibody
2        8460                   lulizumab pegol  Antibody
3        6891                         abatacept   Peptide
4        8462                      tremelimumab  Antibody
5       11583                      retifanlimab  Antibody
6        6888                        ipilimumab  Antibody
7       12342                       sugemalimab  Antibody
8        7499                     pembrolizumab  Antibody
9       12349                      zimberelimab  Antibody
10       9606  programmed cell death 1 ligand 1   Peptide
11      12347                        penpulimab  Antibody
12       7990                      atezolizumab  Antibody
13      11518                       dostarlimab  Antibody
14       8266             inotuzumab ozogamicin  Antibody
15       6892                        belatacept   Peptide
16      11649                       feladilimab  Antibody
17       9592                      tislelizumab  Antibody
18       8735                          avelumab  Antibody
19       6775             gemtuzumab ozogamicin  Antibody
20       7985                        durvalumab  Antibody
21       9536                        relatlimab  Antibody
22       7335                         nivolumab  Antibody
23       7983                        lintuzumab  Antibody
24       7675             moxetumomab pasudotox  Antibody

Generated SQL Results:
    ligand_id                              name
0        4891     B and T lymphocyte attenuator
1        5077                       CD40 ligand
2       11583                      retifanlimab
3        5070                             LIGHT
4       13396                       ivonescimab
5        8266             inotuzumab ozogamicin
6       12992                         nurulimab
7       12991                       prolgolimab
8       12347                        penpulimab
9        5064               lymphotoxin-&alpha;
10       8460                   lulizumab pegol
11      11649                       feladilimab
12       9434             vadastuximab talirine
13       9606  programmed cell death 1 ligand 1
14      10117                           AUNP-12
15       7499                     pembrolizumab
16      10140                     spartalizumab
17      10090                        cemiplimab
18      12586                      obrindatamab
19      12966                       cadonilimab
20      12989                       toripalimab
21      12990                        sintilimab
22      12349                      zimberelimab
23      11518                       dostarlimab
24       9536                        relatlimab
25      12361                       sabatolimab
26       6775             gemtuzumab ozogamicin
27       6891                         abatacept
28       6888                        ipilimumab
29       6892                        belatacept
30       7335                         nivolumab
31       7675             moxetumomab pasudotox
32       7983                        lintuzumab
33       8462                      tremelimumab
34       9802                            CFZ533
35       9589                     enoblituzumab
36       9592                      tislelizumab

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 14 ---
Natural Language Query: Which ligands have interaction data in the plasmodium asexual blood stage 
Expected SQL: select ligand_id, l.name from ligand l where l.ligand_id in (select i.ligand_id from interaction i, malaria_stage2interaction msi where msi.interaction_id=i.interaction_id and msi.malaria_stage_id in (select malaria_stage_id from malaria_stage where name ilike '%asexual blood stage%'));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
WHERE i.interaction_id IN (
    SELECT malaria_stage2interaction.interaction_id
    FROM malaria_stage2interaction
    WHERE malaria_stage_id IN (
        SELECT malaria_stage_id 
        FROM malaria_stage 
        WHERE name ILIKE '%asexual blood stage%'
    )
);

Expected SQL Results:
     ligand_id                           name
0         9723                      (+)-SJ733
1        10617   compound 28 [PMID: 31188540]
2        10085                        AN13762
3        10320                          Lys01
4         9971                    artefenomel
..         ...                            ...
111      11219                         DSM502
112      10418  compound 49c [PMID: 29074775]
113       5535                    chloroquine
114       9722                    tafenoquine
115      11201                      MMV030084

[116 rows x 2 columns]

Generated SQL Results:
     ligand_id                           name
0         4252                     mefloquine
1         4800                  pyrimethamine
2         5215                       luteolin
3         5535                    chloroquine
4         6391                     bortezomib
..         ...                            ...
111      11926  compound VII [WO2021149692A1]
112      11928   compound 1a [WO2021204952A1]
113      11929                         INE963
114      11933    compound 4 [WO2022008639A1]
115      11945                           JX35

[116 rows x 2 columns]

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 15 ---
Natural Language Query: Find NHRs that have quantitiative interaction data?
Expected SQL: select o.object_id, o.name as name from object o  where o.object_id in (select object_id from receptor2family where family_id in (WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Nuclear hormone receptors%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id)) and o.object_id in (select i.object_id from interaction i where ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')))group by o.object_id;
Generated SQL: SELECT o.object_id, o.name 
FROM object o 
WHERE o.object_id IN (SELECT object_id FROM nhr) 
AND o.object_id IN (
    SELECT DISTINCT object_id 
    FROM interaction 
    WHERE ((affinity_units IS NOT NULL AND affinity_units != '-') 
    OR (original_affinity_units IS NOT NULL AND original_affinity_units != '-') 
    OR (concentration_range IS NOT NULL AND concentration_range != '-' AND concentration_range != ''))
);

Expected SQL Results:
    object_id                                               name
0         632                             Steroidogenic factor 1
1         596                                    Rev-Erb-&alpha;
2         607                   Constitutive androstane receptor
3         589                    Thyroid hormone receptor-&beta;
4         629                             Nerve Growth factor IB
5         593  Peroxisome proliferator-activated receptor-&al...
6         626                         Mineralocorticoid receptor
7         624                  Estrogen-related receptor-&gamma;
8         611                         Retinoid X receptor-&beta;
9         621                           Estrogen receptor-&beta;
10        627                              Progesterone receptor
11        606                                Pregnane X receptor
12        614                              Testicular receptor 4
13        599                 RAR-related orphan receptor-&beta;
14        631                   Neuron-derived orphan receptor 1
15        595  Peroxisome proliferator-activated receptor-&ga...
16        597                                     Rev-Erb-&beta;
17        623                   Estrogen-related receptor-&beta;
18        633                           Liver receptor homolog-1
19        630                         Nuclear receptor related 1
20        592                     Retinoic acid receptor-&gamma;
21        622                  Estrogen-related receptor-&alpha;
22        620                          Estrogen receptor-&alpha;
23        598                RAR-related orphan receptor-&alpha;
24        588                   Thyroid hormone receptor-&alpha;
25        628                                  Androgen receptor
26        612                        Retinoid X receptor-&gamma;
27        625                            Glucocorticoid receptor
28        605                                 Vitamin D receptor
29        602                           Liver X receptor-&alpha;
30        604                        Farnesoid X receptor-&beta;
31        636                                                SHP
32        600                RAR-related orphan receptor-&gamma;
33        603                               Farnesoid X receptor
34        591                      Retinoic acid receptor-&beta;
35        615                                                TLX
36        601                            Liver X receptor-&beta;
37        590                     Retinoic acid receptor-&alpha;
38        610                        Retinoid X receptor-&alpha;
39        594  Peroxisome proliferator-activated receptor-&be...

Generated SQL Results:
    object_id                                               name
0         632                             Steroidogenic factor 1
1         596                                    Rev-Erb-&alpha;
2         589                    Thyroid hormone receptor-&beta;
3         629                             Nerve Growth factor IB
4         624                  Estrogen-related receptor-&gamma;
5         611                         Retinoid X receptor-&beta;
6         621                           Estrogen receptor-&beta;
7         627                              Progesterone receptor
8         606                                Pregnane X receptor
9         614                              Testicular receptor 4
10        631                   Neuron-derived orphan receptor 1
11        595  Peroxisome proliferator-activated receptor-&ga...
12        623                   Estrogen-related receptor-&beta;
13        633                           Liver receptor homolog-1
14        592                     Retinoic acid receptor-&gamma;
15        598                RAR-related orphan receptor-&alpha;
16        628                                  Androgen receptor
17        625                            Glucocorticoid receptor
18        605                                 Vitamin D receptor
19        600                RAR-related orphan receptor-&gamma;
20        591                      Retinoic acid receptor-&beta;
21        615                                                TLX
22        601                            Liver X receptor-&beta;
23        590                     Retinoic acid receptor-&alpha;
24        610                        Retinoid X receptor-&alpha;
25        594  Peroxisome proliferator-activated receptor-&be...
26        607                   Constitutive androstane receptor
27        593  Peroxisome proliferator-activated receptor-&al...
28        626                         Mineralocorticoid receptor
29        599                 RAR-related orphan receptor-&beta;
30        597                                     Rev-Erb-&beta;
31        630                         Nuclear receptor related 1
32        622                  Estrogen-related receptor-&alpha;
33        620                          Estrogen receptor-&alpha;
34        588                   Thyroid hormone receptor-&alpha;
35        612                        Retinoid X receptor-&gamma;
36        602                           Liver X receptor-&alpha;
37        604                        Farnesoid X receptor-&beta;
38        636                                                SHP
39        603                               Farnesoid X receptor

Execution Accuracy: True
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 16 ---
Natural Language Query: Which compounds act as both agonists and antagonists against GPCRs?
Expected SQL: select l.ligand_id, l.name from ligand l, interaction i where i.object_id in (select object_id from gpcr) and l.ligand_id=i.ligand_id and i.type in ('Antagonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select l.ligand_id, l.name from ligand l, interaction i where i.object_id in (select object_id from gpcr) and l.ligand_id=i.ligand_id and i.type in ('Agonist') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT l.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM gpcr
)
AND l.ligand_id IN (
    SELECT agonist.ligand_id
    FROM interaction agonist
    WHERE agonist.type = 'Agonist' AND agonist.object_id IN (
        SELECT object_id 
        FROM gpcr
    )
)
AND l.ligand_id IN (
    SELECT antagonist.ligand_id
    FROM interaction antagonist
    WHERE antagonist.type = 'Antagonist' AND antagonist.object_id IN (
        SELECT object_id 
        FROM gpcr
    )
);

Expected SQL Results:
     ligand_id          name
0         1628     nalmefene
1          502  phentolamine
2           14     GR 127935
3           54   sumatriptan
4        11614      LY395756
..         ...           ...
125        224     melatonin
126         49     piribedil
127         91      pindolol
128       2909      VPC12249
129          9      BMY-7378

[130 rows x 2 columns]

Generated SQL Results:
     ligand_id                     name
0            3     1-naphthylpiperazine
1            9                 BMY-7378
2           14                GR 127935
3           16                L-772,405
4           22                asenapine
..         ...                      ...
134      11614                 LY395756
135      12165                 CHF-6366
136      12570                  ST-1505
137      12571                  ST-1478
138      13316  maridebart cafraglutide

[139 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 17 ---
Natural Language Query: Which channel blockers act against Ryanodine receptors?
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%Ryanodine%')) union select object_id from object where name ilike '%Ryanodine%') and l.ligand_id=i.ligand_id and i.type in ('Channel blocker');
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id
    FROM grouping
    WHERE group_id IN (
        SELECT family_id
        FROM family
        WHERE name ILIKE '%Ryanodine receptors%'
    )
    UNION
    SELECT e.group_id, e.family_id
    FROM grouping e
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT l.ligand_id, l.name, i.affinity_units, i.affinity_high, i.affinity_median, i.affinity_low
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.type = 'Channel blocker'
AND i.object_id IN (
    SELECT object_id
    FROM receptor2family
    WHERE family_id IN (
        SELECT family_id
        FROM subfamilies
    UNION
    SELECT family_id
    FROM family
    WHERE name ILIKE '%Ryanodine receptors%'
    )
);

Expected SQL Results:
   ligand_id           name affinity affinity_units             type action
0       4291       procaine     None              -  Channel blocker   None
1       4303      ryanodine     None              -  Channel blocker   None
2       2432  ruthenium red     None              -  Channel blocker   None
3       2432  ruthenium red     None              -  Channel blocker   None
4       4291       procaine     None              -  Channel blocker   None
5       4303      ryanodine     None              -  Channel blocker   None
6       2432  ruthenium red     None              -  Channel blocker   None

Generated SQL Results:
   ligand_id           name affinity_units affinity_high affinity_median affinity_low
0       2432  ruthenium red              -          None            None         None
1       2432  ruthenium red              -          None            None         None
2       4291       procaine              -          None            None         None
3       4291       procaine              -          None            None         None
4       4303      ryanodine              -          None            None         None
5       4303      ryanodine              -          None            None         None
6       2432  ruthenium red              -          None            None         None

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 18 ---
Natural Language Query: Find pKi value, above 6, for Ion Channel approved drugs
Expected SQL: select l.ligand_id, l.name, l.type, o.object_id, o.name, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from interaction i, ligand l, object o where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike 'Ion channels') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike 'Ion channels')))) and i.ligand_id=l.ligand_id and i.object_id=o.object_id and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low > 6 else i.affinity_high >6  end else i.affinity_median > 6  end and i.affinity_units = 'pKi' and l.approved is true order by affinity desc;
Generated SQL: SELECT i.ligand_id, l.name, i.affinity_units, 
CASE 
    WHEN i.affinity_median IS NULL THEN 
        CASE 
            WHEN i.affinity_high IS NULL THEN i.affinity_low 
            ELSE i.affinity_high 
        END 
    ELSE i.affinity_median 
END AS affinity 
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.object_id IN (SELECT object_id FROM vgic)
AND l.approved IS TRUE
AND i.affinity_units = 'pKi'
AND (
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END
) > 6;

Expected SQL Results:
    ligand_id            name               type  ...           action affinity affinity_units
0        7486    palonosetron  Synthetic organic  ...       Antagonist    10.49            pKi
1        5459     varenicline  Synthetic organic  ...          Agonist    10.40            pKi
2        5459     varenicline  Synthetic organic  ...          Agonist     9.96            pKi
3        2296       alosetron  Synthetic organic  ...       Antagonist     9.50            pKi
4        7313       triazolam  Synthetic organic  ...         Positive     9.23            pKi
5        4192      flumazenil  Synthetic organic  ...             None     9.22            pKi
6        4192      flumazenil  Synthetic organic  ...       Antagonist     9.10            pKi
7        7313       triazolam  Synthetic organic  ...         Positive     9.10            pKi
8        4192      flumazenil  Synthetic organic  ...             None     9.05            pKi
9        4192      flumazenil  Synthetic organic  ...             None     8.98            pKi
10       6963      clonazepam  Synthetic organic  ...         Positive     8.90            pKi
11       7313       triazolam  Synthetic organic  ...         Positive     8.84            pKi
12       7313       triazolam  Synthetic organic  ...         Positive     8.81            pKi
13       2300     granisetron  Synthetic organic  ...       Antagonist     8.80            pKi
14        260     tropisetron  Synthetic organic  ...       Antagonist     8.80            pKi
15       6963      clonazepam  Synthetic organic  ...         Positive     8.77            pKi
16       6963      clonazepam  Synthetic organic  ...         Positive     8.70            pKi
17       2585        nicotine  Synthetic organic  ...          Agonist     8.66            pKi
18       2285       azasetron  Synthetic organic  ...       Antagonist     8.50            pKi
19       7351    vortioxetine  Synthetic organic  ...       Antagonist     8.43            pKi
20       2285       azasetron  Synthetic organic  ...       Antagonist     8.40            pKi
21       4190      felodipine  Synthetic organic  ...     Potentiation     8.40            pKi
22       2290     ondansetron  Synthetic organic  ...       Antagonist     8.30            pKi
23       4193   flunitrazepam  Synthetic organic  ...         Positive     8.28            pKi
24       4193   flunitrazepam  Synthetic organic  ...         Positive     8.28            pKi
25       4193   flunitrazepam  Synthetic organic  ...         Positive     8.26            pKi
26       2604      dofetilide  Synthetic organic  ...       Inhibition     8.19            pKi
27       4193   flunitrazepam  Synthetic organic  ...         Positive     7.80            pKi
28       2290     ondansetron  Synthetic organic  ...       Antagonist     7.80            pKi
29       3364        diazepam  Synthetic organic  ...         Positive     7.79            pKi
30       3364        diazepam  Synthetic organic  ...         Positive     7.77            pKi
31       3364        diazepam  Synthetic organic  ...         Positive     7.77            pKi
32       4348        zolpidem  Synthetic organic  ...         Positive     7.68            pKi
33       5459     varenicline  Synthetic organic  ...          Agonist     7.40            pKi
34       2294    tubocurarine    Natural product  ...       Antagonist     7.10            pKi
35       4192      flumazenil  Synthetic organic  ...         Positive     7.03            pKi
36       4192      flumazenil  Synthetic organic  ...  Partial agonist     6.83            pKi
37        241  metoclopramide  Synthetic organic  ...       Antagonist     6.45            pKi
38       4253       memantine  Synthetic organic  ...       Antagonist     6.15            pKi
39       4348        zolpidem  Synthetic organic  ...         Positive     6.12            pKi

[40 rows x 9 columns]

Generated SQL Results:
   ligand_id        name affinity_units  affinity
0       2604  dofetilide            pKi      8.19

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 19 ---
Natural Language Query: Find drugs for which calcitonin receptors are a primary target?
Expected SQL: select l.ligand_id, l.name, l.type, i.type, i.action, i.primary_target, i.object_id, o.name from interaction i, ligand l, object o where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%calcitonin receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%calcitonin receptor%')))) and i.primary_target is true and i.ligand_id=l.ligand_id and i.object_id=o.object_id;
Generated SQL: SELECT 
    l.ligand_id, 
    l.name, 
    i.affinity_units, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    i.primary_target IS TRUE 
    AND i.object_id IN (
        SELECT object_id 
        FROM object 
        WHERE name ILIKE '%calcitonin receptor%'
    );

Expected SQL Results:
   ligand_id                 name               type  ... primary_target object_id           name
0        685           calcitonin            Peptide  ...           True        43    CT receptor
1       9250             erenumab           Antibody  ...           True        48  CGRP receptor
2       6973  calcitonin (salmon)            Peptide  ...           True        43    CT receptor
3      10704           rimegepant  Synthetic organic  ...           True        48  CGRP receptor

[4 rows x 8 columns]

Generated SQL Results:
Empty DataFrame
Columns: [ligand_id, name, affinity_units, affinity]
Index: []

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 20 ---
Natural Language Query: Which compounds, that also have ChEMBL Ligand IDs, target dopamine receptors?
Expected SQL: select distinct l.ligand_id, l.name, ldl.placeholder, l.type from interaction i, ligand l, ligand_database_link ldl where i.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in ((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%dopamine receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%dopamine receptor%')))) and i.ligand_id=ldl.ligand_id and i.ligand_id=l.ligand_id and ldl.database_id=33;
Generated SQL: SELECT l.ligand_id, l.name, ldl.placeholder AS chembl_ligand_id
FROM ligand l
JOIN ligand_database_link ldl ON l.ligand_id = ldl.ligand_id
WHERE ldl.database_id IN (SELECT database_id FROM database WHERE name = 'ChEMBL Ligand')
AND l.ligand_id IN (
    SELECT i.ligand_id
    FROM interaction i
    WHERE i.object_id IN (
        SELECT object_id
        FROM receptor2family
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id FROM grouping WHERE group_id IN (
                    SELECT family_id FROM family WHERE name ILIKE '%dopamine receptors%'
                )
                UNION
                SELECT e.group_id, e.family_id FROM grouping e
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            )
            SELECT family_id FROM subfamilies
            UNION
            SELECT family_id FROM family WHERE name ILIKE '%dopamine receptors%'
        )
    )
);

Expected SQL Results:
     ligand_id                     name    placeholder               type
0         9072              cinnarizine    CHEMBL43064  Synthetic organic
1         5501                sulpiride       CHEMBL26  Synthetic organic
2         8369                  MLS1547  CHEMBL1606583  Synthetic organic
3         3304                 ecopipam   CHEMBL298406  Synthetic organic
4           88               ketanserin       CHEMBL51  Synthetic organic
..         ...                      ...            ...                ...
124        241           metoclopramide       CHEMBL86  Synthetic organic
125       9099             lumateperone  CHEMBL3545045  Synthetic organic
126        205                 loxapine      CHEMBL831  Synthetic organic
127       3298  [<sup>3</sup>H]PD128907    CHEMBL97424  Synthetic organic
128         96              risperidone       CHEMBL85  Synthetic organic

[129 rows x 4 columns]

Generated SQL Results:
     ligand_id            name chembl_ligand_id
0           44     nafadotride     CHEMBL286252
1          944       SKF-83566     CHEMBL324017
2          948     flupentixol      CHEMBL54661
3           99       spiperone     CHEMBL267930
4           88      ketanserin         CHEMBL51
..         ...             ...              ...
124       7651         UNC0006    CHEMBL2165126
125       8441        A-381393     CHEMBL127257
126       8434           LP-12     CHEMBL243954
127         83  chlorpromazine         CHEMBL71
128       7227    mesoridazine       CHEMBL1088

[129 rows x 3 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 21 ---
Natural Language Query: Are there any approved drugs with unclear bioactivity or molecular mechanisms of action?
Expected SQL: select distinct l.ligand_id, l.name, l.approved, l.comments, l.bioactivity_comments, l.mechanism_of_action, l.clinical_use from ligand l where l.approved is true and ((l.mechanism_of_action is null or l.mechanism_of_action = '') AND (l.bioactivity_comments  is null or l.bioactivity_comments = ''));
Generated SQL: SELECT ligand_id, name
FROM ligand
WHERE approved IS TRUE
AND (bioactivity_comments IS NULL OR bioactivity_comments = '')
AND (mechanism_of_action IS NULL OR mechanism_of_action = '');

Expected SQL Results:
     ligand_id           name  ...  mechanism_of_action                                       clinical_use
0        11332    regdanvimab  ...                       Regdanvimab (CT-P59) was progressed to clinica...
1        12681     amprenavir  ...                       Amprenavir was approved to treat HIV-1 infecti...
2        10769      sulbactam  ...                       Ampicillin/sulbactam (Unasyn) and cefoperazone...
3         9074  echothiophate  ...                       Used as an ophthalmic agent to reduce intraocu...
4        11189    dalpiciclib  ...                       As of August 2020, there were 20 cancer clinic...
..         ...            ...  ...                  ...                                                ...
216       8681   volanesorsen  ...                       Phase 3 clinical trials <a href="https://clini...
217      12928  dirithromycin  ...                                                                        
218      13084   narlumosbart  ...                       Narlumosbart (JMT103) was advanced as a clinic...
219      12345      pamiparib  ...                       Pamiparib was issued its first approval for cl...
220      10815   fusidic acid  ...                       Fusidic acid is approved by a number of countr...

[221 rows x 7 columns]

Generated SQL Results:
     ligand_id              name
0        12681        amprenavir
1        12235       upacicalcet
2         1596          acipimox
3        12928     dirithromycin
4         9533               SNP
..         ...               ...
216      11169        carbetocin
217      10772          cefepime
218      10891         aviptadil
219      11241      terlipressin
220      11829  levoketoconazole

[221 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 22 ---
Natural Language Query: What potassium channels does GtoPdb have data on?
Expected SQL: select o.object_id, o.name as name, string_agg(f.name, ' | ') as family from object o left join receptor2family rf on o.object_id=rf.object_id left join family f on rf.family_id=f.family_id where o.object_id in (select object_id from receptor2family where family_id in (WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Potassium channels%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id)) group by o.object_id, f.family_id;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%potassium channel%'
    )
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT o.object_id, o.name 
FROM object o 
JOIN receptor2family rf ON o.object_id = rf.object_id 
WHERE rf.family_id IN (
    SELECT family_id 
    FROM subfamilies 
    UNION 
    SELECT family_id 
    FROM family 
    WHERE name ILIKE '%potassium channel%'
);

Expected SQL Results:
    object_id               name                                             family
0         380  K<sub>Ca</sub>1.1  Calcium- and sodium-activated potassium channe...
1         381  K<sub>Ca</sub>2.1  Calcium- and sodium-activated potassium channe...
2         382  K<sub>Ca</sub>2.2  Calcium- and sodium-activated potassium channe...
3         383  K<sub>Ca</sub>2.3  Calcium- and sodium-activated potassium channe...
4         384  K<sub>Ca</sub>3.1  Calcium- and sodium-activated potassium channe...
..        ...                ...                                                ...
73        573  K<SUB>v</SUB>11.2   Voltage-gated potassium channels (K<sub>v</sub>)
74        574  K<SUB>v</SUB>11.3   Voltage-gated potassium channels (K<sub>v</sub>)
75        575  K<SUB>v</SUB>12.1   Voltage-gated potassium channels (K<sub>v</sub>)
76        576  K<SUB>v</SUB>12.2   Voltage-gated potassium channels (K<sub>v</sub>)
77        577  K<SUB>v</SUB>12.3   Voltage-gated potassium channels (K<sub>v</sub>)

[78 rows x 3 columns]

Generated SQL Results:
    object_id                name
0         387   K<sub>Ca</sub>5.1
1         380   K<sub>Ca</sub>1.1
2         381   K<sub>Ca</sub>2.1
3         382   K<sub>Ca</sub>2.2
4         383   K<sub>Ca</sub>2.3
..        ...                 ...
73        523  K<sub>2P</sub>13.1
74        524  K<sub>2P</sub>15.1
75        525  K<sub>2P</sub>16.1
76        526  K<sub>2P</sub>17.1
77        527  K<sub>2P</sub>18.1

[78 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: True
Partial Column Accuracy: True

--- Processing Test Case 23 ---
Natural Language Query: What primary references are used to curate Somatostatin receptor agonist?
Expected SQL: select distinct ref.reference_id, ref.article_title, ref.authors, ref.title, ref.pubmed_id  from reference ref, interaction_affinity_refs iar where ref.reference_id=iar.reference_id and iar.interaction_id in (select i.interaction_id from interaction i where i.object_id in (select object_id from receptor2family where family_id in((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Somatostatin receptor%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%Somatostatin receptor%')))  and i.type='Agonist' );
Generated SQL: SELECT ref.reference_id, ref.article_title, ref.authors, ref.title, ref.pubmed_id 
FROM reference ref
JOIN interaction_affinity_refs iar ON ref.reference_id = iar.reference_id
JOIN interaction i ON iar.interaction_id = i.interaction_id
WHERE i.type = 'Agonist' 
AND i.object_id IN (
    SELECT object_id FROM object 
    WHERE object_id IN (
        SELECT object_id FROM receptor2family 
        WHERE family_id IN (
            WITH RECURSIVE subfamilies AS (
                SELECT group_id, family_id 
                FROM grouping 
                WHERE group_id IN (
                    SELECT family_id 
                    FROM family 
                    WHERE name ILIKE '%Somatostatin receptor%'
                )
                UNION
                SELECT e.group_id, e.family_id 
                FROM grouping e
                INNER JOIN subfamilies s ON s.family_id = e.group_id
            )
            SELECT family_id FROM subfamilies
            UNION
            SELECT family_id FROM family 
            WHERE name ILIKE '%Somatostatin receptor%'
        )
    )
);

Expected SQL Results:
    reference_id  ...   pubmed_id
0           6714  ...   9822540.0
1          18666  ...  17225119.0
2           6729  ...   8078491.0
3          18776  ...   8646408.0
4           6715  ...  12595949.0
5           6710  ...   8483934.0
6           6692  ...  12937948.0
7           6649  ...   9600011.0
8          18593  ...  21493671.0
9           6704  ...  10818261.0
10         18672  ...  18381940.0
11         18667  ...  21082773.0
12         18674  ...   6125148.0
13          6650  ...   9166718.0
14         18669  ...  16568203.0
15          6716  ...  14667212.0
16          6683  ...   9045884.0
17          6647  ...   9650799.0
18          6646  ...   8769372.0
19          6653  ...  15658864.0
20         18662  ...  12009943.0
21          6648  ...  10598788.0
22         18668  ...  20956465.0
23          6703  ...  11095748.0
24          6656  ...  15477717.0
25          6651  ...  15333679.0
26          6645  ...   8100350.0
27          6644  ...   9784130.0
28         18594  ...  15855408.0
29          6652  ...  15658865.0
30          6658  ...   9724791.0
31         18665  ...  11807604.0
32         18671  ...  10774879.0
33          6655  ...   7988476.0
34         36292  ...  11145612.0
35          6657  ...  11520208.0
36         18775  ...   9121614.0
37         18673  ...   6114372.0
38         18678  ...   2859510.0
39          6691  ...  15709181.0
40          6690  ...   9652348.0
41          6654  ...  12450568.0
42         47119  ...         NaN
43          6659  ...   8769370.0
44          6696  ...   8097479.0
45         18592  ...  19910453.0

[46 rows x 5 columns]

Generated SQL Results:
     reference_id  ...   pubmed_id
0            6644  ...   9784130.0
1            6645  ...   8100350.0
2            6646  ...   8769372.0
3            6647  ...   9650799.0
4            6648  ...  10598788.0
..            ...  ...         ...
491         36292  ...  11145612.0
492         36292  ...  11145612.0
493          6651  ...  15333679.0
494         36292  ...  11145612.0
495         47119  ...         NaN

[496 rows x 5 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 24 ---
Natural Language Query: What are the SMILES and InChI Keys for compounds that interact with Nicotinic acetylcholine receptors (nACh)
Expected SQL: select l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi_key  from ligand l left join ligand_structure ls on l.ligand_id=ls.ligand_id where l.ligand_id in (select i.ligand_id from interaction i where i.object_id in (select object_id from receptor2family where family_id in((WITH RECURSIVE subfamilies AS ( SELECT group_id, family_id from grouping where group_id in (select family_id from family where name ilike '%Nicotinic acetylcholine receptors%') UNION SELECT e.group_id, e.family_id from grouping e INNER JOIN subfamilies s ON s.family_id=e.group_id) SELECT family_id FROM subfamilies order by family_id) union select family_id from family where family_id in (select family_id from family where name ilike '%Nicotinic acetylcholine receptors%'))));
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Nicotinic acetylcholine receptors%'
    )
    UNION
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT DISTINCT l.ligand_id, l.name, ls.isomeric_smiles, ls.isomeric_standard_inchi_key
FROM ligand l
JOIN interaction i ON l.ligand_id = i.ligand_id
JOIN object o ON i.object_id = o.object_id
JOIN ligand_structure ls ON l.ligand_id = ls.ligand_id
WHERE o.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id 
        FROM subfamilies
    ) 
    OR family_id IN (
        SELECT family_id 
        FROM family 
        WHERE name ILIKE '%Nicotinic acetylcholine receptors%'
    )
);

Expected SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0        4005  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
1        3999  ...                         None
2        4011  ...  FIRBQKFGNFGBRC-NLBWWLDMSA-N
3        3975  ...                         None
4        3980  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
..        ...  ...                          ...
58      10700  ...  PYSCVJMLJRHJGJ-UHFFFAOYSA-N
59      11385  ...  KXAAIPFSUGPVMQ-GXDHUFHOSA-N
60      11384  ...  RPYWXZCFYPVCNQ-RVDMUPIBSA-N
61      10693  ...  LWWDCTBUJUEFDE-CRAIPNDOSA-N
62      11383  ...  VSOWCIMCDKXVRC-UHFFFAOYSA-N

[63 rows x 4 columns]

Generated SQL Results:
    ligand_id  ...  isomeric_standard_inchi_key
0         347  ...  QMGVPVSNSZLJIA-FVWCLLPLSA-N
1        3966  ...  JBSVHWCIKVSTTH-UHFFFAOYSA-N
2        3988  ...  WECKJONDRAUFDD-ZDUSSCGKSA-N
3       10693  ...  LWWDCTBUJUEFDE-CRAIPNDOSA-N
4        3983  ...  CSUQNJQRLCOOSR-NAKBKFBQSA-N
5        3979  ...  ANJTVLIZGCUXLD-ZIAKYUPESA-N
6        3978  ...  SNICXCGAKADSCV-UHFFFAOYSA-N
7        3973  ...  SVNSCQIKKAACJG-SBLJLSJOSA-N
8        3980  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
9        3993  ...  HGFXDSQLRSWUBO-UHFFFAOYSA-N
10       3987  ...  HFZDMKMXPGRKCK-GQCTYLIASA-N
11       3963  ...  VZJFGSRCJCXDSG-UHFFFAOYSA-N
12       3992  ...  PEAMDZVDNYENPN-UHFFFAOYSA-N
13      11384  ...  RPYWXZCFYPVCNQ-RVDMUPIBSA-N
14       3991  ...  CEIIEALEIHQDBX-UHFFFAOYSA-N
15       3998  ...  IPKZCLGGYKRDES-ZDUSSCGKSA-N
16       4001  ...  GVEAYVLWDAFXET-XGHATYIMSA-N
17      10700  ...  PYSCVJMLJRHJGJ-UHFFFAOYSA-N
18       3997  ...  PTGWFYYEAUFEAS-ZYHUDNBSSA-N
19       5459  ...  JQSHBVHOMNKWFT-DTORHVGOSA-N
20       4011  ...  FIRBQKFGNFGBRC-NLBWWLDMSA-N
21       9537  ...  YXSLJKQTIDHPOT-UHFFFAOYSA-N
22       2585  ...  SNICXCGAKADSCV-JTQLQIEISA-N
23       3990  ...  IMYZQPCYWPFTAG-UHFFFAOYSA-N
24       4007  ...  YRXAPIQPBSKAMJ-WDCFXWORSA-N
25       3971  ...  MRVNNESNVNUKCV-IBGZPJMESA-N
26       4004  ...  AXOIZCJOOAYSMI-UHFFFAOYSA-N
27       3995  ...  GTMRUYCIJSNXGB-UHFFFAOYSA-N
28       9056  ...  RNOBTWYQAWEZHH-JGVFFNPUSA-N
29       3982  ...  VUVGEYBNLLGGBG-MVPSLEAZSA-N
30       8883  ...  OZVULFLAPUPPFK-QFIPXVFZSA-N
31      11383  ...  VSOWCIMCDKXVRC-UHFFFAOYSA-N
32       7371  ...  NPDLTEZXGWRMLQ-IBGZPJMESA-N
33       4005  ...  XLTANAWLDBYGFU-VTLKBQQISA-N
34       3977  ...  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
35      11385  ...  KXAAIPFSUGPVMQ-GXDHUFHOSA-N
36       3968  ...  GIRLVGYIIVFTLI-IBGZPJMESA-N
37       3994  ...  JUOSGGQXEBBCJB-GORDUTHDSA-N
38       4000  ...  OUDXRNQPVSMGDW-UHFFFAOYSA-N
39       3974  ...  AKMKIDQMKPFYDJ-UHFFFAOYSA-N
40       2373  ...  AZSNMRSAGSSBNP-ZLRQRZFZSA-N
41       3989  ...  MKTAGSRKQIGEBH-SSDOTTSWSA-N
42        356  ...  OZLPUNFFCJDMJD-UHFFFAOYSA-N
43       3969  ...  OXKRFEWMSWPKKV-GHTZIAJQSA-N
44       3986  ...  ABACVOXFUHDKNZ-UHFFFAOYSA-N
45       6926  ...  SSRDSYXGYPJKRR-ZDUSSCGKSA-N
46       7697  ...  OCKIPDMKGPYYJS-ZDUSSCGKSA-N
47       3962  ...  YNCXHXYZTLIZTO-UHFFFAOYSA-N
48       3976  ...  NLPRAJRHRHZCQQ-UHFFFAOYSA-N
49       3996  ...  UQOFGTXDASPNLL-XHNCKOQMSA-N

[50 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 25 ---
Natural Language Query: What ligands and structures have a pKi values > 8 when interacting with transporter targets?
Expected SQL: select l.ligand_id, l.name, l.type, ls.isomeric_smiles, ls.isomeric_standard_inchi_key, i.type, i.action, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units from ligand l, interaction i join ligand_structure ls on i.ligand_id=ls.ligand_id where i.object_id in (select object_id from transporter) and i.ligand_id=l.ligand_id  and case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low >= 8 else i.affinity_high >= 8  end else i.affinity_median >= 8 end and i.affinity_units = 'pKi' order by affinity desc;
Generated SQL: SELECT 
    l.ligand_id, 
    l.name, 
    l.type, 
    ls.isomeric_smiles, 
    ls.isomeric_standard_inchi_key, 
    i.type, 
    i.action, 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END AS affinity, 
    i.affinity_units 
FROM 
    ligand l
JOIN 
    interaction i ON i.ligand_id = l.ligand_id
JOIN 
    ligand_structure ls ON l.ligand_id = ls.ligand_id
WHERE 
    i.object_id IN (
        SELECT 
            object_id 
        FROM 
            receptor2family 
        WHERE 
            family_id IN (
                WITH RECURSIVE subfamilies AS (
                    SELECT 
                        group_id, family_id 
                    FROM 
                        grouping 
                    WHERE 
                        group_id IN (
                            SELECT 
                                family_id 
                            FROM 
                                family 
                            WHERE 
                                name ILIKE '%Transporters%'
                        )
                    UNION
                    SELECT 
                        e.group_id, e.family_id 
                    FROM 
                        grouping e 
                    INNER JOIN 
                        subfamilies s ON s.family_id = e.group_id
                ) 
                SELECT 
                    family_id 
                FROM 
                    subfamilies
            )
    )
AND 
    i.affinity_units = 'pKi' 
AND 
    CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END > 8;

Expected SQL Results:
    ligand_id                                           name  ... affinity affinity_units
0        4768                            aminobenzovesamicol  ...    10.90            pKi
1        4512       nitrobenzylmercaptopurine ribonucleoside  ...     9.70            pKi
2        2398                                   clomipramine  ...     9.68            pKi
3        4590                                     draflazine  ...     9.60            pKi
4        4790                                     paroxetine  ...     9.60            pKi
5        4734                                        KF24345  ...     9.40            pKi
6        4513                                         NBTGR   ...     9.30            pKi
7        4798                                     sertraline  ...     9.10            pKi
8       10064                            GlyT1 inhibitor 27a  ...     9.10            pKi
9        9983                                     vanoxerine  ...     9.00            pKi
10       4717                                        dilazep  ...     9.00            pKi
11       4797                                       mazindol  ...     8.90            pKi
12       4807                                   dipyridamole  ...     8.80            pKi
13       7351                                   vortioxetine  ...     8.80            pKi
14       4759                                      vesamicol  ...     8.70            pKi
15       2399                                    desipramine  ...     8.68            pKi
16        203                                     fluoxetine  ...     8.50            pKi
17      10605                                        AZD3965  ...     8.49            pKi
18       4637                                     nisoxetine  ...     8.40            pKi
19       7547                                     citalopram  ...     8.36            pKi
20       9880                                            H05  ...     8.32            pKi
21       8813                   compound 30 [PMID: 16455256]  ...     8.32            pKi
22      10405                                       BAY-8002  ...     8.30            pKi
23        202                                     duloxetine  ...     8.30            pKi
24       7551                                    lofepramine  ...     8.27            pKi
25        202                                     duloxetine  ...     8.22            pKi
26       2404                                  nortriptyline  ...     8.20            pKi
27       7189                                    fluvoxamine  ...     8.19            pKi
28       9880                                            H05  ...     8.17            pKi
29       7285                                  protriptyline  ...     8.17            pKi
30       2404                                  nortriptyline  ...     8.16            pKi
31       4792                                    nomifensine  ...     8.10            pKi
32       7549                                      dosulepin  ...     8.07            pKi
33       4494                                hemicholinium-3  ...     8.00            pKi
34       4808                                     reboxetine  ...     8.00            pKi
35       4499  Lys[Z(NO<sub>2</sub>)]-Lys[Z(NO<sub>2</sub>)]  ...     8.00            pKi
36       4797                                       mazindol  ...     8.00            pKi

[37 rows x 9 columns]

Generated SQL Results:
    ligand_id                                      name  ... affinity affinity_units
0        7189                               fluvoxamine  ...     8.19            pKi
1         202                                duloxetine  ...     8.22            pKi
2         202                                duloxetine  ...     8.30            pKi
3        7551                               lofepramine  ...     8.27            pKi
4        8813              compound 30 [PMID: 16455256]  ...     8.32            pKi
5        9880                                       H05  ...     8.32            pKi
6        9880                                       H05  ...     8.17            pKi
7        9983                                vanoxerine  ...     9.00            pKi
8       10405                                  BAY-8002  ...     8.30            pKi
9       10605                                   AZD3965  ...     8.49            pKi
10      10064                       GlyT1 inhibitor 27a  ...     9.10            pKi
11       4759                                 vesamicol  ...     8.70            pKi
12       4768                       aminobenzovesamicol  ...    10.90            pKi
13       4734                                   KF24345  ...     9.40            pKi
14        203                                fluoxetine  ...     8.50            pKi
15       4790                                paroxetine  ...     9.60            pKi
16       4717                                   dilazep  ...     9.00            pKi
17       4797                                  mazindol  ...     8.90            pKi
18       4637                                nisoxetine  ...     8.40            pKi
19       4792                               nomifensine  ...     8.10            pKi
20       4807                              dipyridamole  ...     8.80            pKi
21       4590                                draflazine  ...     9.60            pKi
22       4513                                    NBTGR   ...     9.30            pKi
23       4512  nitrobenzylmercaptopurine ribonucleoside  ...     9.70            pKi
24       4798                                sertraline  ...     9.10            pKi
25       2398                              clomipramine  ...     9.68            pKi
26       2399                               desipramine  ...     8.68            pKi
27       2404                             nortriptyline  ...     8.20            pKi
28       2404                             nortriptyline  ...     8.16            pKi
29       7285                             protriptyline  ...     8.17            pKi
30       7351                              vortioxetine  ...     8.80            pKi
31       7547                                citalopram  ...     8.36            pKi
32       7549                                 dosulepin  ...     8.07            pKi

[33 rows x 9 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 26 ---
Natural Language Query: What range of affinity values does α-MSH have for MC3 receptor?
Expected SQL: select l.ligand_id, l.name, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from ligand l, interaction i where i.object_id in (select object_id from object where name ilike '%MC<sub>3</sub> receptor%') and i.ligand_id in (select ligand_id from ligand where name ilike '%&alpha;-MSH%') and l.ligand_id=i.ligand_id and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT 
    i.affinity_low, 
    i.affinity_median, 
    i.affinity_high, 
    i.affinity_units
FROM 
    interaction i
WHERE 
    i.ligand_id IN (SELECT ligand_id FROM ligand WHERE name ILIKE '%α-MSH%' OR name ILIKE '%alpha-MSH%' OR name ILIKE '%Alpha-melanocyte-stimulating hormone%')
    AND i.object_id IN (SELECT object_id FROM object WHERE name ILIKE '%MC3 receptor%' OR name ILIKE '%Melanocortin 3 receptor%');

Expected SQL Results:
   ligand_id         name  affinity affinity_units     type        action
0       1320  &alpha;-MSH       8.4            pKi  Agonist  Full agonist

Generated SQL Results:
Empty DataFrame
Columns: [affinity_low, affinity_median, affinity_high, affinity_units]
Index: []

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 27 ---
Natural Language Query: What is the average pKi value for natural products compared to the average pIC50 values?
Expected SQL: select 'pKi', (select avg(case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end) as affinity from interaction i where i.ligand_id in (select ligand_id from ligand where type='Natural product') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) and i.affinity_units = 'pKi'), (select avg(case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end) as affinity from interaction i where i.ligand_id in (select ligand_id from ligand where type='Natural product') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) and i.affinity_units = 'pIC50'), 'pIC50';
Generated SQL: SELECT 
    'pKi' AS affinity_type,
    AVG(CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END) AS average_affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    i.affinity_units = 'pKi' 
    AND l.type = 'Natural product'

UNION ALL

SELECT 
    'pIC50' AS affinity_type,
    AVG(CASE 
        WHEN i.affinity_median IS NULL THEN 
            CASE 
                WHEN i.affinity_high IS NULL THEN i.affinity_low 
                ELSE i.affinity_high 
            END 
        ELSE i.affinity_median 
    END) AS average_affinity
FROM 
    interaction i
JOIN 
    ligand l ON i.ligand_id = l.ligand_id
WHERE 
    i.affinity_units = 'pIC50' 
    AND l.type = 'Natural product';

Expected SQL Results:
  ?column?  affinity  affinity ?column?
0      pKi  6.834046  6.373916    pIC50

Generated SQL Results:
  affinity_type  average_affinity
0           pKi          6.834046
1         pIC50          6.373916

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: False

--- Processing Test Case 28 ---
Natural Language Query: List endogenous activators of Adenyl cyclases, with their affinities
Expected SQL: select o.object_id, o.name, glrp.description, glrp.rank_potency from grac_ligand_rank_potency glrp, object o where glrp.object_id in (select object_id from object where object_id in (select object_id from receptor2family where family_id in (select family_id from family where name ilike '%Adenylyl cyclases%')) union select object_id from object where name ilike '%Adenylyl cyclases%') and glrp.description = 'Endogenous activators' and glrp.object_id=o.object_id;
Generated SQL: WITH RECURSIVE subfamilies AS (
    SELECT group_id, family_id 
    FROM grouping 
    WHERE group_id IN (SELECT family_id FROM family WHERE name ILIKE '%Adenyl cyclases%')
    UNION 
    SELECT e.group_id, e.family_id 
    FROM grouping e 
    INNER JOIN subfamilies s ON s.family_id = e.group_id
)
SELECT i.ligand_id, l.name, i.object_id, o.name AS target_name, i.affinity_units, 
       CASE 
           WHEN i.affinity_median IS NULL THEN 
               CASE 
                   WHEN i.affinity_high IS NULL THEN i.affinity_low 
                   ELSE i.affinity_high 
               END 
           ELSE i.affinity_median 
       END AS affinity
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
JOIN object o ON i.object_id = o.object_id
WHERE i.object_id IN (
    SELECT object_id 
    FROM receptor2family 
    WHERE family_id IN (
        SELECT family_id FROM subfamilies
        UNION 
        SELECT family_id FROM family WHERE name ILIKE '%Adenyl cyclases%'
    )
)
AND i.type = 'Activator'
AND l.type = 'Endogenous peptide'
AND ((i.affinity_units IS NOT NULL AND i.affinity_units != '-' AND i.affinity_units != '') 
     OR (i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != ''));

Expected SQL Results:
   object_id  ...                                       rank_potency
0       1278  ...      <Ligand id=2351/>, PKC-evoked phosphorylation
1       1279  ...  G&beta;&gamma;, PKC-evoked phosphorylation, Ra...
2       1280  ...      <Ligand id=2351/>, PKC-evoked phosphorylation
3       1281  ...                                     G&beta;&gamma;
4       1282  ...  PKC-evoked phophorylation, G&beta;&gamma;, Raf...
5       1283  ...         G&beta;&gamma;, Raf-evoked phosphorylation
6       1284  ...         G&beta;&gamma;, PKC-evoked phosphorylation
7       1285  ...                                  <Ligand id=2351/>
8       3068  ...                       Bicarbonate, Ca<sup>2+</sup>

[9 rows x 4 columns]

Generated SQL Results:
Empty DataFrame
Columns: [ligand_id, name, object_id, target_name, affinity_units, affinity]
Index: []

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 29 ---
Natural Language Query: What concentration/s should be used in isolated tissue experiments?  
Expected SQL: select i.ligand_id, l.name, i.assay_description, case when i.affinity_median is null then case when i.affinity_high is null then i.affinity_low else i.affinity_high end else i.affinity_median end as affinity, i.affinity_units, i.type, i.action from interaction i, ligand l where i.ligand_id=l.ligand_id and (i.assay_description ilike '%human%' or i.assay_description ilike '%rat%' or i.assay_description ilike '%mouse%');
Generated SQL: SELECT i.ligand_id, l.name, i.concentration_range, i.affinity_units 
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.concentration_range IS NOT NULL AND i.concentration_range != '-' AND i.concentration_range != '';

Expected SQL Results:
      ligand_id                  name  ...        type           action
0         10080            diflapolin  ...   Inhibitor       Inhibition
1         10193               PBF-509  ...  Antagonist       Antagonist
2         10193               PBF-509  ...  Antagonist       Antagonist
3         10082              DS-8500a  ...     Agonist          Agonist
4         10090            cemiplimab  ...    Antibody          Binding
...         ...                   ...  ...         ...              ...
1031      13387              XPC-5462  ...   Inhibitor       Inhibition
1032      13390              XPC-7224  ...   Inhibitor       Inhibition
1033      13390              XPC-7224  ...   Inhibitor       Inhibition
1034       2923  mocravimod-phosphate  ...     Agonist     Full agonist
1035       2923  mocravimod-phosphate  ...     Agonist  Partial agonist

[1036 rows x 7 columns]

Generated SQL Results:
     ligand_id                      name concentration_range affinity_units
0         2499                    thymol             6.25-25          pEC50
1         2508   lysophosphatidylcholine                   1              -
2         4028  lysophosphatidylinositol                   1              -
3         4331                      TRIM                 500              -
4         2343        tetraethylammonium               10000              -
..         ...                       ...                 ...            ...
237        708           Mg<sup>2+</sup>          1000-10000              -
238       2293          trichloroethanol           250-10000              -
239        566           Zn<sup>2+</sup>               1-300              -
240       2447           flufenamic acid             50-1000              -
241        707           Ca<sup>2+</sup>               >1000              -

[242 rows x 4 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

--- Processing Test Case 30 ---
Natural Language Query: Are the compounds active in rats and mice as well as humans?  
Expected SQL: select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Mouse') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Rat') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != '')) intersect select distinct i.ligand_id, l.name from interaction i, ligand l where i.ligand_id=l.ligand_id and i.species_id in (select species_id from species where name = 'Human') and ((i.affinity_units is not null and i.affinity_units != '-' and i.affinity_units != '') or (i.concentration_range is not null and i.concentration_range != '-' and i.concentration_range != ''));
Generated SQL: SELECT DISTINCT i.ligand_id, l.name
FROM interaction i
JOIN ligand l ON i.ligand_id = l.ligand_id
WHERE i.species_id IN (
    SELECT species_id FROM species WHERE name IN ('Human', 'Mouse', 'Rat')
)
GROUP BY i.ligand_id, l.name
HAVING COUNT(DISTINCT i.species_id) = 3;

Expected SQL Results:
     ligand_id        name
0          667   icatibant
1         1888      U46619
2         6409        CTEP
3         1549  NPY-(2-36)
4           36   buspirone
..         ...         ...
273        247   GR 113808
274       2127    senktide
275       6465  GSK2193874
276         97  ritanserin
277       2347  cyclic GMP

[278 rows x 2 columns]

Generated SQL Results:
     ligand_id                          name
0            4                          5-CT
1            5           5-hydroxytryptamine
2            7                     8-OH-DPAT
3           23                      RU 24969
4           36                     buspirone
..         ...                           ...
277      12105  compound 19 [PMID: 35925768]
278      12314  compound 27 [PMID: 36449304]
279      12643                   relutrigine
280      13107                        GNE684
281      13273                       AZD5462

[282 rows x 2 columns]

Execution Accuracy: False
Partial Execution Accuracy: False
Partial Column Accuracy: True

==================================================
SUCCESSFUL STATISTICS:
Total test queries executed: 30
Non empty output rate: 0.9
Successful execution rate: 1.0
Non empty test queries: 27

DETAILED EXECUTION STATISTICS:
Execution Accuracy: 0.13333333333333333
Partial Execution Accuracy: 0.36666666666666664
Partial Column Accuracy: 0.9

FAILURE STATISTICS:
None count: 0
None IDs: 
Empty count: 3
Empty IDs: 73, 59, 78
==================================================
